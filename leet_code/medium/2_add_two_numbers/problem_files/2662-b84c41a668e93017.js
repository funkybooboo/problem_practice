"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2662],{82662:(t,e,i)=>{i.d(e,{Ez:()=>tA,Kl:()=>tH});var n,r=i(96540);function s(t,e){if(!t)throw Error("Invariant failed")}var o=i(74848);function a(t,e,i){return t[e]?t[e][0]?t[e][0][i]:t[e][i]:"contentBoxSize"===e?t.contentRect["inlineSize"===i?"width":"height"]:void 0}let l={toVector:(t,e)=>(void 0===t&&(t=e),Array.isArray(t)?t:[t,t]),add:(t,e)=>[t[0]+e[0],t[1]+e[1]],sub:(t,e)=>[t[0]-e[0],t[1]-e[1]],addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function c(t,e,i){return 0===e||Math.abs(e)===1/0?Math.pow(t,5*i):t*e*i/(e+i*t)}function u(t,e,i,n=.15){return 0===n?Math.max(e,Math.min(t,i)):t<e?-c(e-t,i-e,n)+e:t>i?+c(t-i,i-e,n)+i:t}function h(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach(function(e){h(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let m={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function p(t){return t?t[0].toUpperCase()+t.slice(1):""}let v=["enter","leave"],g=["gotpointercapture","lostpointercapture"];function y(t){return"touches"in t}function b(t){return y(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function _(t){return y(t)?("touchend"===t.type||"touchcancel"===t.type?t.changedTouches:t.targetTouches)[0]:t}function x(t,e){try{let i=e.clientX-t.clientX,n=e.clientY-t.clientY,r=(e.clientX+t.clientX)/2,s=(e.clientY+t.clientY)/2,o=Math.hypot(i,n);return{angle:-(180*Math.atan2(i,n))/Math.PI,distance:o,origin:[r,s]}}catch(t){}return null}function w(t,e){let[i,n]=Array.from(t.touches).filter(t=>e.includes(t.identifier));return x(i,n)}function M(t){let e=_(t);return y(t)?e.identifier:e.pointerId}function k(t){let e=_(t);return[e.clientX,e.clientY]}function S(t){let{deltaX:e,deltaY:i,deltaMode:n}=t;return 1===n?(e*=40,i*=40):2===n&&(e*=800,i*=800),[e,i]}function E(t,...e){return"function"==typeof t?t(...e):t}function P(){}function T(t,e){return Object.assign({},e,t||{})}class C{constructor(t,e,i){this.ctrl=t,this.args=e,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:t,shared:e,ingKey:i,args:n}=this;e[i]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=n,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){let e=this.state,i=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=i.from?E(i.from,e):e.offset,e.offset=e.lastOffset,e.startTime=e.timeStamp=t.timeStamp)}computeValues(t){let e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){let t=this.state;t._initial=t._values,t.initial=t.values}compute(t){let{state:e,config:i,shared:n}=this;e.args=this.args;let r=0;if(t&&(e.event=t,i.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,function(t){let e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){let{shiftKey:i,altKey:n,metaKey:r,ctrlKey:s}=t;Object.assign(e,{shiftKey:i,altKey:n,metaKey:r,ctrlKey:s})}return e}(t)),n.down=n.pressed=n.buttons%2==1||n.touches>0,r=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){let t=e._delta.map(Math.abs);l.addTo(e._distance,t)}this.axisIntent&&this.axisIntent(t);let[s,o]=e._movement,[a,c]=i.threshold,{_step:h,values:d}=e;if(i.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(s)>=a&&d[0]),!1===h[1]&&(h[1]=Math.abs(o)>=c&&d[1])):(!1===h[0]&&(h[0]=Math.abs(s)>=a&&Math.sign(s)*a),!1===h[1]&&(h[1]=Math.abs(o)>=c&&Math.sign(o)*c)),e.intentional=!1!==h[0]||!1!==h[1],!e.intentional)return;let f=[0,0];if(i.hasCustomTransform){let[t,e]=d;f[0]=!1!==h[0]?t-h[0]:0,f[1]=!1!==h[1]?e-h[1]:0}else f[0]=!1!==h[0]?s-h[0]:0,f[1]=!1!==h[1]?o-h[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(f);let m=e.offset,p=e._active&&!e._blocked||e.active;p&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=n[this.ingKey]=e._active,t&&(e.first&&("bounds"in i&&(e._bounds=E(i.bounds,e)),this.setup&&this.setup()),e.movement=f,this.computeOffset()));let[v,g]=e.offset,[[y,b],[_,x]]=e._bounds;e.overflow=[v<y?-1:v>b?1:0,g<_?-1:g>x?1:0],e._movementBound[0]=!!e.overflow[0]&&(!1===e._movementBound[0]?e._movement[0]:e._movementBound[0]),e._movementBound[1]=!!e.overflow[1]&&(!1===e._movementBound[1]?e._movement[1]:e._movementBound[1]);let w=e._active&&i.rubberband||[0,0];if(e.offset=function(t,[e,i],[n,r]){let[[s,o],[a,l]]=t;return[u(e,s,o,n),u(i,a,l,r)]}(e._bounds,e.offset,w),e.delta=l.sub(e.offset,m),this.computeMovement(),p&&(!e.last||r>32)){e.delta=l.sub(e.offset,m);let t=e.delta.map(Math.abs);l.addTo(e.distance,t),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&r>0&&(e.velocity=[t[0]/r,t[1]/r],e.timeDelta=r)}}emit(){let t=this.state,e=this.shared,i=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!i.triggerAllEvents)return;let n=this.handler(f(f(f({},e),t),{},{[this.aliasKey]:t.values}));void 0!==n&&(t.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class I extends C{constructor(...t){super(...t),h(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=l.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=l.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){let e=this.state,i=this.config;if(!e.axis&&t){let n="object"==typeof i.axisThreshold?i.axisThreshold[b(t)]:i.axisThreshold;e.axis=function([t,e],i){let n=Math.abs(t),r=Math.abs(e);return n>r&&n>i?"x":r>n&&r>i?"y":void 0}(e._movement,n)}e._blocked=(i.lockDirection||!!i.axis)&&!e.axis||!!i.axis&&i.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0}}}let O=t=>t,D={enabled:(t=!0)=>t,eventOptions:(t,e,i)=>f(f({},i.shared.eventOptions),t),preventDefault:(t=!1)=>t,triggerAllEvents:(t=!1)=>t,rubberband(t=0){switch(t){case!0:return[.15,.15];case!1:return[0,0];default:return l.toVector(t)}},from:t=>"function"==typeof t?t:null!=t?l.toVector(t):void 0,transform(t,e,i){let n=t||i.shared.transform;return this.hasCustomTransform=!!n,n||O},threshold:t=>l.toVector(t,0)},j=0,A=f(f({},D),{},{axis(t,e,{axis:i}){if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:(t=j)=>t,bounds(t={}){if("function"==typeof t)return e=>A.bounds(t(e));if("current"in t)return()=>t.current;if("function"==typeof HTMLElement&&t instanceof HTMLElement)return t;let{left:e=-1/0,right:i=1/0,top:n=-1/0,bottom:r=1/0}=t;return[[e,i],[n,r]]}}),$={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class L extends I{constructor(...t){super(...t),h(this,"ingKey","dragging")}reset(){super.reset();let t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){let t=this.state;if(t._bounds instanceof HTMLElement){let e=t._bounds.getBoundingClientRect(),i=t.currentTarget.getBoundingClientRect(),n={left:e.left-i.left+t.offset[0],right:e.right-i.right+t.offset[0],top:e.top-i.top+t.offset[1],bottom:e.bottom-i.bottom+t.offset[1]};t._bounds=A.bounds(n)}}cancel(){let t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){let e=this.config,i=this.state;if(null!=t.buttons&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):-1!==e.pointerButtons&&e.pointerButtons!==t.buttons))return;let n=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),n&&n.size>1&&i._pointerActive||(this.start(t),this.setupPointer(t),i._pointerId=M(t),i._pointerActive=!0,this.computeValues(k(t)),this.computeInitial(),e.preventScrollAxis&&"mouse"!==b(t)?(i._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){let e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){let e=this.state,i=this.config;if(!e._pointerActive)return;let n=M(t);if(void 0!==e._pointerId&&n!==e._pointerId)return;let r=k(t);if(document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=l.sub(r,e._values),this.computeValues(r)),l.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional){this.timeoutStore.remove("dragDelay"),e.active=!1,this.startPointerDrag(t);return}if(i.preventScrollAxis&&!e._preventScroll){if(!e.axis)return;if(e.axis===i.preventScrollAxis||"xy"===i.preventScrollAxis){e._active=!1,this.clean();return}this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(t){}let e=this.state,i=this.config;if(!e._active||!e._pointerActive)return;let n=M(t);if(void 0!==e._pointerId&&n!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);let[r,s]=e._distance;if(e.tap=r<=i.tapsThreshold&&s<=i.tapsThreshold,e.tap&&i.filterTaps)e._force=!0;else{let[t,n]=e._delta,[r,s]=e._movement,[o,a]=i.swipe.velocity,[l,c]=i.swipe.distance,u=i.swipe.duration;if(e.elapsedTime<u){let i=Math.abs(t/e.timeDelta),u=Math.abs(n/e.timeDelta);i>o&&Math.abs(r)>l&&(e.swipe[0]=Math.sign(t)),u>a&&Math.abs(s)>c&&(e.swipe[1]=Math.sign(n))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){let e=this.config,i=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,"persist"in t&&"function"==typeof t.persist&&t.persist();let e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){let e=$[t.key];if(e){let i=this.state,n=t.shiftKey?10:t.altKey?.1:1;this.start(t),i._delta=e(this.config.keyboardDisplacement,n),i._keyboardActive=!0,l.addTo(i._movement,i._delta),this.compute(t),this.emit()}}keyUp(t){t.key in $&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){let e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}let B="undefined"!=typeof window&&window.document&&window.document.createElement;function R(){return B&&"ontouchstart"in window}let K={isBrowser:B,gesture:function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),touch:R(),touchscreen:R()||B&&window.navigator.maxTouchPoints>1,pointer:B&&"onpointerdown"in window,pointerLock:B&&"exitPointerLock"in window.document},z=10,N={mouse:0,touch:0,pen:8},V=f(f({},A),{},{device(t,e,{pointer:{touch:i=!1,lock:n=!1,mouse:r=!1}={}}){return(this.pointerLock=n&&K.pointerLock,K.touch&&i)?"touch":this.pointerLock?"mouse":K.pointer&&!r?"pointer":K.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:i}){if(this.preventScrollDelay="number"==typeof i?i:i||void 0===i&&t?250:void 0,K.touchscreen&&!1!==i)return t||(void 0!==i?"y":void 0)},pointerCapture(t,e,{pointer:{capture:i=!0,buttons:n=1,keys:r=!0}={}}){return this.pointerButtons=n,this.keys=r,!this.pointerLock&&"pointer"===this.device&&i},threshold(t,e,{filterTaps:i=!1,tapsThreshold:n=3,axis:r}){let s=l.toVector(t,i?n:r?1:0);return this.filterTaps=i,this.tapsThreshold=n,s},swipe({velocity:t=.5,distance:e=50,duration:i=250}={}){return{velocity:this.transform(l.toVector(t)),distance:this.transform(l.toVector(e)),duration:i}},delay(t=0){switch(t){case!0:return 180;case!1:return 0;default:return t}},axisThreshold:t=>t?f(f({},N),t):N,keyboardDisplacement:(t=z)=>t});function Y(t){let[e,i]=t.overflow,[n,r]=t._delta,[s,o]=t._direction;(e<0&&n>0&&s<0||e>0&&n<0&&s>0)&&(t._movement[0]=t._movementBound[0]),(i<0&&r>0&&o<0||i>0&&r<0&&o>0)&&(t._movement[1]=t._movementBound[1])}class q extends C{constructor(...t){super(...t),h(this,"ingKey","pinching"),h(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){let{type:t,movement:e,lastOffset:i}=this.state;"wheel"===t?this.state.offset=l.add(e,i):this.state.offset=[(1+e[0])*i[0],e[1]+i[1]]}computeMovement(){let{offset:t,lastOffset:e}=this.state;this.state.movement=[t[0]/e[0],t[1]-e[1]]}axisIntent(){let t=this.state,[e,i]=t._movement;if(!t.axis){let n=30*Math.abs(e)-Math.abs(i);n<0?t.axis="angle":n>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&("scale"===this.state.axis?t[1]=0:"angle"===this.state.axis&&(t[0]=0))}cancel(){let t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);let e=this.state,i=this.ctrl.touchIds;if(e._active&&e._touchIds.every(t=>i.has(t))||i.size<2)return;this.start(t),e._touchIds=Array.from(i).slice(0,2);let n=w(t,e._touchIds);n&&this.pinchStart(t,n)}pointerStart(t){if(null!=t.buttons&&t.buttons%2!=1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);let e=this.state,i=e._pointerEvents,n=this.ctrl.pointerIds;if(e._active&&Array.from(i.keys()).every(t=>n.has(t))||(i.size<2&&i.set(t.pointerId,t),e._pointerEvents.size<2))return;this.start(t);let r=x(...Array.from(i.values()));r&&this.pinchStart(t,r)}pinchStart(t,e){this.state.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;let e=w(t,this.state._touchIds);e&&this.pinchMove(t,e)}pointerMove(t){let e=this.state._pointerEvents;if(e.has(t.pointerId)&&e.set(t.pointerId,t),!this.state._active)return;let i=x(...Array.from(e.values()));i&&this.pinchMove(t,i)}pinchMove(t,e){let i=this.state,n=i._values[1],r=e.angle-n,s=0;Math.abs(r)>270&&(s+=Math.sign(r)),this.computeValues([e.distance,e.angle-360*s]),i.origin=e.origin,i.turns=s,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){let e=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(t){}e._pointerEvents.has(t.pointerId)&&e._pointerEvents.delete(t.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();let e=this.state;e._active||(this.start(t),this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;let e=this.state;this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY];let i=e._movement;e._movement=[t.scale-1,t.rotation],e._delta=l.sub(e._movement,i),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){let e=this.config.modifierKey;(!e||(Array.isArray(e)?e.find(e=>t[e]):t[e]))&&(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||!t.cancelable||t.preventDefault();let e=this.state;e._delta=[-S(t)[1]/100*e.offset[0],0],l.addTo(e._movement,e._delta),Y(e),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){let e=this.config.device;e&&(t(e,"start",this[e+"Start"].bind(this)),t(e,"change",this[e+"Move"].bind(this)),t(e,"end",this[e+"End"].bind(this)),t(e,"cancel",this[e+"End"].bind(this)),t("lostPointerCapture","",this[e+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}let H=f(f({},D),{},{device(t,e,{shared:i,pointer:{touch:n=!1}={}}){if(i.target&&!K.touch&&K.gesture)return"gesture";if(K.touch&&n)return"touch";if(K.touchscreen){if(K.pointer)return"pointer";if(K.touch)return"touch"}},bounds(t,e,{scaleBounds:i={},angleBounds:n={}}){let r=t=>{let e=T(E(i,t),{min:-1/0,max:1/0});return[e.min,e.max]},s=t=>{let e=T(E(n,t),{min:-1/0,max:1/0});return[e.min,e.max]};return"function"!=typeof i&&"function"!=typeof n?[r(),s()]:t=>[r(t),s(t)]},threshold(t,e,i){return this.lockDirection="lock"===i.axis,l.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey:t=>void 0===t?"ctrlKey":t,pinchOnWheel:(t=!0)=>t});class X extends I{constructor(...t){super(...t),h(this,"ingKey","moving")}move(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(k(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;let e=k(t),i=this.state;i._delta=l.sub(e,i._values),l.addTo(i._movement,i._delta),this.computeValues(e),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}let W=f(f({},A),{},{mouseOnly:(t=!0)=>t});class U extends I{constructor(...t){super(...t),h(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();let e=this.state,i=function(t){var e,i;let{scrollX:n,scrollY:r,scrollLeft:s,scrollTop:o}=t.currentTarget;return[null!==(e=null!=n?n:s)&&void 0!==e?e:0,null!==(i=null!=r?r:o)&&void 0!==i?i:0]}(t);e._delta=l.sub(i,e._values),l.addTo(e._movement,e._delta),this.computeValues(i),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}class F extends I{constructor(...t){super(...t),h(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){let e=this.state;e._delta=S(t),l.addTo(e._movement,e._delta),Y(e),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}class G extends I{constructor(...t){super(...t),h(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&"mouse"!==t.pointerType||(this.start(t),this.computeValues(k(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&"mouse"!==t.pointerType)return;let e=this.state;if(!e._active)return;e._active=!1;let i=k(t);e._movement=e._delta=l.sub(i,e._values),this.computeValues(i),this.compute(t),e.delta=e.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}let J=f(f({},A),{},{mouseOnly:(t=!0)=>t}),Q=new Map,Z=new Map;function tt(t){Q.set(t.key,t.engine),Z.set(t.key,t.resolver)}let te={key:"drag",engine:L,resolver:V},ti={key:"hover",engine:G,resolver:J},tn={key:"move",engine:X,resolver:W},tr={key:"pinch",engine:q,resolver:H},ts={key:"scroll",engine:U,resolver:A},to={key:"wheel",engine:F,resolver:A},ta={target(t){if(t)return()=>"current"in t?t.current:t},enabled:(t=!0)=>t,window:(t=K.isBrowser?window:void 0)=>t,eventOptions:({passive:t=!0,capture:e=!1}={})=>({passive:t,capture:e}),transform:t=>t},tl=["target","eventOptions","window","enabled","transform"];function tc(t={},e){let i={};for(let[n,r]of Object.entries(e))switch(typeof r){case"function":i[n]=r.call(i,t[n],n,t);break;case"object":i[n]=tc(t[n],r);break;case"boolean":r&&(i[n]=t[n])}return i}class tu{constructor(t,e){h(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,i,n,r){let s=this._listeners,o=function(t,e=""){let i=m[t];return t+(i&&i[e]||e)}(e,i),a=f(f({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);t.addEventListener(o,n,a);let l=()=>{t.removeEventListener(o,n,a),s.delete(l)};return s.add(l),l}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class th{constructor(){h(this,"_timeouts",new Map)}add(t,e,i=140,...n){this.remove(t),this._timeouts.set(t,window.setTimeout(e,i,...n))}remove(t){let e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class td{constructor(t){h(this,"gestures",new Set),h(this,"_targetEventStore",new tu(this)),h(this,"gestureEventStores",{}),h(this,"gestureTimeoutStores",{}),h(this,"handlers",{}),h(this,"config",{}),h(this,"pointerIds",new Set),h(this,"touchIds",new Set),h(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(t,e){e.drag&&tf(t,"drag"),e.wheel&&tf(t,"wheel"),e.scroll&&tf(t,"scroll"),e.move&&tf(t,"move"),e.pinch&&tf(t,"pinch"),e.hover&&tf(t,"hover")}(this,t)}setEventIds(t){return y(t)?(this.touchIds=new Set(Array.from(t.touches).filter(e=>{var i,n;return e.target===t.currentTarget||(null===(i=t.currentTarget)||void 0===i||null===(n=i.contains)||void 0===n?void 0:n.call(i,e.target))}).map(t=>t.identifier)),this.touchIds):"pointerId"in t?("pointerup"===t.type||"pointercancel"===t.type?this.pointerIds.delete(t.pointerId):"pointerdown"===t.type&&this.pointerIds.add(t.pointerId),this.pointerIds):void 0}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=function(t,e,i={}){let{target:n,eventOptions:r,window:s,enabled:o,transform:a}=t,l=function(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}(t,tl);if(i.shared=tc({target:n,eventOptions:r,window:s,enabled:o,transform:a},ta),e){let t=Z.get(e);i[e]=tc(f({shared:i.shared},l),t)}else for(let t in l){let e=Z.get(t);e&&(i[t]=tc(f({shared:i.shared},l[t]),e))}return i}(t,e,this.config)}clean(){for(let t of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){let e;let i=this.config.shared,n={};if(!i.target||(e=i.target())){if(i.enabled){for(let i of this.gestures){let r=this.config[i],s=tm(n,r.eventOptions,!!e);r.enabled&&new(Q.get(i))(this,t,i).bind(s)}let r=tm(n,i.eventOptions,!!e);for(let e in this.nativeHandlers)r(e,"",i=>this.nativeHandlers[e](f(f({},this.state.shared),{},{event:i,args:t})),void 0,!0)}for(let t in n)n[t]=function(...t){return 0===t.length?P:1===t.length?t[0]:function(){let e;for(let i of t)e=i.apply(this,arguments)||e;return e}}(...n[t]);if(!e)return n;for(let t in n){let{device:i,capture:r,passive:s}=function(t){let e=t.substring(2).toLowerCase(),i=!!~e.indexOf("passive");i&&(e=e.replace("passive",""));let n=g.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(n);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:i}}(t);this._targetEventStore.add(e,i,"",n[t],{capture:r,passive:s})}}}}function tf(t,e){t.gestures.add(e),t.gestureEventStores[e]=new tu(t,e),t.gestureTimeoutStores[e]=new th}let tm=(t,e,i)=>(n,r,s,o={},a=!1)=>{var l,c;let u=null!==(l=o.capture)&&void 0!==l?l:e.capture,h=null!==(c=o.passive)&&void 0!==c?c:e.passive,d=a?n:function(t,e="",i=!1){let n=m[t],r=n&&n[e]||e;return"on"+p(t)+p(r)+(!function(t=!1,e){return t&&!v.includes(e)}(i,r)?"":"Capture")}(n,r,u);i&&h&&(d+="Passive"),t[d]=t[d]||[],t[d].push(s)},tp=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function tv(t,e,i,n,r,s){if(!t.has(i)||!Q.has(n))return;let o=i+"Start",a=i+"End";r[n]=t=>{let n;return t.first&&o in e&&e[o](t),i in e&&(n=e[i](t)),t.last&&a in e&&e[a](t),n},s[n]=s[n]||{}}function tg(t,e={},i,n){let s=r.useMemo(()=>new td(t),[]);if(s.applyHandlers(t,n),s.applyConfig(e,i),r.useEffect(s.effect.bind(s)),r.useEffect(()=>s.clean.bind(s),[]),void 0===e.target)return s.bind.bind(s)}i(1041);var ty=r.createContext(null);function tb(t,e=0){let i=Math.pow(10,e||0);return Math.round(t*i)/i}function t_(t,e,i=1){let n=[];for(let r=t;r<e-i/2;r+=i)n.push(r);let r=n[n.length-1]+i;return Math.abs(e-r)<i/1e-6?n.push(e):n.push(r),n}function tx(t,e,i){return Math.min(Math.max(t,e),i)}ty.displayName="CoordinateContext";var{round:tw,ceil:tM,floor:tk,log2:tS}=Math,tE=r.createContext({xPanes:[],yPanes:[],xPaneRange:[0,0],yPaneRange:[0,0]});function tP(){return r.useContext(tE)}function tT({children:t}){let{xMin:e,xMax:i,yMin:n,yMax:a}=function(){let t=r.useContext(ty);return s(t,"CoordinateContext is not loaded. Are you rendering a Mafs component outside of Mafs?"),t}(),l=2**tw(tS(i-e)-1),c=2**tw(tS(a-n)-1),u=1/8,h=l*tk(e/l-1/8),d=l*tM(i/l+u),f=c*tk(n/c-u),m=c*tM(a/c+u),p=r.useMemo(()=>t_(h,d-l,l).map(t=>[t,t+l]),[h,d,l]),v=r.useMemo(()=>t_(f,m-c,c).map(t=>[t,t+c]),[f,m,c]),g=r.useMemo(()=>({xPanes:p,yPanes:v,xPaneRange:[h,d],yPaneRange:[f,m]}),[p,v,h,d,f,m]);return(0,o.jsx)(tE.Provider,{value:g,children:t})}function tC(t=1,e=0,i=0,n=1,r=0,s=0){return[t,i,r,e,n,s]}tE.displayName="PaneContext",tT.displayName="PaneManager",(t=>{function e(t,e){return[t[0]+e[0],t[1]+e[1]]}function i(t,e){return[t[0]-e[0],t[1]-e[1]]}function n(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r(t,r,o){let a=i(r,t),l=n(a);return e(t,s(a,o*l))}function s(t,e){let i=n(t);return o(t,e/i)}function o(t,e){return[t[0]*e,t[1]*e]}function a(t,e){return tC(t[0]*e[0]+t[1]*e[3],t[3]*e[0]+t[4]*e[3],t[0]*e[1]+t[1]*e[4],t[3]*e[1]+t[4]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[2]+t[4]*e[5]+t[5])}function l(t,e){let i=Math.cos(e),n=Math.sin(e);return[t[0]*i-t[1]*n,t[0]*n+t[1]*i]}function c(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function u(t){return t[0]*t[4]-t[3]*t[1]}function h(t=null){let e=t||tC();return{mult:t=>h(a(t,e)),translate:(t,i)=>h(a(tC(1,0,0,1,t,i),e)),rotate:t=>{let i=Math.cos(t),n=Math.sin(t);return h(a(tC(i,n,-n,i),e))},scale:(t,i)=>h(a(tC(t,0,0,i),e)),shear:(t,i)=>h(a(tC(1,i,t,1),e)),get:()=>[...e]}}t.add=e,t.sub=i,t.mag=n,t.normal=function(t){return[-t[1],t[0]]},t.lerp=r,t.withMag=s,t.normalize=function(t){return s(t,1)},t.scale=o,t.transform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+e[2],t[0]*e[3]+t[1]*e[4]+e[5]]},t.matrixMult=a,t.rotate=l,t.rotateAbout=function(t,n,r){let s=i(t,n);return e(n,l(s,r))},t.midpoint=function(t,e){return r(t,e,.5)},t.dist=function(t,e){return Math.sqrt(c(t,e))},t.squareDist=c,t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},t.det=u,t.matrixInvert=function(t){let e=u(t);if(!e)return null;let i=1/e,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return tC(i*a,-(i*o),-(i*r),i*n,i*(l*r-s*a),i*(-l*n+s*o))},t.matrixBuilder=h,t.toCSS=function(t){let[e,i,n,r,s,o]=t;return`matrix(${e}, ${r}, ${i}, ${s}, ${n}, ${o})`},t.identity=h().get()})(n||(n={}));var tI=r.createContext(null);function tO(){let t=r.useContext(tI);return s(t,"TransformContext is not loaded. Are you rendering a Mafs component outside of a MafsView?"),t}tI.displayName="TransformContext";var tD=r.createContext({xSpan:0,ySpan:0});tD.displayName="SpanContext";var tj=r.createContext({overrideHeight:void 0});function tA({width:t="auto",height:e=500,pan:i=!0,zoom:n=!1,viewBox:s={x:[-3,3],y:[-3,3]},preserveAspectRatio:l="contain",children:c,ssr:u=!1,onClick:h}){var d,f,m,p,v,g,y,b,_,x,w,M,k,S,E,P,T;let C=r.useContext(tj).overrideHeight??e,I="auto"===t?"100%":`${t}px`,O=r.useRef(null),{width:D="auto"===t?u?500:0:t}=(f=(d={ref:"auto"===t?O:null}).onResize,(m=(0,r.useRef)(void 0)).current=f,p=d.round||Math.round,v=(0,r.useRef)(),y=(g=(0,r.useState)({width:void 0,height:void 0}))[0],b=g[1],_=(0,r.useRef)(!1),(0,r.useEffect)(function(){return _.current=!1,function(){_.current=!0}},[]),x=(0,r.useRef)({width:void 0,height:void 0}),w=(0,r.useCallback)(function(t){return v.current&&v.current.box===d.box&&v.current.round===p||(v.current={box:d.box,round:p,instance:new ResizeObserver(function(t){var e=t[0],i="border-box"===d.box?"borderBoxSize":"device-pixel-content-box"===d.box?"devicePixelContentBoxSize":"contentBoxSize",n=a(e,i,"inlineSize"),r=a(e,i,"blockSize"),s=n?p(n):void 0,o=r?p(r):void 0;if(x.current.width!==s||x.current.height!==o){var l={width:s,height:o};x.current.width=s,x.current.height=o,m.current?m.current(l):_.current||b(l)}})}),v.current.instance.observe(t,{box:d.box}),function(){v.current&&v.current.instance.unobserve(t)}},[d.box,p]),M=d.ref,k=(0,r.useRef)(null),(S=(0,r.useRef)(null)).current=M,E=(0,r.useRef)(null),(0,r.useEffect)(function(){P()}),P=(0,r.useCallback)(function(){var t=E.current,e=S.current,i=t||(e?e instanceof Element?e:e.current:null);k.current&&k.current.element===i&&k.current.subscriber===w||(k.current&&k.current.cleanup&&k.current.cleanup(),k.current={element:i,subscriber:w,cleanup:i?w(i):void 0})},[w]),(0,r.useEffect)(function(){return function(){k.current&&k.current.cleanup&&(k.current.cleanup(),k.current=null)}},[]),T=(0,r.useCallback)(function(t){E.current=t,P()},[P]),(0,r.useMemo)(function(){return{ref:T,width:y.width,height:y.height}},[T,y.width,y.height]));return(0,o.jsx)("div",{className:"MafsView",style:{width:I,height:C},tabIndex:i||n?0:-1,ref:O,children:D>0&&(0,o.jsx)(t$,{width:D,height:C,desiredCssWidth:I,rootRef:O,pan:i,zoom:n,viewBox:s,preserveAspectRatio:l,ssr:u,onClick:h,children:c})})}function t$({width:t,height:e,desiredCssWidth:i,rootRef:a,pan:l,zoom:c,viewBox:u,preserveAspectRatio:h,children:d,onClick:f}){var m,p;let v=1,g=1;"object"==typeof c?(s(c.min>0&&c.min<=1,"zoom.min must be in the range (0, 1]"),s(c.max>=1,"zoom.max must be in the range [1, âˆž)"),v=c.min,g=c.max):c&&(v=.5,g=5);let y=function({minZoom:t,maxZoom:e}){let[i,s]=r.useState(n.identity),o=r.useRef(n.identity);return{matrix:i,setBase(){o.current=i},move({zoom:i,pan:r}){let a=1/(i?.scale??1),l=i?.at??[0,0],c=o.current[0],u=tx(a,1/e/c,1/t/c);s(n.matrixBuilder(o.current).translate(...n.scale(l,-1)).scale(u,u).translate(...n.scale(l,1)).translate(...r??[0,0]).get())}}}({minZoom:v,maxZoom:g}),b=u?.padding??.5,_=(u?.x?.[0]??0)-b,x=(u?.x?.[1]??0)+b,w=(u?.y?.[0]??0)-b,M=(u?.y?.[1]??0)+b;if("contain"===h){let i=t/e;if((x-_)/(M-w)>i){let t=(M+w)/2,e=(x-_)/i/2;w=t-e,M=t+e}else{let t=(x+_)/2,e=(M-w)*i/2;_=t-e,x=t+e}}[_,w]=n.transform([_,w],y.matrix),[x,M]=n.transform([x,M],y.matrix);let k=x-_,S=M-w,E=r.useMemo(()=>{let i=tb(1/k*t,5),r=tb(-1/S*e,5);return n.matrixBuilder().scale(i,r).get()},[e,t,k,S]),P=tb(_/(x-_)*t,10),T=tb(M/(w-M)*e,10),C=n.matrixInvert(E),I=r.useRef([0,0]),O=r.useRef([0,0]);function D(t){let e=a.current;s(e,"SVG is not mounted"),s(C,"View transform is not invertible");let i=e.getBoundingClientRect();return n.transform([t[0]-i.left+P,t[1]-i.top+T],C)}let j=function(t){let[e,i]=r.useState(!1),n=r.useRef(0);return r.useEffect(()=>{if(t)return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e);function e(){i(!1),clearTimeout(n.current),n.current=setTimeout(()=>{i(!0)},500)}},[t]),{wheelEnabled:!!t&&e,handleMouseMove(){i(!0)}}}(!!c),A=r.useRef(!1);m={onDrag:({movement:i,first:r,event:s,type:o,pinching:a,memo:l=[0,0],last:c})=>{if(a)return i;r&&y.setBase();let[u,h]=n.sub(i,l);y.move({pan:[-u/t*k,h/e*S]});let d=o.includes("key");return d&&s?.preventDefault(),c&&(A.current=!0,setTimeout(()=>A.current=!1,10)),!d&&r?i:l},onPinch:({first:t,movement:[e],origin:i,event:r,last:s})=>{if(!r.currentTarget||!C)return;t&&(y.setBase(),I.current=i,O.current=l?D(i):[(_+x)/2,(w+M)/2]);let o=[0,0];l&&(o=n.transform(n.sub(i,I.current),C)),y.move({zoom:{at:O.current,scale:e},pan:n.scale(o,-1)}),s&&y.setBase()},onWheel:({pinching:t,event:e,delta:[,i]})=>{if(t)return;let n=2/(1+Math.exp(-i/300)),r=D([e.clientX,e.clientY]);y.setBase(),y.move({zoom:{at:r,scale:1/n}})},onKeyDown:({event:t})=>{if(t.metaKey)return;let e={Equal:1,Minus:-1}[t.code]??0;if(!e)return;let i=.1;(t.altKey||t.metaKey)&&(i=.01),t.shiftKey&&(i=.3);let n=1+e*i,r=[(x+_)/2,(M+w)/2];y.setBase(),y.move({zoom:{at:r,scale:n}})},onMouseMove:()=>{j.handleMouseMove()},onClick:({event:i})=>{if(!f||!a.current||A.current)return;let n=a.current.getBoundingClientRect(),r=i.clientX-n.left,s=n.bottom-i.clientY;f([r/t*k+_,s/e*S+w],i)}},p={drag:{enabled:l,eventOptions:{passive:!1},threshold:1},pinch:{enabled:!!c,eventOptions:{passive:!1}},wheel:{enabled:j.wheelEnabled,preventDefault:!0,eventOptions:{passive:!1}},target:a},([te,tr,ts,to,tn,ti].forEach(tt),function(t,e){let{handlers:i,nativeHandlers:n,config:r}=function(t,e){let[i,n,r]=function(t){let e={},i={},n=new Set;for(let r in t)tp.test(r)?(n.add(RegExp.lastMatch),i[r]=t[r]):e[r]=t[r];return[i,e,n]}(t),s={};return tv(r,i,"onDrag","drag",s,e),tv(r,i,"onWheel","wheel",s,e),tv(r,i,"onScroll","scroll",s,e),tv(r,i,"onPinch","pinch",s,e),tv(r,i,"onMove","move",s,e),tv(r,i,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:n}}(t,e||{});return tg(i,r,void 0,n)})(m,p||{});let $=n.toCSS(E),L=r.useMemo(()=>({xMin:_,xMax:x,yMin:w,yMax:M,height:e,width:t}),[_,x,w,M,e,t]);return(0,o.jsx)(ty.Provider,{value:L,children:(0,o.jsx)(tD.Provider,{value:{xSpan:k,ySpan:S},children:(0,o.jsx)(tI.Provider,{value:{userTransform:n.identity,viewTransform:E},children:(0,o.jsx)(tT,{children:(0,o.jsx)("svg",{width:t,height:e,viewBox:`${P} ${T} ${t} ${e}`,preserveAspectRatio:"xMidYMin",style:{width:i,touchAction:l?"none":"auto","--mafs-view-transform":$,"--mafs-user-transform":"translate(0, 0)"},children:d})})})})})}tj.Provider,tA.displayName="Mafs";function tL(t,e,i){let n=Math.floor(t/i)*i,r=Math.ceil(e/i)*i;return n===r-i?[n]:t_(n,r-i,i)}function tB({domain:t,minDepth:e,maxDepth:i,threshold:n,fn:r,error:s,onPoint:o,lerp:a}){let[l,c]=t;o(l,r(l)),function t(l,c,u,h,d){let f=function(t,e){let i=43758.5453*Math.sin(12.9898*t+78.233*e);return .4+.2*(i-Math.floor(i))}(l,c),m=l+(c-l)*f,p=r(m);function v(){t(l,m,u+1,h,p),o(m,p),t(m,c,u+1,p,d)}u<e?v():u<i&&s(p,a(h,d,f))>n&&v()}(l,c,0,r(l),r(c)),o(c,r(c))}function tR({xy:t,t:e,color:i,style:s="solid",weight:a=2,opacity:l=1,maxSamplingDepth:c=14,minSamplingDepth:u=8,svgPathProps:h={}}){let{viewTransform:d}=tO(),f=-n.det(d),[m,p]=e,v=.1/f,g=r.useMemo(()=>{let e;return e="M ",tB({fn:t,error:(t,e)=>n.squareDist(t,e),onPoint:(t,[i,n])=>{Number.isFinite(i)&&Number.isFinite(n)&&(e+=`${i} ${n} L `)},lerp:(t,e,i)=>n.lerp(t,e,i),domain:[m,p],minDepth:u,maxDepth:c,threshold:v}),e.substring(0,e.length-2)},[t,u,c,v,m,p]);return(0,o.jsx)("path",{d:g,strokeWidth:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...h,style:{stroke:i||"var(--mafs-fg)",strokeOpacity:l,strokeDasharray:"dashed"===s?"var(--mafs-line-stroke-dash-style)":void 0,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)",...h.style||{}}})}function tK({y:t,...e}){let{xPaneRange:[i,n]}=tP(),s=r.useCallback(e=>[e,t(e)],[t]),a=r.useMemo(()=>[i,n],[i,n]);return(0,o.jsx)(tR,{xy:s,t:a,...e})}function tz({x:t,...e}){let{yPaneRange:[i,n]}=tP(),s=r.useCallback(e=>[t(e),e],[t]),a=r.useMemo(()=>[i,n],[i,n]);return(0,o.jsx)(tR,{xy:s,t:a,...e})}t_(0,2*Math.PI,Math.PI/12),tR.displayName="Plot.Parametric",tK.displayName="Plot.OfX",tz.displayName="Plot.OfY";var tN={foreground:"var(--mafs-fg)",pink:"var(--mafs-pink)"},tV=()=>1;function tY({xy:t,step:e=1,xyOpacity:i=tV,opacityStep:r=i===tV?1:.2,color:s=tN.foreground}){let{viewTransform:a}=tO(),{xPanes:l,yPanes:c}=tP(),u=function(t){let e=[],i=1/t;for(let t=1;t>0;t-=i){let i={d:"",opacity:t};e.push(i)}return e}(Math.ceil(1/(r=Math.min(1,Math.max(.01,r)))));for(let[r,s]of l)for(let[o,l]of c)!function(r,s,o,l){for(let c=Math.floor(r);c<=Math.ceil(s);c+=e)for(let r=Math.floor(o);r<=Math.ceil(l);r+=e){let s=[c,r],o=t([c,r]),l=n.mag(o),h=n.scale(n.normalize(o),Math.min(l,.75*e)),d=n.add(s,h),f=n.transform(s,a),m=n.transform(h,a),p=n.mag(m),v=n.transform(d,a),g=n.scale(n.normalize(m),Math.min(p,5)),y=n.add(v,n.rotate(g,5/6*Math.PI)),b=n.add(v,n.rotate(g,-5/6*Math.PI)),_=function(t,e){e=tx(e,0,1);let i=t.length-1-Math.round(e*(t.length-1));return t[i]}(u,i([c,r]));_.d+=` M ${f[0]} ${f[1]} L ${v[0]} ${v[1]}  L ${y[0]} ${y[1]}  L ${b[0]} ${b[1]}  L ${v[0]} ${v[1]} `}}(r,s,o,l);return(0,o.jsx)(o.Fragment,{children:u.map((t,e)=>(0,o.jsx)("path",{d:t.d,style:{stroke:s,fill:s,opacity:t.opacity,fillOpacity:t.opacity,strokeOpacity:t.opacity},strokeLinecap:"round",strokeLinejoin:"round"},e))})}function tq({x:t,y:e,color:i=tN.foreground,weight:r=2,strokeColor:a=i,strokeOpacity:l=1,fillColor:c=i,fillOpacity:u=.15,minSamplingDepth:h=10,maxSamplingDepth:d=14,upperColor:f=a,upperOpacity:m=l,upperWeight:p=r,lowerColor:v=a,lowerOpacity:g=l,lowerWeight:y=r,svgUpperPathProps:b={},svgLowerPathProps:_={},svgFillPathProps:x={}}){let{xPaneRange:[w,M],yPaneRange:[k,S]}=tP(),E=e?[k,S]:[w,M],P=e||t;s(P&&void 0===t!=(void 0===e),"You must pass either an x or y set of functions to Inequality (but not both)"),s((void 0===P["<"]||void 0===P["<="])&&(void 0===P[">"]||void 0===P[">="]),"You cannot pass both an inequality and an equality operator to Inequality");let T=0;"<="in P&&(T=1),"<"in P&&(T=2);let C=0;">="in P&&(C=1),">"in P&&(C=2);let I=P["<"]??P["<="]??(()=>E[1]),O=P[">"]??P[">="]??(()=>E[0]);if("number"==typeof I){let t=I;I=()=>t}if("number"==typeof O){let t=O;O=()=>t}let D=function(t,e,i,r,s,o,a){let l={fill:"",upper:"",lower:""},c="",u="",h=!1,d=0,f=0,m=0;function p(e,i){return"x"===t?`${e} ${i}`:`${i} ${e}`}return tB({domain:r,minDepth:s,maxDepth:o,threshold:.1,fn:t=>[[t,i(t)],[t,e(t)]],error:([t,e],[i,r])=>Math.max(n.squareDist(t,i),n.squareDist(e,r)),lerp:([t,e],[i,r],s)=>[n.lerp(t,i,s),n.lerp(e,r,s)],onPoint:(t,[[,e],[,i]])=>{let n=i<e&&!h,r=i>e&&h;if(n){if(h=!0,c&&u){let n=(d+t)/2,r=((f+i)/2+(m+e)/2)/2;c+=` ${p(n,r)} L `,u=` ${p(n,r)} L `+u,l.fill+=` M ${c} ${u.substring(0,u.length-2)} z `,l.upper+=` M ${c.substring(0,c.length-2)} `,l.lower+=` M ${u.substring(0,u.length-2)} `,c="",u=""}}else if(r){h=!1;let n=(d+t)/2,r=((f+i)/2+(m+e)/2)/2;c+=` ${p(n,r)} L `,u=` ${p(n,r)} L `+u}!h&&(Number.isFinite(i)&&(c+=` ${p(t,i)} L `),Number.isFinite(e)&&(u=` ${p(t,e)} L `+u)),d=t,f=i,m=e}}),c&&u&&(l.fill+=` M ${c} ${u.substring(0,u.length-2)} z `,l.lower+=` M ${u.substring(0,u.length-2)} `,l.upper+=` M ${c.substring(0,c.length-2)} `),l}(e?"x":"y",I,O,e?[w,M]:[k,S],h,d,0);return(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:D.fill,style:{fill:c||"var(--mafs-fg)",fillOpacity:u,stroke:"none",transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",...x?.style},...x}),0!=T&&(0,o.jsx)("path",{d:D.upper,strokeWidth:p,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:2===T?"4,8":"",style:{fill:"none",stroke:f,strokeOpacity:m,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",...b?.style},...b}),0!=C&&(0,o.jsx)("path",{d:D.lower,strokeWidth:y,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:2===C?"4,8":"",style:{fill:"none",stroke:v,strokeOpacity:g,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",..._?.style},..._})]})}tY.displayName="Plot.VectorField",tq.displayName="Plot.Inequality";var tH={OfX:tK,OfY:tz,Parametric:tR,VectorField:tY,Inequality:tq};function tX({point1:t,point2:e,color:i=tN.foreground,style:r="solid",weight:s=2,opacity:a=1}){let l,c;let{xPaneRange:u,yPaneRange:h}=tP(),[d,f]=u,[m,p]=h,{userTransform:v}=tO(),g=n.transform(t,v),y=n.transform(e,v),b=(y[1]-g[1])/(y[0]-g[0]);return Math.abs(Math.atan(b))>Math.PI/4?(l=[(m-g[1])/b+g[0],m],c=[(p-g[1])/b+g[0],p]):(l=[d,b*(d-g[0])+g[1]],c=[f,b*(f-g[0])+g[1]]),(0,o.jsx)("line",{x1:tb(l[0],2),y1:tb(l[1],2),x2:tb(c[0],2),y2:tb(c[1],2),style:{stroke:i,strokeDasharray:"dashed"===r?"var(--mafs-line-stroke-dash-style)":void 0,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"},strokeWidth:s,opacity:a})}function tW({center:t,radius:e,angle:i=0,strokeStyle:r="solid",strokeOpacity:s=1,weight:a=2,color:l=tN.foreground,fillOpacity:c=.15,svgEllipseProps:u={}}){let{viewTransform:h,userTransform:d}=tO(),f=n.matrixBuilder().translate(...t).mult(d).scale(1,-1).mult(h).scale(1,-1).get(),m=`
    ${n.toCSS(f)}
    rotate(${180/Math.PI*i})
  `;return(0,o.jsx)("ellipse",{cx:0,cy:0,rx:e[0],ry:e[1],strokeWidth:a,transform:m,...u,style:{stroke:l,strokeDasharray:"dashed"===r?"var(--mafs-line-stroke-dash-style)":void 0,fill:l,fillOpacity:c,strokeOpacity:s,vectorEffect:"non-scaling-stroke",...u.style||{}}})}function tU({element:t,points:e,color:i=tN.foreground,weight:r=2,fillOpacity:s=.15,strokeOpacity:a=1,strokeStyle:l="solid",svgPolyProps:c={}}){let{userTransform:u}=tO(),h=e.map(t=>n.transform(t,u).join(" ")).join(" ");return(0,o.jsx)(t,{points:h,strokeWidth:r,fillOpacity:s,strokeLinejoin:"round",...c,style:{fill:i,fillOpacity:s,stroke:i,strokeDasharray:"dashed"===l?"var(--mafs-line-stroke-dash-style)":void 0,strokeOpacity:a,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)",...c.style||{}}})}tX.displayName="Line.ThroughPoints",tW.displayName="Ellipse";var tF=r.forwardRef((t,e)=>{let{color:i=tN.pink,ringRadiusPx:s=15,dragging:a,point:l}=t,{viewTransform:c,userTransform:u}=tO(),h=r.useMemo(()=>n.matrixMult(c,u),[c,u]),[d,f]=n.transform(l,h);return(0,o.jsxs)("g",{ref:e,style:{"--movable-point-color":i,"--movable-point-ring-size":`${s}px`},className:`mafs-movable-point ${a?"mafs-movable-point-dragging":""}`,tabIndex:0,children:[(0,o.jsx)("circle",{className:"mafs-movable-point-hitbox",r:30,cx:d,cy:f}),(0,o.jsx)("circle",{className:"mafs-movable-point-focus",r:s+1,cx:d,cy:f}),(0,o.jsx)("circle",{className:"mafs-movable-point-ring",r:s,cx:d,cy:f}),(0,o.jsx)("circle",{className:"mafs-movable-point-point",r:6,cx:d,cy:f})]})});function tG({point:t,onMove:e,constrain:i=t=>t,color:a=tN.pink}){let l=r.useRef(null),{dragging:c}=function(t){var e,i;let{gestureTarget:o,onMove:a,point:l,constrain:c}=t,[u,h]=r.useState(!1),{xSpan:d,ySpan:f}=function(){let t=r.useContext(tD);return s(t,"SpanContext is not defined"),t}(),{viewTransform:m,userTransform:p}=tO(),v=n.matrixInvert(m);s(v,"The view transform must be invertible.");let g=r.useMemo(()=>(function(t){let e=n.matrixInvert(t);return s(null!==e,"Could not invert transform matrix. A parent transformation matrix might be degenerative (mapping 2D space to a line)."),e})(p),[p]),y=r.useRef([0,0]);return e=t=>{let{type:e,event:i}=t;if(i?.stopPropagation(),e.includes("key")){i?.preventDefault();let{direction:e,altKey:r,metaKey:s,shiftKey:o}=t,u=[e[0],-e[1]],h=Math.abs(u[0])?d:f,m=50;(r||s)&&(m=200),o&&(m=10);let v=h/(2*m);for(let t of t_(h/m,h/2,h/m)){let e=n.scale(u,t),i=c(n.transform(n.add(n.transform(l,p),e),g));if(n.dist(i,l)>v){a(i);break}}}else{let{last:e,movement:i,first:r}=t;if(h(!e),r&&(y.current=n.transform(l,p)),0===n.mag(i))return;let s=n.transform(i,v);a(c(n.transform(n.add(y.current,s),g)))}},i={target:o,eventOptions:{passive:!1}},tt(te),tg({drag:e},i||{},"drag"),{dragging:u}}({gestureTarget:l,onMove:e,point:t,constrain:i});return(0,o.jsx)(tF,{ref:l,point:t,color:a,dragging:c})}tF.displayName="MovablePointDisplay",tG.displayName="MovablePoint"}}]);