"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5189],{5548:(e,t,l)=>{l.d(t,{hl:()=>s}),l(41990);var n=l(9421);let s=()=>(0,n.I)([],()=>null)},65008:(e,t,l)=>{l.d(t,{ME:()=>r,Xu:()=>a,Z$:()=>o,nX:()=>s,nz:()=>i});var n=l(35593),s=function(e){return e.Hot="hot",e.MostPosts="most_posts",e.MostRelevant="most_relevant",e.MostVotes="most_votes",e.NewestToOldest="newest_to_oldest",e.OldestToNewest="oldest_to_newest",e.RecentActivity="recent_activity",e}({});let a=e=>{switch(e){case"hot":default:return n.r2k.Hot;case"newest_to_oldest":return n.r2k.MostRecent;case"most_votes":return n.r2k.MostVotes;case"most_relevant":return n.r2k.MostRelevant}};var i=function(e){return e.All="All",e.Deleted="Deleted",e.Hidden="Hidden",e.NeedUpdate="NeedUpdate",e.Open="Open",e.Pending="Pending",e.Reviewed="Reviewed",e.Muted="Muted",e.Draft="Draft",e.Offline="Offline",e}({}),o=function(e){return e[e.Upvote=1]="Upvote",e[e.None=0]="None",e[e.Downvote=-1]="Downvote",e}({}),r=function(e){return e.Body="BODY",e.Comment="COMMENT",e.Reply="REPLY",e.Title="TITLE",e}({})},52020:(e,t,l)=>{l.d(t,{d:()=>s});var n=l(1932);let s=(e,t,l)=>[s=>{if(!l)return;let a=(0,n.jM)(l,s);e.setQueryData(t,a)},()=>{e.setQueryData(t,l)}]},19069:(e,t,l)=>{l.d(t,{u:()=>r});var n=l(35593),s=l(25573),a=l(36766),i=l(52020),o=l(72471);let r=e=>{let t=(0,s.t)(),l=a.N.getState().questionSlug,r=(0,o.me)({...t,questionSlug:l}),d=n.BJy.getKey(r),u=e.getQueryData(d);return(0,i.d)(e,d,u)}},16405:(e,t,l)=>{l.d(t,{dC:()=>o,s6:()=>d});var n=l(1932),s=l(35593),a=l(64011),i=l(52020);let o=e=>{let t;if("ugcArticleSolutionArticle"in e){if(!(null==e?void 0:e.ugcArticleSolutionArticle))return;t=e.ugcArticleSolutionArticle}else{if(!("ugcArticleOfficialSolutionArticle"in e)||!(null==e?void 0:e.ugcArticleOfficialSolutionArticle))return;t=e.ugcArticleOfficialSolutionArticle}return t},r=(e,t,l,s,a)=>[i=>{if(l){let s=(0,n.jM)(l,i);e.setQueryData(t,s)}if(a&&s){let t=(0,n.jM)(a,i);e.setQueryData(s,t)}},()=>{e.setQueryData(t,l),s&&e.setQueryData(s,a)}],d=(e,t)=>{let l=a.j_.getState().editorialTopicId,n=a.j_.getState().questionSlug,o=s.akO.getKey({topicId:String(t)}),d=e.getQueryData(o);if(l===t){let t=s.bhc.getKey({questionSlug:n}),l=e.getQueryData(t);return r(e,o,d,t,l)}return(0,i.d)(e,o,d)}},76547:(e,t,l)=>{l.d(t,{o:()=>n});var n=function(e){return e.Normal="NORMAL",e.Official="OFFICIAL",e}({})},72471:(e,t,l)=>{l.d(t,{$G:()=>o,me:()=>i}),l(41990);var n=l(98569),s=l(35593),a=l(65008);let i=e=>{var t;return{...(0,n.A)(e,["orderBy","page","perPage","mySolution","languageTags","topicTags","query"]),skip:(e.page-1)*e.perPage,first:e.perPage,orderBy:(0,a.Xu)(e.orderBy??a.nX.Hot),userInput:e.query,tagSlugs:null===(t=e.topicTags)||void 0===t?void 0:t.concat(e.languageTags??[]).concat(e.topicTags??[])}},o=(e,t)=>{let l=i(e);return t.invalidateQueries([s.BJy.getKey(l)[0]])}},18567:(e,t,l)=>{l.d(t,{E:()=>i});var n=l(86474),s=l(35593),a=l(65008);function i(e){switch(e){case n.j8g.Deleted:return a.nz.Deleted;case n.j8g.Draft:return a.nz.Draft;case n.j8g.Pending:return a.nz.Pending;case n.j8g.Muted:return a.nz.Hidden;case n.j8g.Published:return a.nz.Open;case n.j8g.Prepublish:return a.nz.NeedUpdate;case n.j8g.Removed:return a.nz.Deleted;case n.j8g.UpdateRequested:return a.nz.All;case n.j8g.Checking:return a.nz.Pending;case n.j8g.Offline:return a.nz.Offline;case s.Shy.Hidden:return a.nz.Hidden;case s.Shy.Deleted:return a.nz.Deleted;case s.Shy.Open:default:return a.nz.Open}}},69874:(e,t,l)=>{l.d(t,{r:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.929 7.913l7.078 7.057 7.064-7.057a1 1 0 111.414 1.414l-7.77 7.764a1 1 0 01-1.415 0L3.515 9.328a1 1 0 011.414-1.414z",clipRule:"evenodd"})})}},49188:(e,t,l)=>{l.d(t,{g:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.293 9.293a1 1 0 111.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L12 13.586l4.293-4.293z",clipRule:"evenodd"})})}},55587:(e,t,l)=>{l.d(t,{p:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.293 14.707a1 1 0 001.414-1.414l-5-5a1 1 0 00-1.414 0l-5 5a1 1 0 101.414 1.414L12 10.414l4.293 4.293z",clipRule:"evenodd"})})}},44249:(e,t,l)=>{l.d(t,{f:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M11 20a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zM17.018 5c-.26 0-.51.104-.695.288L4.837 16.773l-.463 1.853 1.853-.463L17.712 6.677A.981.981 0 0017.018 5zm-2.11-1.126a2.983 2.983 0 014.219 4.217L7.444 19.773a1 1 0 01-.464.263l-3.738.934a1 1 0 01-1.213-1.212l.934-3.739a1 1 0 01.263-.464L14.91 3.874z",clipRule:"evenodd"})})}},75141:(e,t,l)=>{l.d(t,{F:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{d:"M12.44 7.586a.6.6 0 10-1.2 0h1.2zm-6.734 5.035l.117-.588-.117.588zm-2.628-1.405l.424-.424-.424.424zM1.673 8.588l.588-.117-.588.117zm.292-2.966l.554.23-.554-.23zm1.89-2.304l-.333-.499.334.5zm2.853-.265a.6.6 0 000-1.2v1.2zm.25 3.434a.6.6 0 00.848.849l-.849-.849zm5.154-3.457a.6.6 0 10-.849-.849l.849.849zm-2.82-1.197a.6.6 0 000 1.2v-1.2zm2.546.6h.6a.6.6 0 00-.6-.6v.6zm-.6 2.566a.6.6 0 001.2 0h-1.2zm.003 2.587c0 .897-.266 1.774-.764 2.52l.998.666c.63-.943.966-2.052.966-3.186h-1.2zm-.764 2.52a4.533 4.533 0 01-2.035 1.669l.46 1.108a5.733 5.733 0 002.573-2.111l-.998-.667zm-2.035 1.669a4.534 4.534 0 01-2.619.258L5.59 13.21a5.733 5.733 0 003.313-.327l-.46-1.108zm-2.619.258a4.533 4.533 0 01-2.321-1.241l-.849.849A5.733 5.733 0 005.59 13.21l.234-1.177zm-2.321-1.241a4.533 4.533 0 01-1.24-2.321l-1.178.234a5.734 5.734 0 001.57 2.936l.848-.849zm-1.24-2.321a4.533 4.533 0 01.257-2.62l-1.108-.459a5.733 5.733 0 00-.327 3.313l1.177-.234zm.257-2.62a4.533 4.533 0 011.67-2.034l-.667-.998a5.733 5.733 0 00-2.111 2.573l1.108.46zm1.67-2.034a4.533 4.533 0 012.519-.764v-1.2a5.733 5.733 0 00-3.186.966l.667.998zm3.617 3.519l4.306-4.306-.849-.849-4.306 4.306.849.849zm1.487-4.303h2.545v-1.2H9.293v1.2zm1.945-.6v2.566h1.2V2.433h-1.2z"})})}},84756:(e,t,l)=>{l.d(t,{m:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M20 5h-4V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v1H4a1 1 0 000 2h1v12a3 3 0 003 3h8a3 3 0 003-3V7h1a1 1 0 100-2zm-6-1v1h-4V4h4zm-5 6a1 1 0 012 0v7a1 1 0 11-2 0v-7zm4 0a1 1 0 112 0v7a1 1 0 11-2 0v-7zM7 7h10v12a1 1 0 01-1 1H8a1 1 0 01-1-1V7z",clipRule:"evenodd"})})}},57411:(e,t,l)=>{l.d(t,{o:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zM10.944 9.835a1.25 1.25 0 012.429.417c0 .253-.226.555-.68.857a4.039 4.039 0 01-.886.446 1 1 0 10.632 1.897c.358-.12.855-.34 1.364-.679.952-.635 1.57-1.458 1.57-2.52a3.25 3.25 0 00-6.316-1.081 1 1 0 001.887.663zM11.186 16v.135a1 1 0 102 0V16a1 1 0 10-2 0z",clipRule:"evenodd"})})}},45874:(e,t,l)=>{l.d(t,{A:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M13 7a1 1 0 011-1h2a6 6 0 010 12h-2a1 1 0 110-2h2a4 4 0 000-8h-2a1 1 0 01-1-1zm-3 10a1 1 0 01-1 1H8A6 6 0 018 6h1a1 1 0 010 2H8a4 4 0 100 8h1a1 1 0 011 1zm-1-6h6a1 1 0 110 2H9a1 1 0 110-2z",clipRule:"evenodd"})})}},11690:(e,t,l)=>{l.d(t,{_:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M19 11.063V7h-2v1a1 1 0 11-2 0V7H9v1a1 1 0 01-2 0V7H5v4.063h14zm0 2H5V19h14v-5.938zM9 5h6V4a1 1 0 112 0v1h2a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2V4a1 1 0 012 0v1z",clipRule:"evenodd"})})}},72842:(e,t,l)=>{l.d(t,{g:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M14.707 2.707a1 1 0 00-1.414-1.414l-2 2a1 1 0 00-.15 1.221l1.5 2.5a1 1 0 001.714-1.029l-.454-.757a8 8 0 11-6.347 1.119 1 1 0 00-1.112-1.662A9.991 9.991 0 002 13c0 5.523 4.477 10 10 10s10-4.477 10-10c0-4.775-3.347-8.769-7.823-9.762l.53-.53zM13 10a1 1 0 10-2 0v4a1 1 0 00.445.832l3 2a1 1 0 001.11-1.664L13 13.465V10z",clipRule:"evenodd"})})}},53743:(e,t,l)=>{l.d(t,{G:()=>s});var n=l(74848);l(96540);let s=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M13.27 5.02c.456.1.764.562.727 1.06l-.015.116-2.181 12c-.099.541-.578.893-1.07.784-.457-.1-.765-.562-.728-1.06l.015-.116 2.181-12c.099-.541.578-.893 1.07-.784zm4.65.37l.07.096 3.857 6c.178.277.2.614.067.906l-.067.123-3.857 6c-.304.473-.962.627-1.47.342-.47-.264-.646-.812-.425-1.268l.058-.104L19.678 12l-3.525-5.485c-.283-.44-.161-1.001.264-1.307l.103-.065a1.123 1.123 0 011.4.246zm-11.84 0c.3-.365.83-.49 1.28-.305l.12.058.103.065a.96.96 0 01.326 1.194l-.062.113L4.322 12l3.525 5.485.058.104c.221.456.046 1.005-.425 1.268a1.123 1.123 0 01-1.4-.246l-.07-.097-3.857-6-.067-.122a.939.939 0 010-.784l.067-.123 3.857-6 .07-.096z",clipRule:"evenodd"})})}},9316:(e,t,l)=>{l.d(t,{NF:()=>s,nX:()=>n,nz:()=>a,oZ:()=>i});var n=function(e){return e.Default="default",e.MostVotes="most_votes",e.Newest="newest",e}({}),s=function(e){return e.ThumbsDown="THUMBS_DOWN",e.Upvote="UPVOTE",e}({}),a=function(e){return e.All="All",e.Deleted="Deleted",e.Hidden="Hidden",e.NeedUpdate="NeedUpdate",e.Open="Open",e.Pending="Pending",e.Reviewed="Reviewed",e.Muted="Muted",e.Draft="Draft",e.Offline="Offline",e}({}),i=function(e){return e.Normal="NORMAL",e.Official="OFFICIAL",e}({})},20473:(e,t,l)=>{l.d(t,{N:()=>u,U:()=>c});var n=l(18567),s=l(9640),a=l(35593),i=l(11320),o=l(49203),r=l(9316),d=l(72035);let u=e=>{let{id:t}=e;return(0,a.d9g)(s.nS,{topicId:t},{select:e=>{var t,l,s,d,u,c,m,v,p,x,f,h,g,y;let{ugcArticleDiscussionArticle:C}=e;return C?{id:String(C.topicId),slug:C.slug,uuid:C.uuid,topicId:C.topicId,thumbnail:C.thumbnail,summary:C.isSerialized?(0,i.oS)(C.summary??""):C.summary??"",content:C.isSlate?void 0:C.isSerialized?(0,i.oS)(C.content??""):C.content??"",slateValue:C.isSlate&&C.content?C.content:void 0,isSerialized:C.isSerialized,title:C.title,isFavorite:!1,isOfficial:C.isLeetcode,isRecommended:!1,ipRegion:"",reactionType:C.myReactionType,voteStatus:(null==C?void 0:C.myReactionType)===r.NF.Upvote?1:(null==C?void 0:C.myReactionType)===r.NF.ThumbsDown?-1:0,voteCount:(null==C?void 0:null===(l=C.reactions)||void 0===l?void 0:null===(t=l.find(e=>(null==e?void 0:e.reactionType)===r.NF.Upvote))||void 0===t?void 0:t.count)??0,viewCount:(null==C?void 0:C.hitCount)??0,commentCount:(null==C?void 0:null===(s=C.topic)||void 0===s?void 0:s.topLevelCommentCount)??0,creationDate:(null==C?void 0:C.createdAt)?+new Date(null==C?void 0:C.createdAt):+new Date,updatedDate:(null==C?void 0:C.updatedAt)?+new Date(C.updatedAt):void 0,canSeeDetail:null==C?void 0:C.canSee,canEdit:null==C?void 0:C.canEdit,tags:C.tags.map(e=>({name:e.name,slug:e.slug})),isHidden:(null==C?void 0:C.status)===a.Shy.Hidden,isDeleted:(null==C?void 0:C.status)===a.Shy.Deleted,isBlockedComment:!1,status:(0,n.E)((null==C?void 0:C.status)||a.Shy.Open),scoreCoefficient:(null==C?void 0:null===(d=C.scoreInfo)||void 0===d?void 0:d.scoreCoefficient)??1,author:{userSlug:(null==C?void 0:null===(u=C.author)||void 0===u?void 0:u.userSlug)??"",userAvatar:C.isAnonymous?o.A:(null==C?void 0:null===(c=C.author)||void 0===c?void 0:c.userAvatar)??"",username:(null==C?void 0:null===(m=C.author)||void 0===m?void 0:m.userSlug)??"",realName:(null==C?void 0:null===(v=C.author)||void 0===v?void 0:v.realName)??"",nameColor:(null==C?void 0:null===(p=C.author)||void 0===p?void 0:p.nameColor)??"",activeBadgeIcon:(null==C?void 0:null===(f=C.author)||void 0===f?void 0:null===(x=f.activeBadge)||void 0===x?void 0:x.icon)??"",activeBadgeName:(null==C?void 0:null===(g=C.author)||void 0===g?void 0:null===(h=g.activeBadge)||void 0===h?void 0:h.displayName)??"",isAdmin:!!C.isAuthorArticleReviewer,reputation:0,isActive:!0,isOfficialCertification:(null==C?void 0:null===(y=C.author)||void 0===y?void 0:y.certificationLevel)===r.oZ.Official,isAnonymous:C.isAnonymous},isOwnPost:C.isOwner}:null},enabled:!!t})},c=e=>{let{queryClient:t,topicId:l}=e,n=a.d9g.getKey({topicId:l}),s=t.getQueryData(n);return(0,d.d)(t,n,s)}},73274:(e,t,l)=>{l.d(t,{jI:()=>x,mM:()=>p});var n=l(72166),s=l(35593),a=l(9640),i=l(18567),o=l(11320),r=l(49203),d=l(72035),u=l(9316);let c=e=>"for-you"!==e,m=e=>{var t;return{orderBy:function(e,t){switch(e){case u.nX.MostVotes:return s.r2k.MostVotes;case u.nX.Newest:return s.r2k.MostRecent;case u.nX.Default:return t?s.r2k.MostRelevant:s.r2k.Hot;default:return s.r2k.Hot}}(e.orderBy,e.searchQuery),keywords:[e.searchQuery],tagSlugs:[...(null===(t=e.topicSlugs)||void 0===t?void 0:t.filter(c))??[],...(null==e?void 0:e.filterTags)??[]],skip:0,first:50}},v=(e,t)=>{let{edges:l,pageInfo:n}=e;if(!(null==l?void 0:l.length))return{skip:t,hasNextPage:null==n?void 0:n.hasNextPage,items:[]};let a=l.map(e=>{var t,l,n,a,d,u,c,m,v,p,x,f,h,g;let y=null==e?void 0:e.node;return y?{id:String(y.topicId),slug:y.slug,uuid:y.uuid,topicId:y.topicId,thumbnail:y.thumbnail,summary:y.isSerialized?(0,o.oS)(y.summary??""):y.summary??"",content:"",isSerialized:y.isSerialized,title:y.title,isFavorite:!1,isOfficial:y.isLeetcode,isRecommended:!1,ipRegion:"",reactionType:y.myReactionType,voteStatus:(null==y?void 0:y.myReactionType)===s.NFG.Upvote?1:(null==y?void 0:y.myReactionType)===s.NFG.ThumbsDown?-1:0,voteCount:(null==y?void 0:null===(l=y.reactions)||void 0===l?void 0:null===(t=l.find(e=>(null==e?void 0:e.reactionType)===s.NFG.Upvote))||void 0===t?void 0:t.count)??0,viewCount:(null==y?void 0:y.hitCount)??0,commentCount:(null==y?void 0:null===(n=y.topic)||void 0===n?void 0:n.topLevelCommentCount)??0,creationDate:(null==y?void 0:y.createdAt)?+new Date(null==y?void 0:y.createdAt):+new Date,updatedDate:(null==y?void 0:y.updatedAt)?+new Date(y.updatedAt):void 0,canSeeDetail:null==y?void 0:y.canSee,canEdit:null==y?void 0:y.canEdit,tags:y.tags.map(e=>({name:e.name,slug:e.slug})),isHidden:(null==y?void 0:y.status)===s.Shy.Hidden,isDeleted:(null==y?void 0:y.status)===s.Shy.Deleted,isBlockedComment:!1,status:(0,i.E)((null==y?void 0:y.status)||s.Shy.Open),scoreCoefficient:(null==y?void 0:null===(a=y.scoreInfo)||void 0===a?void 0:a.scoreCoefficient)??1,author:{userSlug:(null==y?void 0:null===(d=y.author)||void 0===d?void 0:d.userSlug)??"",userAvatar:y.isAnonymous?r.A:(null==y?void 0:null===(u=y.author)||void 0===u?void 0:u.userAvatar)??"",username:(null==y?void 0:null===(c=y.author)||void 0===c?void 0:c.userSlug)??"",realName:(null==y?void 0:null===(m=y.author)||void 0===m?void 0:m.realName)??"",nameColor:(null==y?void 0:null===(v=y.author)||void 0===v?void 0:v.nameColor)??"",activeBadgeIcon:(null==y?void 0:null===(x=y.author)||void 0===x?void 0:null===(p=x.activeBadge)||void 0===p?void 0:p.icon)??"",activeBadgeName:(null==y?void 0:null===(h=y.author)||void 0===h?void 0:null===(f=h.activeBadge)||void 0===f?void 0:f.displayName)??"",isAdmin:!1,reputation:0,isActive:!0,isOfficialCertification:(null==y?void 0:null===(g=y.author)||void 0===g?void 0:g.certificationLevel)===s.oZe.Official,isAnonymous:y.isAnonymous},isOwnPost:y.isOwner}:null});return{hasNextPage:n.hasNextPage,skip:t,items:a.filter(e=>!!e)}},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=m(e);return(0,n.q)(s.OEI.getKey(l),e=>{let{pageParam:t=l}=e;return a.nS.request(s.Gkb,t).then(e=>v(e.ugcArticleDiscussionArticles,t.skip))},{staleTime:1/0,...t,getNextPageParam:e=>e.hasNextPage?{...l,skip:e.skip+e.items.length}:void 0})},x=e=>{let{queryClient:t}=e;return t.getQueriesData(["discussPostItems"]).map(e=>{let[l,n]=e;return(0,d.d)(t,l,n)})}},72035:(e,t,l)=>{l.d(t,{d:()=>s});var n=l(1932);let s=(e,t,l)=>[s=>{if(!l)return;let a=(0,n.jM)(l,s);e.setQueryData(t,a)},()=>{e.setQueryData(t,l)}]},23918:(e,t,l)=>{l.d(t,{A3:()=>s,Ic:()=>a,nu:()=>n});var n=function(e){return e.Best="best",e.Hot="hot",e.MostRelevant="most_relevant",e.MostVotes="most_votes",e.NewestToOldest="newest_to_oldest",e.OldestToNewest="oldest_to_newest",e}({}),s=function(e){return e.Up="up",e.Down="down",e.None="none",e}({}),a=function(e){return e.Abuse="ABUSE",e.Advertising="ADVERTISING",e.All="ALL",e.Fake="FAKE",e.Illegal="ILLEGAL",e.NonEnglish="NON_ENGLISH",e.Other="OTHER",e.Politics="POLITICS",e.Sexual="SEXUAL",e.Terrorism="TERRORISM",e.Violent="VIOLENT",e}({})},45189:(e,t,l)=>{l.d(t,{w:()=>lj});var n=l(74848),s=l(96540),a=l(84038),i=l(70354),o=l(5559),r=l(85579),d=l(72556),u=l(22331),c=l(82479),m=l(15440),v=l(46830),p=l(24896),x=l(36768),f=l(37410);let h=()=>{let[e,t]=(0,s.useState)({visible:!1,comment:void 0});return[e,(0,s.useCallback)(e=>t(t=>({...t,...e})),[t])]};var g=l(27930),y=l(65008),C=l(18231),b=l(70094),j=l(42403);let N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return;let l=e.value.length||0;e.setSelectionRange(l,l),t?setTimeout(()=>e.focus(),t):e.focus()};var w=l(26934);let S=()=>{let[e,t]=(0,s.useState)(!1),[l,n]=(0,s.useState)(null),a=()=>t(!0),i=()=>t(!1);return(0,s.useEffect)(()=>{if(l)return l.addEventListener("mouseover",a),l.addEventListener("mouseleave",i),()=>{l.removeEventListener("mouseover",a),l.removeEventListener("mouseleave",i)}},[l]),[n,e]};var M=l(88032),k=l(47439),I=l(20159),A=l(93031),F=l(72187),D=l(51559),Y=l(21308),_=l(79656),B=l(15685),T=l(54983),R=l(76033);let q=e=>{let{onClick:t,className:l}=e;return(0,n.jsx)("div",{onClick:t,children:(0,n.jsx)(R.d,{variant:"14px",padding:"square",icon:_.h0u,className:l})})},H=e=>{let{onClick:t,className:l}=e;return(0,n.jsx)("div",{onClick:t,children:(0,n.jsx)(R.d,{variant:"14px",padding:"square",icon:B.h0u,className:l})})},L=e=>{let{onClick:t,className:l}=e;return(0,n.jsx)("div",{onClick:t,children:(0,n.jsx)(R.d,{variant:"14px",padding:"square",icon:_.sxB,className:l})})},O=e=>{let{onClick:t,className:l}=e;return(0,n.jsx)("div",{onClick:t,children:(0,n.jsx)(R.d,{variant:"14px",padding:"square",icon:B.sxB,className:l})})},E=e=>{let{voteCount:t,disabled:l,hasLike:s,onLikeClick:a,hasDislike:i,onDislikeClick:o}=e;return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(T.a,{label:(0,Y.Ay)(t),labelClassName:(0,c.xF)("cursor-pointer",x.MY.label3,x.MY.label2Hover),disabled:l,onIconClick:a,icon:s?H:q,iconClassName:(0,c.xF)("w-[18px] h-[18px] cursor-pointer",{[`${x.MY.label4}`]:!s&&l,[`${x.MY.labelGrey6} ${x.MY.labelGrey7Hover}`]:!s&&!l,[`${x.MY.labelGreenStandard} ${x.MY.labelGreenStandardHover} `]:s}),className:(0,c.xF)("gap-2 transition-colors")}),(0,n.jsx)(T.a,{disabled:l,onIconClick:o,icon:i?O:L,className:(0,c.xF)("transition-colors"),iconClassName:(0,c.xF)("w-[18px] h-[18px] cursor-pointer",{[`${x.MY.label4}`]:!i&&l,[`${x.MY.labelGrey6} ${x.MY.labelGrey7Hover}`]:!i&&!l,[`${x.MY.labelGrey7} ${x.MY.labelGrey7Hover} `]:i})})]})};var z=l(91023);function P(e,t){let{type:l,payload:n}=t;switch(l){case"resetState":return{...e,topicId:null,topicSlug:void 0,highlightedCommentId:void 0,parentOfHighlightedCommentId:void 0};case"setIntentionTags":return{...e,tagNamesMap:new Map(n.map(e=>[e.slug,e.name]))};default:return{...e,[l]:n}}}let K={topicId:null,topicSlug:void 0,isModerator:!1,highlightedCommentId:void 0,parentOfHighlightedCommentId:void 0,layoutType:z.Kc.Discuss,commentsTopAnchor:null,tagNamesMap:new Map,content:"",intentionTag:void 0,panelSide:"left",panelIsSmall:!1,containerDom:null,questionSlug:void 0,isOwnAnonymousPost:!1,mockOfficialSlug:void 0},G=(0,s.createContext)({state:K,dispatch:()=>null});function V(){return(0,s.useContext)(G)}let Q=e=>{let{children:t,value:l}=e,[a,i]=(0,s.useReducer)(P,{...K,...l}),o=(0,s.useMemo)(()=>({state:a,dispatch:i}),[a]);return(0,n.jsx)(G.Provider,{value:o,children:t})};var $=l(63064),U=l(35593),W=l(9640),X=function(e){return e.QuestionComment="questionDiscussComments",e.Reply="commentReplies",e}({});let J=(e,t)=>{switch(e[0]){case X.QuestionComment:var l;return(null==t?void 0:null===(l=t.topicComments)||void 0===l?void 0:l.data)||[];case X.Reply:return(null==t?void 0:t.commentReplies)||[]}},Z=(e,t,l)=>{switch(e[0]){case X.QuestionComment:return{topicComments:{...l.topicComments,data:t}};case X.Reply:return{commentReplies:t}}},ee=e=>{let{postId:t,commentId:l,changeComment:n,queryClient:s,key:a}=e;s.setQueryData(a,e=>{let s=J(a,e);return{...Z(a,null==s?void 0:s.map(e=>e.post.id===t||e.id===l?n(e):e),e)}})},et=e=>{let{postId:t,voteStatus:l,voteUpCount:n,queryClient:s,key:a}=e;ee({postId:t,changeComment:e=>{let t={...e};return t.post={...t.post,voteUpCount:n,voteStatus:l},t},queryClient:s,key:a})},el=e=>{let t=(0,$.jE)();return(0,U.Htf)(W.nS,{onSuccess(l,n){var s,a,i,o;et({postId:n.postId,voteStatus:(null===(a=l.votePost)||void 0===a?void 0:null===(s=a.post)||void 0===s?void 0:s.voteStatus)||0,voteUpCount:(null===(o=l.votePost)||void 0===o?void 0:null===(i=o.post)||void 0===i?void 0:i.voteUpCount)||0,queryClient:t,key:e})}})};var en=l(23918),es=function(e){return e.QdSolutionTab="QD_Solution_Tab",e.QdDiscussTab="QD_Discuss_Tab",e.QdSolutionTabComment="QD_Solution_Tab_comment",e.QdDiscussTabComment="QD_Discuss_Tab_comment",e.QdSolutionTabReply="QD_Solution_Tab_reply",e.QdDiscussTabReply="QD_Discuss_Tab_reply",e}(es||{}),ea=function(e){return e.Comment="comment",e.Reply="reply",e}({});let ei=e=>{switch(e){case z.Kc.Solution:case z.Kc.OfficialSolution:return"solution_tab";case z.Kc.Discuss:return"discuss_tab";case z.Kc.Description:return"description_tab";case z.Kc.DiscussPost:return"discuss_post";default:return""}},eo=e=>{var t,l,r,d,v,p;let{comment:f,trackingCommentType:h}=e,{t:g}=(0,a.Bd)("comments"),{mutateAsync:y,isLoading:C}=el(f.queryKey),b=!!(null===(r=(0,i.Xe)())||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:null===(t=l.userStatus)||void 0===t?void 0:t.isSignedIn),j=!!(null===(p=(0,i.Xe)())||void 0===p?void 0:null===(v=p.data)||void 0===v?void 0:null===(d=v.userStatus)||void 0===d?void 0:d.isVerified),{state:{layoutType:N,questionSlug:w}}=V(),{voteCount:S,voteStatus:M,postId:k}=f,I=(0,s.useCallback)(()=>(b?j||D.i.error((0,n.jsxs)("span",{children:[g("youMust")," ",(0,n.jsx)("a",{href:F.f0.profileHome(),target:"_blank",rel:"noreferrer",className:(0,c.xF)(x.MY.labelBlueStandard),children:g("verifyYourEmail")})," ",g("first"),"."]}),{itemClassName:x.MY.bgLayer3}):(0,o.K)(),b&&j),[b,j,g]),A=(0,s.useCallback)(e=>{I()&&y({postId:k,voteStatus:e}).then(t=>{var l,n;if(!(null==t?void 0:null===(l=t.votePost)||void 0===l?void 0:l.ok)){D.i.error((null==t?void 0:null===(n=t.votePost)||void 0===n?void 0:n.error)||g("somethingWentWrong"),{itemClassName:x.MY.bgLayer3});return}1===e&&m.L.qdUpVoteCommentClick({qd_version:(0,u.Su)(),qd_question_slug:w??"",qd_comment_pos:ei(N),qd_comment_type:h}),-1===e&&m.L.qdDownVoteCommentClick({qd_version:(0,u.Su)(),qd_question_slug:w??"",qd_comment_pos:ei(N),qd_comment_type:h})})},[I,y,k,g,N,w,h]),[Y,_]=[M===en.A3.Up,M===en.A3.Down],B=(0,s.useCallback)(()=>{A(Y?0:1)},[A,Y]),T=(0,s.useCallback)(()=>{A(_?0:-1)},[A,_]);return(0,n.jsx)(E,{disabled:C,hasLike:Y,onLikeClick:B,hasDislike:_,onDislikeClick:T,voteCount:S})};var er=l(49853);let ed=e=>{let{onClick:t,showReplies:l,showLabel:s,repliesNum:i=0}=e,{t:o}=(0,a.Bd)("comments"),r=String((0,Y.Ay)(i)),d=s?l?o("hideReplies"):o("showReplies",{num:r}):`${r}`;return i<1?null:(0,n.jsx)(T.a,{label:d,icon:er.o,iconClassName:(0,c.xF)("w-4.5 h-4.5",x.MY.labelGrey6,x.MY.labelGrey7GroupHover),labelClassName:(0,c.xF)(x.MY.label3,x.MY.label2GroupHover),className:(0,c.xF)("group shrink-0 cursor-pointer transition-colors"),onClick:t})},eu=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.83 2.106c.628-.634 1.71-.189 1.71.704v2.065c4.821.94 6.97 4.547 7.73 8.085l-.651.14.652-.134c.157.757-.83 1.192-1.284.565l-.007-.009c-1.528-2.055-3.576-3.332-6.44-3.502v2.352c0 .893-1.082 1.338-1.71.704L1.091 8.295a1 1 0 010-1.408l4.737-4.78zm7.303 8.617C12.08 8.495 10.204 6.68 7.046 6.14c-.47-.08-.84-.486-.84-.99V3.62L2.271 7.591l3.934 3.971V9.667a.993.993 0 011.018-.995c2.397.065 4.339.803 5.909 2.051z",clipRule:"evenodd"})})},ec=e=>{let{onClick:t,showLabel:l}=e,{t:s}=(0,a.Bd)("comments");return(0,n.jsx)(T.a,{onClick:t,label:l?s("reply"):void 0,icon:eu,iconClassName:(0,c.xF)("w-4.5 h-4.5",x.MY.labelGrey6,x.MY.labelGrey7GroupHover),labelClassName:(0,c.xF)(x.MY.label3,x.MY.label2GroupHover),className:(0,c.xF)("group cursor-pointer gap-1 transition-colors")})};var em=l(44249);let ev=e=>{let{isOwnPost:t,onClick:l,showLabel:s}=e,{t:i}=(0,a.Bd)("comments"),{state:{isModerator:o}}=V();return o||t?(0,n.jsx)(T.a,{onClick:l,label:s?i("edit"):void 0,icon:em.f,iconClassName:(0,c.xF)("w-4.5 h-4.5",x.MY.labelGrey6,x.MY.labelGrey7GroupHover),labelClassName:(0,c.xF)(x.MY.label3,x.MY.label2GroupHover),className:(0,c.xF)("group cursor-pointer gap-1 transition-colors")}):null};var ep=l(61252),ex=l(75141);let ef=e=>{let t=(window.location.href.includes("/comments/")?`${window.location.href.split("/comments/")[0]}/`:window.location.href.split("?")[0]).split("#")[0];return e!==z.Kc.Description||t.includes("/description/")?t:`${t}description/`},eh=e=>{let{commentId:t,parentId:l,showLabel:i,onShareClick:o}=e,{t:r}=(0,a.Bd)("comments"),[d,u]=(0,ep.R)(window.location.href,{successDuration:1e3}),{state:{layoutType:m}}=V();(0,s.useEffect)(()=>{d&&D.i.success(r("shareCopySuccess"),{itemClassName:x.MY.bgLayer3})},[d,r]);let v=(0,s.useCallback)(()=>{let e=ef(m);u(l?`${e}comments/${t}/?parent=${l}`:`${e}comments/${t}/`),o&&o()},[m,l,t,u,o]);return(0,n.jsxs)("div",{className:(0,c.xF)("group flex cursor-pointer items-center space-x-1"),onClick:v,children:[(0,n.jsx)("span",{children:(0,n.jsx)(ex.F,{className:(0,c.xF)(x.MY.labelGrey6,x.MY.labelGrey7GroupHover,"h-4.5 w-4.5")})}),i&&(0,n.jsx)("span",{className:(0,c.xF)(x.MY.label3,x.MY.label2GroupHover),children:r("share")})]})};var eg=l(18122),ey=l(10379);let eC=()=>(0,U.DEu)(W.nS),eb=e=>{let{comment:t,updateModal:l}=e,{t:i}=(0,a.Bd)("comments"),o=(0,$.jE)(),{mutateAsync:r}=eC(),d=t.pinned,u=d?i("unpin"):i("pin"),c=(0,s.useCallback)(()=>{l({loading:!0}),r&&r({commentId:t.id,pinned:!d}).then(e=>{var n;if(!(null===(n=e.togglePinComment)||void 0===n?void 0:n.ok)){D.i.error(i("somethingWentWrong"),{itemClassName:x.MY.bgLayer3});return}let s=!d;D.i.success(s?i("pinSuccess"):i("unpinSuccess"),{itemClassName:x.MY.bgLayer3});let a=[t.queryKey[0],(0,eg.A)(t.queryKey[1],["topicId"])];o.invalidateQueries(a),l({loading:!1,visible:!1})})},[l,r,o,d,t.id,t.queryKey,i]),m=(0,s.useCallback)(()=>{l({visible:!0,variant:"info",confirmText:d?i("confirmUnpinComment"):i("confirmPinComment"),confirmBtn:d?i("unpin"):i("pin"),onConfirm:c})},[l,c,d,i]);return(0,n.jsx)(ey.o,{onClick:m,children:u})},ej=e=>{let{postId:t,isHidden:l,queryClient:n,key:s}=e;ee({postId:t,changeComment:e=>{let t={...e};return t.post={...t.post,isHidden:l},t},queryClient:n,key:s})},eN=e=>{let t=(0,$.jE)();return(0,U.RAg)(W.nS,{onSuccess(l,n){var s,a;ej({postId:n.postId,isHidden:!!(null===(a=l.hidePost)||void 0===a?void 0:null===(s=a.post)||void 0===s?void 0:s.isHidden),queryClient:t,key:e})}})},ew=e=>{let{comment:t,updateModal:l}=e,{t:i}=(0,a.Bd)("comments"),{mutateAsync:o}=eN(t.queryKey),r=t.isHidden,d=r?i("showComment"):i("hideComment"),u=(0,s.useCallback)(()=>{l({loading:!0}),o({postId:t.postId,hide:!r,id:t.id}).then(e=>{if("hidePost"in e){var t,n,s,a;if(!(null===(t=e.hidePost)||void 0===t?void 0:t.ok)){D.i.error((null===(a=e.hidePost)||void 0===a?void 0:a.error)||i("somethingWentWrong"),{itemClassName:x.MY.bgLayer3});return}let l=!!(null===(s=e.hidePost)||void 0===s?void 0:null===(n=s.post)||void 0===n?void 0:n.isHidden);D.i.success(l?i("hideSuccess"):i("showSuccess"),{itemClassName:x.MY.bgLayer3})}else D.i.success(r?i("showSuccess"):i("hideSuccess"),{itemClassName:x.MY.bgLayer3});l({loading:!1,visible:!1})})},[l,o,t.postId,t.id,r,i]),c=(0,s.useCallback)(()=>{l({visible:!0,variant:r?"info":"danger",confirmText:r?i("confirmShowComment"):i("confirmHideComment"),confirmBtn:r?i("showComment"):i("hideComment"),onConfirm:u})},[l,u,r,i]);return(0,n.jsx)(ey.o,{onClick:c,children:d})};var eS=l(1932),eM=l(16405),ek=l(19069),eI=l(20473),eA=l(73274);let eF=e=>{let{queryClient:t,commentQueryType:l,topicId:n,layoutType:s,questionSlug:a,diff:i}=e;if(n&&l===X.QuestionComment)switch(s){case z.Kc.Solution:case z.Kc.OfficialSolution:case z.Kc.MarkdownGuide:let[o]=(0,eM.s6)(t,n),[r]=(0,ek.u)(t);o(e=>{let t=(0,eM.dC)(e);t&&t.topic&&(t.topic.topLevelCommentCount+=i)}),r(e=>{e&&e.pages.flatMap(e=>e.solutions).forEach(e=>{(null==e?void 0:e.topicId)===n&&(e.commentCount+=i)})});break;case z.Kc.DiscussPost:let[d]=(0,eI.U)({queryClient:t,topicId:String(n)});d(e=>{var t;(null===(t=e.ugcArticleDiscussionArticle)||void 0===t?void 0:t.topic)&&(e.ugcArticleDiscussionArticle.topic.topLevelCommentCount+=i)}),(0,eA.jI)({queryClient:t}).forEach(e=>{let[t]=e;t(e=>{e&&e.pages.flatMap(e=>e.items).forEach(e=>{e&&e.topicId===n&&(e.commentCount+=i)})})});break;case z.Kc.Description:case z.Kc.Discuss:if(!a)return;t.setQueryData(U.Bdk.getKey({titleSlug:a}),e=>(0,eS.jM)(e,e=>{var t;(null==e?void 0:null===(t=e.questionDiscussionTopic)||void 0===t?void 0:t.topLevelCommentCount)!==void 0&&(e.questionDiscussionTopic.topLevelCommentCount+=i)}))}},eD=e=>{let{postId:t,queryClient:l,key:n,parentKey:s,topicId:a,questionSlug:i,layoutType:o,isAdmin:r}=e;l.invalidateQueries(n),l.invalidateQueries(["tabsStatus"]),s&&l.invalidateQueries(s);let d=n[0]===X.QuestionComment?X.QuestionComment:X.Reply;ee({postId:t,changeComment:e=>{let t={...e};return t.post.status=y.nz.Deleted,t.post.isHidden=!0,t},queryClient:l,key:n}),r||eF({queryClient:l,topicId:a,questionSlug:i,commentQueryType:d,layoutType:o,diff:-1})},eY=()=>(0,U.HIk)(W.nS),e_=e=>{let{postId:t,queryClient:l,key:n,status:s}=e;ee({postId:t,changeComment:e=>{let t={...e};return t.post={...t.post,status:s,isHidden:!1},t},queryClient:l,key:n})},eB=()=>(0,U.zLw)(W.nS),eT=e=>{var t,l;let{comment:o,parentComment:r,updateModal:d}=e,{t:u}=(0,a.Bd)("comments"),c=(0,$.jE)(),{mutateAsync:m}=eY(),{mutateAsync:v}=eB(),p=o.status===y.nz.Deleted,f=p?u("restore"):u("delete"),h=!!(null===(l=(0,i.Xe)().data)||void 0===l?void 0:null===(t=l.userStatus)||void 0===t?void 0:t.isAdmin),{state:{topicId:g,topicSlug:C,questionSlug:b,layoutType:j}}=V(),N=(0,s.useCallback)(()=>{(d({loading:!0}),p)?!v||v({commentId:o.id}).then(e=>{var t,l,n,s;if(!(null===(t=e.approveComment)||void 0===t?void 0:t.ok)){D.i.error(!(null===(s=e.approveComment)||void 0===s?void 0:s.error)||u("deleteCommentError"),{itemClassName:x.MY.bgLayer3}),d({loading:!1});return}D.i.success(u("restoreSuccess"),{itemClassName:x.MY.bgLayer3});let a=(null===(n=e.approveComment)||void 0===n?void 0:null===(l=n.post)||void 0===l?void 0:l.status)||y.nz.All;e_({postId:o.postId,queryClient:c,key:o.queryKey,status:a}),d({loading:!1,visible:!1})}):m({commentId:o.id}).then(e=>{var t,l;if(!(null===(t=e.deleteComment)||void 0===t?void 0:t.ok)){D.i.error(!(null===(l=e.deleteComment)||void 0===l?void 0:l.error)||u("deleteCommentError"),{itemClassName:x.MY.bgLayer3}),d({loading:!1});return}D.i.success(u("deleteSuccess"),{itemClassName:x.MY.bgLayer3}),eD({postId:o.postId,queryClient:c,key:o.queryKey,parentKey:null==r?void 0:r.queryKey,topicId:g??void 0,topicSlug:C,questionSlug:b,layoutType:j,isAdmin:h,childrenCount:o.numChildren}),d({loading:!1,visible:!1})})},[d,p,m,o.id,o.postId,o.queryKey,o.numChildren,u,c,null==r?void 0:r.queryKey,g,C,b,j,h,v]),w=(0,s.useCallback)(()=>{d({visible:!0,variant:p?"info":"danger",confirmText:p?u("confirmRestoreComment"):u("confirmDeleteComment"),confirmBtn:p?u("restore"):u("delete"),onConfirm:N})},[d,N,p,u]);return(0,n.jsx)(ey.o,{onClick:w,children:f})},eR=e=>(0,c.xF)({"opacity-1":!e.isHidden&&e.status!==y.nz.Deleted,"opacity-40":e.isHidden||e.status===y.nz.Deleted}),eq=e=>{let{comment:t,updateConfirmModal:l,updateReportModal:i,isPinnable:r=!0}=e,{t:d}=(0,a.Bd)("comments"),{isSignedIn:u}=(0,j.G)(),m=(0,s.useCallback)(()=>{if(!u){(0,o.K)();return}i({visible:!0,comment:t})},[u,i,t]),{state:{isModerator:v}}=V();return!v&&t.isOwnPost?null:(0,n.jsxs)(ey.n,{btnClassName:(0,c.xF)("w-4.5 h-4.5",eR(t)),iconClassName:"w-4.5 h-4.5",placement:(0,w.Fr)()?"top-left":"top",children:[v&&r&&(0,n.jsx)(eb,{comment:t,updateModal:l}),v&&(0,n.jsx)(ew,{comment:t,updateModal:l}),!t.isOwnPost&&(0,n.jsx)(ey.o,{onClick:m,children:d("report")}),v&&(0,n.jsx)(eT,{comment:t,updateModal:l})]})};var eH=l(55587),eL=l(5548);let eO=e=>{let{status:t,isHidden:l}=e,{t:s}=(0,a.Bd)("comments"),{state:{isModerator:i}}=V(),o=l?s("hidden"):t;return i?(0,n.jsx)("div",{className:(0,c.xF)(x.MY.label4,"text-xs capitalize"),children:o}):null};var eE=l(72842),ez=l(84756);let eP=e=>{var t,l;let{comment:o,parentComment:r,updateModal:d}=e,{t:u}=(0,a.Bd)("comments"),m=(0,$.jE)(),{mutateAsync:v}=eY(),{mutateAsync:p}=eB(),f=o.status===y.nz.Deleted,h=(0,s.useMemo)(()=>f?eE.g:ez.m,[f]),g=!!(null===(l=(0,i.Xe)().data)||void 0===l?void 0:null===(t=l.userStatus)||void 0===t?void 0:t.isAdmin),{state:{topicId:C,topicSlug:b,questionSlug:j,layoutType:N}}=V(),w=(0,s.useCallback)(()=>{(d({loading:!0}),f)?!p||p({commentId:o.id}).then(e=>{var t,l,n,s;if(!(null===(t=e.approveComment)||void 0===t?void 0:t.ok)){D.i.error(!(null===(s=e.approveComment)||void 0===s?void 0:s.error)||u("deleteCommentError"),{itemClassName:x.MY.bgLayer3}),d({loading:!1});return}D.i.success(u("restoreSuccess"),{itemClassName:x.MY.bgLayer3});let a=(null===(n=e.approveComment)||void 0===n?void 0:null===(l=n.post)||void 0===l?void 0:l.status)||y.nz.All;e_({postId:o.postId,queryClient:m,key:o.queryKey,status:a}),d({loading:!1,visible:!1})}):v({commentId:o.id}).then(e=>{var t,l;if(!(null===(t=e.deleteComment)||void 0===t?void 0:t.ok)){D.i.error(!(null===(l=e.deleteComment)||void 0===l?void 0:l.error)||u("deleteCommentError"),{itemClassName:x.MY.bgLayer3}),d({loading:!1});return}D.i.success(u("deleteSuccess"),{itemClassName:x.MY.bgLayer3}),eD({postId:o.postId,queryClient:m,key:o.queryKey,parentKey:null==r?void 0:r.queryKey,topicId:C??void 0,topicSlug:b,questionSlug:j,layoutType:N,isAdmin:g,childrenCount:o.numChildren}),d({loading:!1,visible:!1})})},[d,f,v,o.id,o.postId,o.queryKey,o.numChildren,u,m,null==r?void 0:r.queryKey,C,b,j,N,g,p]),S=f?u("restore"):u("delete"),M=(0,s.useCallback)(()=>{d({visible:!0,variant:f?"info":"danger",confirmText:f?u("confirmRestoreComment"):u("confirmDeleteComment"),confirmBtn:f?u("restore"):u("delete"),onConfirm:w})},[d,w,f,u]);return(0,n.jsx)(T.a,{onClick:M,icon:h,label:S,labelClassName:(0,c.xF)(x.FY.label1Group),iconClassName:(0,c.xF)(x.FY.labelGrey7Group,"h-4.5 w-4.5"),className:(0,c.xF)("group cursor-pointer gap-1")})};var eK=l(11320);let eG=e=>{let t=e.matchAll(/\[\@[^\]]+\]\(\/u\/([^/]+)\)/g),l=new Set;for(let e of t)(null==e?void 0:e[1])&&l.add(e[1]);return Array.from(l)};var eV=l(86351);let eQ=e=>{let{comment:t,queryClient:l,key:n,parentComment:s,questionSlug:a,topicId:i,layoutType:o}=e;a&&l.invalidateQueries(U.uby.getKey({titleSlug:a}));let r=n[0]===X.QuestionComment?X.QuestionComment:X.Reply;if(r===X.QuestionComment){let e=n[1];[en.nu.Best,en.nu.MostVotes,en.nu.NewestToOldest,en.nu.OldestToNewest].filter(t=>t!==e.orderBy).forEach(t=>{l.invalidateQueries([X.QuestionComment,{...e,orderBy:t}])})}let d=[n[0],{...n[1],pageNo:1}],u=r===X.QuestionComment?d:n;l.setQueryData(u,e=>{var l,n;let s=[t,...e?r===X.QuestionComment?null==e?void 0:null===(l=e.topicComments)||void 0===l?void 0:l.data:null==e?void 0:e.commentReplies:[]];return{...r===X.QuestionComment?{topicComments:{data:s,totalNum:((null==e?void 0:null===(n=e.topicComments)||void 0===n?void 0:n.totalNum)||0)+1}}:{commentReplies:s}}}),s&&l.setQueryData(s.queryKey,e=>{var t;let l=(e?null==e?void 0:null===(t=e.topicComments)||void 0===t?void 0:t.data:[]).map(e=>e.id===s.id?{...e,numChildren:e.numChildren+1}:e);return{...{...e,topicComments:{...null==e?void 0:e.topicComments,data:l}}}}),eF({queryClient:l,commentQueryType:r,topicId:i,layoutType:o,questionSlug:a,diff:1})},e$=()=>(0,U.eRM)(W.nS),eU=eV.Sn,eW=e=>{let{commentId:t,content:l,queryClient:n,key:s}=e;ee({commentId:t,changeComment:e=>{let t={...e};return t.post={...t.post,content:l},t},queryClient:n,key:s})},eX=()=>(0,U.DNM)(W.nS),eJ=()=>!1,eZ=e=>(0,eK.dk)(e),e0=e=>{let{queryKey:t,parentComment:l,existingComment:n,initialContent:i,initialIntentionTag:o,saveDraft:r,setPageNo:d}=e,{t:u}=(0,a.Bd)("comments"),[c,m]=(0,s.useState)((null==n?void 0:n.content)||i||""),[v,p]=(0,s.useState)(o||void 0),[f,h]=(0,s.useState)(!1),{state:{topicId:g,topicSlug:y,questionSlug:C,layoutType:b,mockOfficialSlug:j},dispatch:N}=V(),w=Number(g),S=(0,$.jE)(),{mutateAsync:M}=e$(),{mutateAsync:k}=eU(),{mutateAsync:I}=eX(),A=(0,s.useCallback)(e=>{m(e),r&&N({type:"content",payload:e})},[r,N]),F=(0,s.useCallback)(e=>{p(e),r&&N({type:"intentionTag",payload:e})},[r,N]);return{onSave:async()=>{if(f)return{ok:!1};if(eJ(c))return D.i.error(u("tooShort"),{itemClassName:x.MY.bgLayer3}),{ok:!1};h(!0);let e=(null==l?void 0:l.id)||0;return(j&&k?k({topicId:w,parentCommentId:e,content:eZ(c),mentionedUserSlugs:eG(c),officialAccountSlug:j}):M({topicId:w,intentionTagSlug:v,parentCommentId:e,content:eZ(c),mentionedUserSlugs:eG(c)})).then(e=>{var n,s,a;if(!(null==e?void 0:null===(n=e.createComment)||void 0===n?void 0:n.ok)||!(null==e?void 0:null===(s=e.createComment)||void 0===s?void 0:s.comment))return D.i.error((null==e?void 0:null===(a=e.createComment)||void 0===a?void 0:a.error)||u("somethingWentWrong"),{itemClassName:x.MY.bgLayer3}),{ok:!1};let i=e.createComment.comment;return D.i.success(u("postSuccess"),{itemClassName:x.MY.bgLayer3}),eQ({comment:i,queryClient:S,key:t,parentComment:l,questionSlug:C,topicId:w,layoutType:b,topicSlug:y}),A(""),F(void 0),d&&d(1),{ok:!0}}).finally(()=>h(!1))},onEdit:async()=>{if(f)return{ok:!1};if(eJ(c))return D.i.error(u("tooShort"),{itemClassName:x.MY.bgLayer3}),{ok:!1};h(!0);let e=(null==n?void 0:n.id)||0;return I({commentId:e,content:eZ(c),mentionedUserSlugs:eG(c)}).then(l=>{var n,s,a,i,o;return(h(!1),(null==l?void 0:null===(n=l.updateComment)||void 0===n?void 0:n.ok)&&(null==l?void 0:null===(s=l.updateComment)||void 0===s?void 0:s.comment))?(eW({content:(null===(i=l.updateComment.comment)||void 0===i?void 0:null===(a=i.post)||void 0===a?void 0:a.content)||"",commentId:e,queryClient:S,key:t}),{ok:!0}):(D.i.error((null==l?void 0:null===(o=l.updateComment)||void 0===o?void 0:o.error)||u("somethingWentWrong"),{itemClassName:x.MY.bgLayer3}),{ok:!1})})},isSaving:f,value:c,onCommentChange:A,intentionTag:v,onIntentionTagChange:F}};var e1=l(7037),e4=l.n(e1),e2=l(68490),e3=l(98031),e5=l(48271),e7=l(86474);let e6=(e,t)=>{let{enabled:l=!0}=t;return(0,e7.LZG)(W.nS,{filters:{searchKeywords:e,sortOrder:null,orderBy:null}},{enabled:!!e&&l,select:e=>(0,e5.A)(e.problems.questions).map(e=>({frontendQuestionId:e.frontendQuestionId,title:e.titleCn||e.title,titleSlug:e.titleSlug,difficulty:e.difficulty}))})},e8=(e,t)=>(0,U.lmt)(W.nS,{usernamePrefix:e,topicId:t},{enabled:!!t&&!!e.trim(),select:e=>(0,e5.A)(e.topicUsers).map(e=>({username:e.username,name:e.profile.realName||e.username,userAvatar:e.profile.userAvatar||"",userSlug:e.profile.userSlug||""}))});var e9=l(15314);let te=e=>{let{user:t,active:l,onSelect:a}=e,i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(l){var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}},[l]),(0,n.jsxs)("div",{ref:i,onClick:()=>{a({insertedContent:`[@${t.name}](${F.f0.profile(t.userSlug)})`})},className:(0,c.xF)(x.MY.fill3Hover,{[x.MY.fill3]:l},"flex h-12 cursor-pointer items-center rounded-[5px] px-2 py-1.5"),children:[(0,n.jsx)(e9.e,{className:"h-9 w-9",src:t.userAvatar,alt:"avatar"}),(0,n.jsxs)("div",{className:"ml-2",children:[(0,n.jsx)("h3",{children:t.name}),(0,n.jsx)("div",{className:(0,c.xF)(x.MY.label4,"mt-0.5 text-xs font-medium"),children:t.userSlug})]})]})},tt=e=>{let{users:t,selectIndex:l,onSelect:s}=e;return(0,n.jsx)("div",{className:"max-h-[250px] space-y-1 overflow-auto px-2",children:t.map((e,t)=>(0,n.jsx)(te,{user:e,active:l===t,onSelect:s},e.userSlug))})},tl=e=>{let{users:t,selectIndex:l,onSelect:s,isFetching:a,keyword:i}=e;return a||!i.trim()||0===t.length?null:(0,n.jsx)(tt,{users:t,selectIndex:l,onSelect:s})},tn=e3.Gp,ts=(0,s.memo)(e=>{let{onBlur:t,onSelect:l,topicId:a}=e,i=function(e){let{onTriggered:t,disableClick:l,disableTouch:n,disableKeys:a,allowAnyKey:i,triggerKeys:o}=e,r=(0,s.useRef)(null),d=(0,s.useCallback)(e=>{i?t(e):o?o.includes(e.key)&&t(e):"Escape"===e.key&&t(e)},[i,o,t]),u=(0,s.useCallback)(e=>{r&&r.current&&!r.current.contains(e.target)&&(null==t||t(e))},[r,t]),c=(0,s.useMemo)(()=>[[l,"click",u],[n,"touchstart",u],[a,"keyup",d]],[l,n,a,u,d]);return(0,s.useEffect)(()=>(c.forEach(e=>{let[t,l,n]=e;t||document.addEventListener(l,n)}),()=>{c.forEach(e=>{let[t,l,n]=e;t||document.removeEventListener(l,n)})}),[c]),r}({onTriggered:t}),o=function(){let e=(0,s.useRef)(null);return(0,b.E)(()=>{setTimeout(()=>{e.current&&e.current.focus()},100)},[]),e}(),[r,d]=(0,s.useState)(0),[u,m]=(0,s.useState)(0),v=e=>{d(0),m(e)},[p,f]=(0,s.useState)(""),{data:h=[],isFetching:g}=e8(p,a||0),{data:y=[]}=e6(p,{enabled:tn}),C=0===u?h:y,j=C.length,N=function(e){let{onEnter:t,onArrowDown:l,onArrowUp:n,onEscape:a,onTab:i,onBackSpace:o}=e;return(0,s.useCallback)(e=>{let{key:s}=e;switch(!0){case"Enter"===s:e.preventDefault(),t();return;case"ArrowDown"===s:e.preventDefault(),l();return;case"ArrowUp"===s:e.preventDefault(),n();return;case"Escape"===s:e.preventDefault(),a();return;case"Tab"===s:i();return;case"Backspace"===s:o(e.currentTarget.value);return;default:return}},[t,l,n,a,i,o])}({onEscape:t,onEnter:()=>{let e=C[r];"userSlug"in e?l({insertedContent:`[@${e.name}](${F.f0.profile(e.userSlug)})`}):l({insertedContent:`[${e.frontendQuestionId}. ${e.title}](${F.f0.questionDetail(e.titleSlug)})`})},onArrowUp:()=>{d(e=>(e+j-1)%j)},onArrowDown:()=>{d(e=>(e+1)%j)},onTab:()=>{v(e=>(e+1)%2)},onBackSpace:e=>{e||t()}});return(0,n.jsxs)("div",{ref:i,className:(0,c.xF)("z-base-2 flex w-[250px] flex-col gap-2 rounded-lg py-2",x.H2.dropdown,x.MY.bgLayer3),children:[(0,n.jsx)("div",{className:"rounded-[5px] px-2",children:(0,n.jsx)(e2.p,{ref:o,onKeyDown:N,value:p,onChange:e=>f(e.target.value)})}),(0,n.jsx)(tl,{users:h,selectIndex:r,onSelect:l,activeIndex:u,setActiveIndex:v,problems:y,isFetching:g,keyword:p})]})}),ta=e=>{let{mentionInfo:t,hideSelf:l,onMentionSelect:a,topicId:i}=e,o=(0,s.useRef)(null),r=(0,s.useRef)(null),d=(0,s.useRef)(!1),{top:u,left:m,right:v,visible:p}=t,x=(0,s.useCallback)(e=>{let{insertedContent:t}=e;a(t),l()},[l,a]);return(0,s.useEffect)(()=>{let e=o.current;p&&e&&(e.style.top=`${u}px`,e.style.left=void 0!==m?`${m}px`:"",e.style.right=void 0!==v?`${v}px`:"")},[u,m,v,p]),(0,s.useEffect)(()=>{let e=d.current;p&&o.current&&r.current&&!e&&r.current.focus(),d.current=p},[p]),(0,n.jsx)("div",{ref:o,className:(0,c.xF)("z-base-1 absolute box-content rounded-lg",{block:p,hidden:!p}),children:p&&(0,n.jsx)(ts,{onBlur:l,onSelect:x,topicId:i})})};var ti=function(e){return e.Full="full",e.Slim="slim",e}({}),to=function(e){return e.InlineCode="code-inline",e.CodeBlock="code",e.Link="link",e.BulletList="list",e.NumberList="number-list",e.Mention="@",e.Problem="#",e}({}),tr=l(38766),td=l(53743),tu=l(45874);let tc=function(e){let{ref:t,...l}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor",ref:t,...l,children:(0,n.jsx)("path",{d:"M11.27 6.799l.146-.438c.075-.259.178-.437.308-.534.14-.108.345-.06.615.145.065.054.124.114.178.179a.45.45 0 01.114.226.976.976 0 01.032.373 2.21 2.21 0 01-.13.535l-1.182 3.434c-.054.151-.043.28.032.389a.399.399 0 00.308.146c.087 0 .232-.081.438-.243.205-.173.41-.405.615-.697.216-.292.405-.637.567-1.037a3.63 3.63 0 00.243-1.344c0-.519-.108-1-.324-1.442a3.458 3.458 0 00-.907-1.15 4.033 4.033 0 00-1.345-.778 4.76 4.76 0 00-1.684-.292 4.55 4.55 0 00-1.766.373 5.343 5.343 0 00-2.77 2.738c-.292.659-.438 1.393-.438 2.203 0 .691.13 1.296.389 1.814.26.519.616.95 1.07 1.296.453.335.982.589 1.587.762a7.555 7.555 0 001.96.243 9.97 9.97 0 001.328-.081c.4-.054.783-.151 1.15-.292a5.269 5.269 0 001.07-.6c.345-.258.707-.582 1.085-.971.076-.108.162-.162.26-.162.107-.011.21.01.307.065a.567.567 0 01.243.21.5.5 0 01.13.276.857.857 0 01-.081.55c-.076.162-.26.378-.551.648-.292.27-.61.524-.956.762a6.538 6.538 0 01-1.118.632c-.4.172-.837.307-1.312.405a7.016 7.016 0 01-1.555.162 8.817 8.817 0 01-2.527-.324 6.147 6.147 0 01-2.122-1.021 5.098 5.098 0 01-1.442-1.814c-.357-.735-.535-1.61-.535-2.625 0-1.09.19-2.057.567-2.9.389-.853.891-1.566 1.507-2.138a6.371 6.371 0 012.09-1.328A6.646 6.646 0 019.26 2.7c.875 0 1.674.13 2.398.389.734.259 1.36.62 1.879 1.085.518.465.918 1.02 1.199 1.669.291.648.437 1.36.437 2.138 0 .627-.119 1.237-.356 1.83a5.638 5.638 0 01-.94 1.556c-.389.454-.826.82-1.312 1.102-.486.27-.977.405-1.474.405-.378 0-.675-.087-.891-.26-.216-.172-.378-.437-.486-.793-.346.28-.637.496-.875.648-.238.15-.545.221-.923.21-.443-.01-.8-.102-1.07-.275a1.905 1.905 0 01-.631-.648 2.547 2.547 0 01-.308-.859 5.625 5.625 0 01-.081-.923c0-.465.092-.967.275-1.507.195-.55.46-1.053.794-1.506a4.519 4.519 0 011.247-1.15 2.928 2.928 0 011.62-.47c.227 0 .422.037.584.113.172.076.313.184.42.324.12.13.217.286.292.47.076.173.146.356.211.55zm-2.657 4.374c.324 0 .637-.12.94-.357.313-.248.578-.723.794-1.425.14-.432.243-.746.307-.94.065-.205.103-.373.114-.502.01-.205-.07-.389-.243-.551-.173-.173-.357-.26-.551-.26-.346 0-.659.087-.94.26-.27.173-.502.394-.696.664a3.53 3.53 0 00-.438.907 3.563 3.563 0 00-.178.972c0 .476.092.8.276.972.183.173.388.26.615.26z"})})};var tm=l(53882),tv=l(77688),tp=l(58576),tx=l(49188);let tf=()=>(0,U.lTl)(W.nS,{},{select:e=>{let{intentionTags:t}=e;return t||[]}});var th=l(814);let tg=th.l,ty=(0,c.xF)("transition-colors cursor-pointer py-[5px] px-3 rounded-lg"),tC=e=>{let{intentionTag:t,setIntentionTag:l}=e,{t:i}=(0,a.Bd)("comments"),{data:o}=tf(),{dispatch:r}=V();(0,s.useEffect)(()=>o&&r({type:"setIntentionTags",payload:o}),[r,o]);let d=(0,s.useMemo)(()=>(o??[]).map(e=>({value:e.slug,text:e.name})),[o]),u=(0,s.useMemo)(()=>d.find(e=>e.value===t),[d,t]);return(0,n.jsx)("div",{className:"absolute top-0",children:(0,n.jsx)("div",{className:"relative flex items-center space-x-2",children:(0,n.jsx)(tp.m,{selected:null==u?void 0:u.value,icon:(0,n.jsx)("div",{className:(0,c.xF)(x.MY.labelBlueStandard,"text-xs font-medium"),children:(0,n.jsx)(tx.g,{})}),iconClassName:"w-4 h-4 ml-0.5",itemsClassName:(0,c.xF)(x.MY.bgLayer3,"left-0 top-[22px] text-md"),itemClassName:(0,c.xF)("font-normal",x.MY.label2),itemSelectedClassName:(0,c.xF)("font-medium",x.MY.label1),btnClassName:(0,c.xF)(x.MY.bgTransparent,x.MY.bgTransparentActive,x.MY.bgTransparentHover,x.MY.labelBlueStandard,"p-0"),setSelected:e=>{l&&l(e)},items:d,btnText:(0,n.jsx)("div",{className:(0,c.xF)(x.MY.labelBlueStandard,"text-xs font-medium"),children:u?null==u?void 0:u.text:i("chooseAType")})})})})},tb=e=>{let{rule:t,onClick:l,icon:a,className:i}=e,o=(0,s.useCallback)(()=>l(t),[l,t]);return(0,n.jsx)("div",{className:(0,c.xF)("flex cursor-pointer items-center rounded-[5px] p-1 text-base",x.MY.labelGrey7,x.MY.fill4Hover,i),onClick:o,children:a})},tj=e=>{let{ref:t,onInsertRule:l,onCancel:i,className:o,placeholder:r,onSave:d,intentionTag:u,onIntentionTagChange:m,onSaveText:v,disabled:p,onChange:f,value:h,defaultValue:g,...y}=e,{t:C}=(0,a.Bd)("comments"),b=(0,s.useRef)(null),{state:{layoutType:j}}=V(),N=[z.Kc.Discuss,z.Kc.Description].includes(j),w=N&&!g,S=(0,c.xF)("w-full resize-none bg-transparent p-4 text-md outline-0 outline-none dark:bg-transparent min-h-[80px]",x.MY.placeholderLabel4,o),M=(0,s.useCallback)(async()=>{await d()},[d]);return(0,n.jsxs)("div",{className:(0,c.xF)("flex w-full flex-col rounded-[13px]",x.MY.bgLayer2,x.H2.card),ref:b,children:[(0,n.jsx)(tr.A,{disabled:p,value:h,onChange:f,...y,...tv.X,ref:t,placeholder:r||C("typeCommentHere"),className:(0,c.xF)(S,"inherit")}),(0,n.jsxs)("div",{className:"relative box-content flex h-8 items-end p-4",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[N&&w&&(0,n.jsx)(tC,{intentionTag:u,setIntentionTag:m}),(0,n.jsxs)("div",{className:(0,c.xF)("inherit flex h-8 items-end gap-2"),children:[(0,n.jsx)(tb,{onClick:l,icon:(0,n.jsx)(td.G,{}),rule:to.InlineCode}),(0,n.jsx)(tb,{onClick:l,icon:(0,n.jsx)(tu.A,{}),rule:to.Link}),(0,n.jsx)(tb,{onClick:l,icon:(0,n.jsx)(tc,{}),rule:to.Mention})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(tg,{}),i&&(0,n.jsx)(tm.$,{disabled:p,onClick:i,className:(0,c.xF)(ty,x.MY.fill2,x.MY.fill3Hover,"text-label-1 dark:text-white",{"opacity-40":p,"opacty-100":!p}),children:C("cancel")}),(0,n.jsx)(tm.$,{disabled:p||(null==h?void 0:h.trim().length)===0,onClick:M,className:(0,c.xF)(ty,x.MY.bgGreenStandard,x.MY.bgGreen3Hover,x.MY.labelWhite,{"opacity-40":p,"opacty-100":!p}),children:v||C("comment")})]})]})]})};var tN=l(98569);let tw=(0,c.xF)("transition-colors cursor-pointer py-[4px] px-3 rounded-[20px]"),tS=e=>{let{ref:t,onCancel:l,className:s,placeholder:i,onSave:o,onChange:r,onSaveText:d,disabled:u,value:m,...v}=e,{t:p}=(0,a.Bd)("comments"),f=(0,tN.A)(v,["intentionTag","onInsertRule","onIntentionTagChange"]);return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(tr.A,{...f,...tv.X,ref:t,disabled:u,value:m,onChange:r,placeholder:i||p("typeCommentHere"),className:(0,c.xF)("w-full resize-none rounded-[13px] bg-transparent p-2.5 text-sm outline-none dark:bg-transparent",x.MY.bgLayer2,x.H2.card,x.MY.placeholderLabel4,s),rows:1})}),(0,n.jsx)("div",{className:"ml-2 mt-2 flex",children:(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-4",children:[(0,n.jsx)(tg,{}),(0,n.jsx)(tm.$,{onClick:l,disabled:u,className:(0,c.xF)(tw,x.MY.fill3,x.MY.label2,{"opacity-40":u,"opacty-100":!u}),children:p("cancel")}),(0,n.jsx)(tm.$,{onClick:o,disabled:u||(null==m?void 0:m.trim().length)===0,className:(0,c.xF)(tw,x.MY.bgGreenStandard,x.MY.bgGreen3Hover,x.MY.labelWhite,{"opacity-40":u,"opacty-100":!u}),children:d||p("comment")})]})})]})},tM=e=>{switch(e){case ti.Full:return tj;case ti.Slim:return tS;default:return tj}};var tk=l(73593);let tI=new Map([[to.InlineCode,e=>`\`${e}\``],[to.CodeBlock,e=>`\`\`\`${e}\`\`\``],[to.Link,e=>`[${e}](${e})`]]),tA=e=>tI.get(e),tF=e=>!!tI.has(e),tD=e=>{let{rule:t,textareaEle:l,defaultTemplate:n}=e,s=tk.Lo(l),a=n;if(s&&tF(t)){let e=tA(t);a=e?e(s):n}tk.Yr(l,a)},tY=(e,t)=>{tk.Yr(t,e)},t_=e=>{let{className:t,variation:l=ti.Full,disabled:i=!1,value:o,onSave:r,onSaveText:d,topicId:u,placeholder:c,defaultValue:m,innerRef:v,onCancel:p,intentionTag:x,onIntentionTagChange:f,...h}=e,g=(0,s.useCallback)(e=>{f&&f(e)},[f]),{t:y}=(0,a.Bd)("comments"),[C,b]=(0,s.useState)({top:0,left:0,visible:!1}),j=(0,s.useRef)((m||"").length),N=(0,s.useCallback)(e=>{switch(e){case to.InlineCode:return` \`${y("mdRules.inlineCode")}your inline code...\``;case to.CodeBlock:return`
\`\`\`
${y("mdRules.codeBlock")}
\`\`\`
`;case to.Link:return`[${y("mdRules.link")}](${y("mdRules.href")})`;case to.Mention:return" @";default:return""}},[y]),w=e=>{h.onChange(e)},S=()=>{let e=v.current;e&&(j.current=e.selectionEnd)},M=()=>{b({visible:!1,top:0,left:0})},{state:{containerDom:k}}=V(),I=()=>{let e=v.current;if(!e||!k)return;let[t,l]=[5,16],{top:n,left:s}=e4()(e,j.current);b(s+250+t+l>k.clientWidth?{top:n+20,right:0,visible:!0}:{top:n-t,left:s+t,visible:!0})},A=()=>{let e=v.current;e&&(e.focus(),e.selectionEnd=j.current)},F=tM(l);return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(F,{value:o,disabled:i,onInsertRule:e=>{let t=v.current;if(!t)return;let l=N(e);tD({rule:e,textareaEle:t,defaultTemplate:l}),e===to.Mention?setTimeout(()=>I(),0):A()},className:t,ref:v,placeholder:c,onChange:e=>{let{value:t}=e.currentTarget;w(t)},onFocus:()=>{M()},onBlur:()=>{S()},innerRef:v,onKeyDown:e=>{let{key:t,metaKey:l}=e;setTimeout(async()=>{switch(S(),t){case to.Mention:I();break;case"Enter":if(!l)break;await r();break;default:C.visible&&M()}},18)},defaultValue:m,onCancel:p,onSave:r,onSaveText:d,intentionTag:x,onIntentionTagChange:g}),(0,n.jsx)(ta,{mentionInfo:C,topicId:u,hideSelf:()=>{M(),A()},onMentionSelect:e=>{let t=v.current;t&&(t.selectionStart=t.selectionEnd-1,tY(e,t))}})]})},tB=e=>(0,n.jsx)("div",{children:(0,n.jsx)(t_,{...e})});var tT=l(84876),tR=l(31261),tq=l(16564);let tH=e=>{let{content:t}=e,{t:l}=(0,a.Bd)("comments"),[i,o]=(0,s.useState)(!1),[r,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1);(0,b.E)(()=>{setTimeout(()=>{m(((null==r?void 0:r.scrollHeight)||0)>=140)},1)},[r,t]);let v=(0,s.useMemo)(()=>u&&!i,[u,i]),p=(0,s.useCallback)(()=>{m(((null==r?void 0:r.scrollHeight)||0)>=140)},[null==r?void 0:r.scrollHeight]),f=(0,s.useMemo)(()=>(0,tT.A)(p,250),[p]),{width:h}=(0,tR.s)(r);return(0,s.useEffect)(()=>{h&&f()},[h,f]),(0,n.jsx)("div",{className:"flex flex-col items-start",children:(0,n.jsxs)("div",{className:(0,c.xF)("relative w-full",{"overflow-hidden":v,block:!v,"max-h-[140px]":!i,"max-h-full":i}),children:[(0,n.jsx)("div",{className:"px-2.5",ref:d,children:(0,n.jsx)(tq.j,{content:t})}),(0,n.jsx)("div",{className:(0,c.xF)("cursor-pointer",{"absolute top-0 flex h-full w-full items-end bg-gradient-to-t from-[#F2F2F2] dark:from-[#393939]":v,hidden:!v}),onClick:()=>o(!0),children:(0,n.jsx)("div",{className:(0,c.xF)("text-md flex w-full items-center justify-center",x.MY.label2),children:l("readMore")})})]})})};var tL=l(76547),tO=l(49203);let tE=e=>1===e?en.A3.Up:-1===e?en.A3.Down:en.A3.None,tz=e=>{let{commentId:t}=e;return U.zBA.getKey({commentId:t})},tP=(e,t,l)=>{if(!l)return t?e.slice(0,t):e;let n=e.findIndex(e=>e.id===l);return e.slice(0,n+1)},tK=(e,t)=>{let{commentId:l,pageNo:n,numPerPage:s,upToReplyId:a}=e,i=U.zBA.getKey({commentId:l});return(0,U.zBA)(W.nS,{commentId:l},{...t,select:e=>{let{commentReplies:t}=e,l=t||[];if(!(null==l?void 0:l.length))return{total:0,comments:[]};let o=l.map(e=>{var t,l,n,s,a,o,r,d,u,c,m,v,p;return{id:e.id,pinned:e.pinned||!1,content:(0,eK.oS)(e.post.content),pinnedBy:{username:(null===(t=e.pinnedBy)||void 0===t?void 0:t.username)||""},voteCount:e.post.voteUpCount,voteStatus:tE(e.post.voteStatus||0),status:e.post.status,isHidden:e.post.isHidden||!1,postId:e.post.id,creationDate:e.post.creationDate||0,isDiscussAdmin:(null===(l=e.post.author)||void 0===l?void 0:l.isDiscussAdmin)||!1,isDiscussStaff:(null===(n=e.post.author)||void 0===n?void 0:n.isDiscussStaff)||!1,userAvatar:e.post.anonymous?tO.A:(null===(s=e.post.author)||void 0===s?void 0:s.profile.userAvatar)||"",username:(null===(a=e.post.author)||void 0===a?void 0:a.username)||"",realName:(null===(o=e.post.author)||void 0===o?void 0:o.profile.realName)||"Anonymous User",isActive:(null===(r=e.post.author)||void 0===r?void 0:r.isActive)||!1,nameColor:(null===(d=e.post.author)||void 0===d?void 0:d.nameColor)||"",activeBadgeIcon:(null===(c=e.post.author)||void 0===c?void 0:null===(u=c.activeBadge)||void 0===u?void 0:u.icon)||"",activeBadgeName:(null===(v=e.post.author)||void 0===v?void 0:null===(m=v.activeBadge)||void 0===m?void 0:m.displayName)||"",queryKey:i,isOwnPost:e.post.isOwnPost||!1,numChildren:0,ipRegion:"",isOfficialCertification:(null===(p=e.post.author)||void 0===p?void 0:p.profile.certificationLevel)===tL.o.Official}});return{total:o.length,comments:tP(o,void 0!==s?s*(n||1):0,a)}}})},tG=th.l,tV=th.l,tQ=e=>{let{comment:t}=e;return(0,n.jsx)("div",{className:(0,c.xF)("ml-2"),children:(0,n.jsx)(eO,{status:t.status,isHidden:t.isHidden})})},t$=th.l,tU=th.l,tW=e=>({hiddenCls:(0,c.xF)({"opacity-1":!e.isHidden&&e.status!==y.nz.Deleted,"opacity-40":e.isHidden||e.status===y.nz.Deleted}),authorCls:"text-base",CreatedAtCls:"",moreActionsHiddenCls:(0,c.xF)({"opacity-1":!e.isHidden&&e.status!==y.nz.Deleted,"opacity-40":e.isHidden||e.status===y.nz.Deleted})}),tX=e=>(0,c.xF)({"opacity-1":!e.isHidden&&e.status!==y.nz.Deleted,"opacity-40":e.isHidden||e.status===y.nz.Deleted}),tJ=e=>{var t,l,r;let{parentComment:d,comment:v,updateConfirmModal:p,updateReportModal:f}=e,{t:h}=(0,a.Bd)("comments"),{state:{highlightedCommentId:w,layoutType:D,isModerator:Y,panelIsSmall:_,topicId:B,questionSlug:T,isOwnAnonymousPost:R},dispatch:q}=V(),H=w===v.id,L=(0,s.useRef)(null);(0,b.E)(()=>{H&&L.current&&L.current.scrollIntoView()},[H]),(0,b.E)(()=>{if(!w)return;let e=()=>q({type:"highlightedCommentId",payload:void 0});return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[w,q]);let O=tz({commentId:d.id}),{value:E,onEdit:z,onCommentChange:P,isSaving:K}=e0({queryKey:v.queryKey,existingComment:v}),{value:G,onSave:Q,onCommentChange:$,isSaving:U}=e0({queryKey:O,parentComment:d,initialContent:(0,s.useMemo)(()=>`[@${v.realName||v.username}](${F.f0.profile((null==v?void 0:v.userSlug)||v.username)}) `,[v.realName,v.username,v.userSlug])}),W=(0,s.useRef)(null),[X,J]=(0,s.useState)(!1),[Z,ee]=S();(0,s.useEffect)(()=>{Z(X?null:L.current),X&&N(W.current)},[Z,X]);let et=(0,s.useCallback)(async()=>z().then(e=>{let{ok:t}=e;return t&&J(!1),{ok:t}}),[z]),[el,en]=(0,s.useState)(!1),es=(0,s.useRef)(null);(0,s.useEffect)(()=>el?N(es.current):void 0,[el]);let er=(0,s.useCallback)(()=>J(!0),[]),ed=(0,s.useCallback)(()=>J(!1),[]),{isSignedIn:eu}=(0,j.G)(),em=(0,s.useCallback)(()=>{if(!eu){(0,o.K)();return}en(e=>!e),el||m.L.qdReplyCommentClick({qd_version:(0,u.Su)(),qd_question_slug:T??"",qd_comment_pos:ei(D),qd_comment_type:ea.Reply})},[eu,T,el,D]),ep=(0,s.useCallback)(()=>en(!1),[]),{refetch:ex}=tK({commentId:d.id},{enabled:!0}),ef=async()=>{let e=await Q();return e.ok&&(en(!1),ex(),m.L.qdSubmitCommentClick({qd_version:(0,u.Su)(),qd_question_slug:T??"",qd_comment_pos:ei(D),qd_comment_type:ea.Reply,qd_comment_pos_topic_id:String(B)})),e},eg=(0,s.useCallback)(()=>{m.L.qdShareCommentClick({qd_version:(0,u.Su)(),qd_question_slug:T??"",qd_comment_pos:ei(D),qd_comment_type:ea.Reply})},[T,D]),ey=tX(v),eC=!_,eb=v.status!==y.nz.Deleted&&v.isOwnPost&&!Y,{data:ej}=(0,i.Xe)(),eN=(null==ej?void 0:null===(t=ej.userStatus)||void 0===t?void 0:t.name)||(null==ej?void 0:null===(l=ej.userStatus)||void 0===l?void 0:l.username)||"",ew=(null==ej?void 0:null===(r=ej.userStatus)||void 0===r?void 0:r.avatar)||"",eS="max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6 block",eM=(0,C.W)(v.username),ek=tW(v).CreatedAtCls;return X?(0,n.jsxs)("div",{className:"flex w-full gap-2 px-3 pb-2 pt-4",children:[(0,n.jsx)(M.h,{userAvatar:v.userAvatar,username:v.username,imgClassName:eS}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(tB,{value:E,onSave:et,defaultValue:v.content,disabled:K,innerRef:W,topicId:B||0,onChange:P,onSaveText:String(h("edit")),onCancel:ed,variation:ti.Slim,placeholder:h(R?"typeReplyHereAnon":"typeReplyHere")})})]}):(0,n.jsxs)("div",{className:"flex flex-col",ref:L,children:[(0,n.jsxs)("div",{className:(0,c.xF)("flex w-full px-3 pb-2 pt-4 transition-[background] duration-500",{[(0,c.xF)(x.MY.bgBlue0,"rounded-lg")]:H}),children:[(0,n.jsx)("div",{className:"self-start",children:(0,n.jsx)(A.a,{userSlug:v.username,children:(0,n.jsx)("div",{className:"h-min",children:(0,n.jsx)(M.h,{userAvatar:v.userAvatar,username:v.username,imgClassName:(0,c.xF)("mr-2",eS,ey)})})})}),(0,n.jsxs)("div",{className:"flex w-full min-w-0 flex-col",children:[(0,n.jsxs)("div",{className:(0,c.xF)("flex w-full flex-col gap-1 overflow-hidden rounded-[13px]",x.MY.label2,x.MY.fill3),children:[(0,n.jsxs)("div",{className:(0,c.xF)("mt-2.5 flex w-full items-center gap-2 px-2.5",ey),children:[(0,n.jsx)(k.U,{username:v.username,badgeIcon:v.activeBadgeIcon,badgeName:v.activeBadgeName,badgeClassName:(0,c.xF)("ml-1"),realName:v.realName,reputation:v.reputation,userClassName:(0,c.xF)("text-xs font-normal text-sd-muted-foreground"),isOfficialCertification:v.isOfficialCertification,isAnonymous:v.isAnonymous}),(0,n.jsx)("div",{children:(0,n.jsx)(eO,{status:v.status,isHidden:v.isHidden})}),(0,n.jsxs)("div",{className:"flex flex-1 justify-end space-x-2",children:[(0,n.jsx)(tU,{panelIsSmall:_,commentIpRegion:v.ipRegion}),(0,n.jsx)(I.e,{timestamp:v.creationDate,useCalendarIcon:!1,createdAtClassName:(0,c.xF)("justify-end",ek),formattedDateClassName:(0,c.xF)(x.MY.label3,"text-[11px] leading-[13px]")}),(0,n.jsx)(tV,{isMyself:eM,commentStatus:v.status})]})]}),(0,n.jsx)("div",{className:(0,c.xF)(x.MY.label1,"mb-2.5 text-xs",ey),children:(0,n.jsx)(tH,{content:v.content})})]}),(0,n.jsx)("div",{className:(0,c.xF)("mt-4 flex items-center gap-4 text-xs",x.MY.label2),children:(0,n.jsxs)("div",{className:(0,c.xF)("flex items-center gap-4",ey),children:[(0,n.jsx)(eo,{comment:v,trackingCommentType:ea.Reply}),(0,n.jsx)(ec,{showLabel:eC,onClick:em}),(0,n.jsxs)(g.e,{as:"div",className:"flex items-center gap-4 text-xs",show:ee,enter:"transition ease-out duration-200",leave:"transition ease-in duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[(0,n.jsx)(ev,{showLabel:eC,isOwnPost:v.isOwnPost,onClick:er}),(0,n.jsx)(eh,{showLabel:eC,commentId:v.id,parentId:d.id,onShareClick:eg}),eb&&(0,n.jsx)(eP,{comment:v,parentComment:d,updateModal:p}),(0,n.jsx)(eq,{comment:v,isPinnable:!1,updateConfirmModal:p,updateReportModal:f})]})]})})]})]}),el&&(0,n.jsxs)("div",{className:"mt-4 flex px-3",children:[(0,n.jsx)(M.h,{userAvatar:ew,username:eN,imgClassName:(0,c.xF)("mr-2 max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6")}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(tB,{value:G,onSave:ef,disabled:U,innerRef:es,topicId:B||0,onChange:$,onCancel:ep,variation:ti.Slim,onSaveText:h("reply"),placeholder:h(R?"typeReplyHereAnon":"typeReplyHere")})})]})]})};var tZ=l(85298),t0=l(52051);let t1=()=>(0,n.jsx)("div",{className:(0,c.xF)("flex h-full w-full"),children:(0,n.jsxs)(tZ.E,{className:"flex w-full flex-col space-y-5",children:[(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"h-8",children:(0,n.jsx)(t0.R,{className:"!h-full w-8 rounded-full"})}),(0,n.jsxs)("div",{className:"flex w-[80px] flex-col space-y-2",children:[(0,n.jsx)(t0.R,{className:"h-4 w-3/4"}),(0,n.jsx)(t0.R,{className:"h-[14px] w-full"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,n.jsx)(t0.R,{className:"h-4 w-full"}),(0,n.jsx)(t0.R,{className:"h-4 w-1/3"})]})]})}),t4=()=>(0,n.jsx)("div",{className:(0,c.xF)("flex h-full w-full"),children:(0,n.jsxs)(tZ.E,{className:"flex w-full",children:[(0,n.jsxs)("div",{className:"flex w-full space-x-3",children:[(0,n.jsx)("div",{className:"h-6",children:(0,n.jsx)(t0.R,{className:"!h-full w-6 rounded-full"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col space-y-2",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between",children:[(0,n.jsx)(t0.R,{className:"h-3 w-1/3"}),(0,n.jsx)(t0.R,{className:"h-3 w-[80px]"})]}),(0,n.jsx)(t0.R,{className:"h-[12px] w-full"}),(0,n.jsx)(t0.R,{className:"h-[12px] w-2/3"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,n.jsx)(t0.R,{className:"h-3 w-full"}),(0,n.jsx)(t0.R,{className:"h-3 w-1/3"})]})]})}),t2=e=>{let{itemsCount:t}=e,l=Array(t).fill(null);return(0,n.jsx)("div",{className:"flex flex-col gap-8 px-1 py-3",children:l.map((e,t)=>(0,n.jsx)(t1,{},t))})},t3=e=>e,t5=e=>{let{parentComment:t,highlightedReplyId:l,hideReplies:i,updateConfirmModal:o,updateReportModal:r}=e,[d,v]=(0,s.useState)(5),{state:{questionSlug:p,layoutType:f}}=V(),{isInitialLoading:h,data:g}=tK({commentId:t.id,pageNo:1,numPerPage:d,upToReplyId:l}),{comments:y}=g??{};(0,s.useEffect)(()=>v(e=>(null==y?void 0:y.length)?y.length:e),[null==y?void 0:y.length]);let{t:C}=(0,a.Bd)("comments"),b=((null==g?void 0:g.total)||0)>d,j=(0,s.useCallback)(()=>{b&&(v(d+5),m.L.qdExpandCommentClick({qd_version:(0,u.Su)(),qd_question_slug:p??"",qd_comment_pos:ei(f)}))},[d,b,f,p]),N=(0,s.useCallback)(()=>{i(),v(5)},[i]),w=(null==y?void 0:y.map(e=>e.userSlug))??[],{data:S}=(0,eL.hl)(w),M=t3(y,S);return h?(0,n.jsx)("div",{className:"mx-5",children:(0,n.jsx)(t4,{})}):(0,n.jsxs)("div",{className:"flex flex-col",children:[M&&M.map(e=>(0,n.jsx)(tJ,{parentComment:t,comment:e,updateConfirmModal:o,updateReportModal:r},e.id)),(0,n.jsxs)("div",{className:"flex w-full justify-between px-3 pt-2",children:[(0,n.jsx)("div",{onClick:j,className:(0,c.xF)("cursor-pointer text-xs font-medium",x.MY.labelBlueStandard,{flex:b,invisible:!b}),children:C("showMoreReplies")}),(0,n.jsx)("div",{onClick:N,className:(0,c.xF)("group cursor-pointer pb-3 pr-3"),children:(0,n.jsx)(T.a,{icon:eH.p,label:String(C("hide")),labelClassName:(0,c.xF)(x.MY.label1GroupHover),iconClassName:(0,c.xF)("w-4 h-4",x.MY.label1GroupHover)})})]})]})},t7=e=>{let{content:t}=e,{t:l}=(0,a.Bd)("comments"),[i,o]=(0,s.useState)(!1),[r,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),{width:v,height:p}=(0,tR.s)(r);(0,b.E)(()=>{setTimeout(()=>{m(((null==r?void 0:r.scrollHeight)||0)>=230)},1)},[r,t,p]);let f=(0,s.useMemo)(()=>u&&!i,[u,i]),h=(0,s.useCallback)(()=>{m(((null==r?void 0:r.scrollHeight)||0)>=230)},[null==r?void 0:r.scrollHeight]),g=(0,s.useMemo)(()=>(0,tT.A)(h,250),[h]);return(0,s.useEffect)(()=>{v&&g()},[v,g]),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{ref:d,className:(0,c.xF)("relative",{"overflow-hidden":f,block:!f,"max-h-[230px]":!i,"max-h-full":i}),style:f?{maskImage:"linear-gradient(#000, transparent)"}:{},children:(0,n.jsx)(tq.j,{content:t})}),(0,n.jsx)("div",{className:(0,c.xF)("cursor-pointer",{"z-dropdown-2 absolute top-0 flex h-full w-full items-end":f,hidden:!f}),onClick:()=>o(!0),children:(0,n.jsx)("div",{className:(0,c.xF)("text-md flex w-full items-center justify-center",x.MY.label1),children:l("readMore")})})]})};var t6=l(3519);let t8=e=>{let{pinnedBy:t}=e,{t:l}=(0,a.Bd)("comments");return(0,n.jsx)("div",{className:"w-fit",children:(0,n.jsx)(t6.m_,{label:l("pinnedBy",{pinnedBy:t}),isDisabled:!t,children:(0,n.jsxs)("div",{className:(0,c.xF)("text-sd-brand-lc-orange flex items-center gap-1 text-xs"),children:[(0,n.jsx)(R.d,{variant:"12px",padding:"square",icon:B.vJC}),(0,n.jsx)("span",{children:l("pinned")})]})})})},t9=e=>{let{type:t}=e,{state:{tagNamesMap:l}}=V();return(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsx)("div",{className:(0,c.xF)(x.MY.fill3,x.MY.label2,"rounded-[38px] px-2.5 py-0.5 text-xs font-medium"),children:l.get(t)??"Unknown"})})},le=e=>{var t,l,r;let{comment:d,updateConfirmModal:v,updateReportModal:p}=e,{t:f}=(0,a.Bd)("comments"),h=(0,C.W)(d.username),[F,D]=(0,s.useState)(!1),Y=(0,s.useRef)(null),_=(0,s.useRef)(null),B=(0,s.useRef)(null),{state:{topicId:T,highlightedCommentId:R,parentOfHighlightedCommentId:q,layoutType:H,isModerator:L,panelIsSmall:O,questionSlug:E,isOwnAnonymousPost:z},dispatch:P}=V(),[K,G]=(0,s.useState)(!1),[Q,$]=S();(0,s.useEffect)(()=>{Q(K?null:B.current),K&&N(Y.current)},[Q,K]);let U=R===d.id,W=q===d.id,X=R!==d.id?R:void 0,{data:J}=(0,i.Xe)(),Z=(null==J?void 0:null===(t=J.userStatus)||void 0===t?void 0:t.name)||(null==J?void 0:null===(l=J.userStatus)||void 0===l?void 0:l.username)||"",ee=(null==J?void 0:null===(r=J.userStatus)||void 0===r?void 0:r.avatar)||"";(0,b.E)(()=>{U&&_.current&&_.current.scrollIntoView()},[U]),(0,b.E)(()=>{if(!R)return;W&&D(!0);let e=()=>P({type:"highlightedCommentId",payload:void 0});return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[R,W,P]);let[et,el]=(0,s.useState)(!1);(0,s.useEffect)(()=>et?N(Y.current):void 0,[et]);let en=(0,s.useCallback)(()=>{D(!F),F||m.L.qdShowRepliesClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H)}),F&&m.L.qdHideRepliesClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H)})},[F,E,H]),{isSignedIn:es}=(0,j.G)(),er=(0,s.useCallback)(()=>{if(!es){(0,o.K)();return}el(e=>!e),et||m.L.qdReplyCommentClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H),qd_comment_type:ea.Comment})},[es,E,H,et]),eu=(0,s.useCallback)(()=>{D(!1),m.L.qdHideRepliesClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H)})},[H,E]),em=(0,s.useCallback)(()=>el(!1),[]),ep=(0,s.useCallback)(()=>G(!1),[]),{value:ex,onSave:ef,onCommentChange:eg,isSaving:ey}=e0({queryKey:tz({commentId:d.id}),parentComment:d}),{value:eC,onEdit:eb,onCommentChange:ej,isSaving:eN}=e0({queryKey:d.queryKey,existingComment:d}),ew=async()=>{let e=await ef();return e.ok&&(D(!0),el(!1),m.L.qdSubmitCommentClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H),qd_comment_type:ea.Reply,qd_comment_pos_topic_id:String(T)})),e},eS=(0,s.useCallback)(()=>{m.L.qdShareCommentClick({qd_version:(0,u.Su)(),qd_question_slug:E??"",qd_comment_pos:ei(H),qd_comment_type:ea.Comment})},[E,H]),eM=(0,s.useCallback)(()=>G(!0),[]),ek=async()=>eb().then(e=>{let{ok:t}=e;return t&&G(!1),{ok:t}}),eI=tW(d),eA=eI.hiddenCls,eF=(0,w.Fr)(),eD=!eF&&!O,eY=d.status!==y.nz.Deleted&&d.isOwnPost&&!L;return K?(0,n.jsx)("div",{className:(0,c.xF)("border-sd-border border-b px-3 py-4 last:border-none"),children:(0,n.jsx)(tB,{value:eC,onSave:ek,onSaveText:f("save"),defaultValue:d.content,disabled:eN,innerRef:Y,topicId:T||0,onChange:ej,onCancel:ep,variation:ti.Full,placeholder:f(z?"typeCommentHereAnon":"typeCommentHere")})}):(0,n.jsxs)("div",{className:(0,c.xF)("border-sd-border border-b px-1 py-1 transition-[background] duration-500 last:border-none",{[(0,c.xF)(x.MY.bgBlue0,"rounded-lg")]:U}),ref:_,children:[(0,n.jsxs)("div",{className:(0,c.xF)("flex w-full flex-col py-3"),ref:B,children:[(0,n.jsxs)("div",{className:(0,c.xF)("flex w-full items-center gap-3",eA),children:[(0,n.jsx)(A.a,{userSlug:d.username,children:(0,n.jsx)("div",{children:(0,n.jsx)(M.h,{userAvatar:d.userAvatar,username:d.username,imgClassName:"block"})})}),(0,n.jsxs)("div",{className:"flex w-full",children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,n.jsx)(k.U,{realName:d.realName,username:d.username,badgeIcon:d.activeBadgeIcon,badgeName:d.activeBadgeName,reputation:d.reputation,badgeClassName:(0,c.xF)("h-4 w-4 ml-1"),userClassName:(0,c.xF)("font-normal text-sd-muted-foreground",eI.authorCls),isOfficialCertification:d.isOfficialCertification,isAnonymous:d.isAnonymous}),(0,n.jsx)(tQ,{comment:d})]})}),(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-end gap-2",children:[(0,n.jsx)(t$,{commentIpRegion:d.ipRegion,panelIsSmall:O}),d.isEdited&&!O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,c.xF)("h-[3px] w-[3px] rounded",x.MY.fillGray5)}),(0,n.jsx)("span",{className:(0,c.xF)("text-xs leading-[13px]",x.MY.label3),children:f("edited")}),(0,n.jsx)("span",{className:(0,c.xF)("h-[3px] w-[3px] rounded",x.MY.fillGray5)})]}),(0,n.jsx)(I.e,{timestamp:d.creationDate,useCalendarIcon:!1,createdAtClassName:(0,c.xF)("justify-end",eI.CreatedAtCls),formattedDateClassName:(0,c.xF)(x.MY.label3,"text-[11px] leading-[13px]")}),(0,n.jsx)(tG,{isMyself:h,commentStatus:d.status})]})]})]}),(0,n.jsxs)("div",{className:(0,c.xF)("mt-2 flex w-full flex-col",x.MY.label2),children:[d.pinned&&(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(t8,{pinnedBy:d.pinnedBy.username})}),(0,n.jsx)("div",{className:(0,c.xF)(eA),children:(0,n.jsx)(t7,{content:d.content})}),d.intentionTag&&(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsx)(t9,{type:d.intentionTag})}),(0,n.jsx)("div",{className:"mt-4 flex items-center gap-4",children:(0,n.jsxs)("div",{className:(0,c.xF)("flex items-center gap-4 text-xs",eA),children:[(0,n.jsx)(eo,{comment:d,trackingCommentType:ea.Comment}),(0,n.jsx)(ed,{onClick:en,showLabel:eD,showReplies:F,repliesNum:d.numChildren}),(0,n.jsx)(ec,{showLabel:eD,onClick:er}),(0,n.jsxs)(g.e,{as:"div",className:"flex items-center gap-4 text-xs",show:$||eF,enter:"transition ease-out duration-200",leave:"transition ease-in duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[(0,n.jsxs)("div",{className:(0,c.xF)("flex items-center gap-4",eA),children:[(0,n.jsx)(ev,{showLabel:eD,isOwnPost:d.isOwnPost,onClick:eM}),(0,n.jsx)(eh,{showLabel:eD,commentId:d.id,onShareClick:eS}),eY?(0,n.jsx)(eP,{comment:d,updateModal:v}):null]}),(0,n.jsx)(eq,{comment:d,updateConfirmModal:v,updateReportModal:p})]})]})})]})]}),et&&(0,n.jsxs)("div",{className:"mt-3 flex px-3",children:[(0,n.jsx)(M.h,{userAvatar:ee,username:Z,imgClassName:(0,c.xF)("mr-2 max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6")}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(tB,{value:ex,onSave:ew,disabled:ey,innerRef:Y,topicId:T||0,onChange:eg,onCancel:em,variation:ti.Slim,onSaveText:f("reply"),placeholder:f(z?"typeReplyHereAnon":"typeReplyHere")})})]}),F&&(0,n.jsx)(t5,{parentComment:d,highlightedReplyId:X,hideReplies:eu,updateConfirmModal:v,updateReportModal:p})]})},lt=e=>e,ll=e=>{var t,l;let{comments:i,isLoading:o,commentsCountToLoad:r}=e,{t:d}=(0,a.Bd)("comments"),{modal:u,update:m}=(0,p.f)({className:"z-modal",cancelBtnCls:"py-1.5",confirmBtnCls:"py-1.5"}),[v,g]=h(),y=(0,s.useCallback)(()=>g({visible:!1,comment:void 0}),[g]),C=lt(i);return o?(0,n.jsx)(t2,{itemsCount:r}):C&&C.length>0?(0,n.jsxs)("div",{children:[C.map(e=>(0,n.jsx)(le,{comment:e,updateConfirmModal:m,updateReportModal:g},e.id)),u,(0,n.jsx)(f.K,{visible:v.visible,commentId:null===(t=v.comment)||void 0===t?void 0:t.id,postId:null==v?void 0:null===(l=v.comment)||void 0===l?void 0:l.postId,onCancel:y})]}):(0,n.jsx)("div",{className:(0,c.xF)("w-full p-5 text-center",x.MY.label4),children:d("noComments")})};var ln=l(15583);let ls=e=>(0,e5.A)([{value:en.nu.Best,text:e("best")},{value:en.nu.MostVotes,text:e("mostVotes")},{value:en.nu.NewestToOldest,text:e("newestToOldest")}]),la=e=>{let{className:t,sortBy:l,setSortBy:i}=e,{t:o}=(0,a.Bd)("comments"),r=(0,s.useMemo)(()=>ls(o),[o]),d=r.find(e=>e.value===l);return(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)(tp.m,{selected:null==d?void 0:d.value,icon:(0,n.jsx)(tx.g,{}),btnClassName:(0,c.xF)("p-0 bg-transparent dark:bg-transparent hover:bg-transparent dark:hover:bg-transparent active:bg-transparent dark:active:bg-transparent",x.MY.label2),itemsClassName:t,itemClassName:(0,c.xF)("font-normal",x.MY.label2),itemSelectedClassName:(0,c.xF)("font-medium",x.MY.label1),setSelected:e=>{e&&i(e)},items:r,btnText:(0,n.jsxs)("div",{className:(0,c.xF)("text-xs",x.MY.label2),children:[(0,n.jsxs)("span",{className:"mr-2",children:[o("sortBy"),":"]}),(0,n.jsx)("span",{className:(0,c.xF)(x.MY.label1,"font-medium"),children:null==d?void 0:d.text})]})})})},li=e=>{let{total:t,sortBy:l,setSortBy:s}=e,{t:i}=(0,a.Bd)("comments");return(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(ln.Q,{className:(0,c.xF)("h-6 w-6",x.MY.labelGrey6)})}),(0,n.jsxs)("div",{className:(0,c.xF)("flex-1 text-base font-medium",x.MY.label1),children:[i("comments")," (",(0,Y.Ay)(t),")"]}),(0,n.jsx)("div",{children:(0,n.jsx)(la,{sortBy:l,setSortBy:s,className:"right-0"})})]})};var lo=l(79411),lr=l(26394),ld=l(63864),lu=l(85730),lc=function(e){return e.Discussion="discussion",e.OfficialSolution="officialSolution",e}({});let lm=e=>{let t=(0,c.xF)("text-xs font-medium",x.MY.labelBlueStandard);return({officialSolution:{title:"\uD83D\uDCA1 Article Commenting Rules",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["1. This comment section is for questions and comments regarding this ",(0,n.jsx)("b",{children:"LeetCode article"}),". All posts must respect our"," ",(0,n.jsx)(ld.N,{className:t,href:F.f0.communityRules(),isExternal:!0,children:"LeetCode Community Rules"}),"."]}),(0,n.jsxs)("p",{children:["2. Concerns about errors or bugs in the article, problem description, or test cases should be posted on"," ",(0,n.jsx)(ld.N,{className:t,href:F.f0.feedback(),isExternal:!0,children:"LeetCode Feedback"}),", so that our team can address them."]})]})},discussion:{title:"\uD83D\uDCA1 Discussion Rules",content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["1. Please don't post ",(0,n.jsx)("b",{children:"any solutions"})," in this discussion."]}),(0,n.jsx)("p",{children:"2. The problem discussion is for asking questions about the problem or for sharing tips - anything except for solutions."}),(0,n.jsx)("p",{children:"3. If you'd like to share your solution for feedback and ideas, please head to the solutions tab and post it there."})]})}})[e]},lv=e=>{let{title:t,onClose:l,children:s,className:a}=e;return(0,n.jsx)("div",{className:(0,c.xF)("w-full rounded-[13px] border p-4",x.MY.fill4,x.MY.divider4,a),children:(0,n.jsxs)("div",{className:"flex w-full flex-col items-start gap-3",children:[(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)("div",{className:(0,c.xF)("font-medium",x.MY.label1),children:t}),(0,n.jsx)("div",{className:"cursor-pointer",onClick:l,children:(0,n.jsx)(lu.x,{className:(0,c.xF)("h-4 w-4",x.MY.labelGrey6,x.MY.labelGrey7Hover)})})]}),(0,n.jsx)("div",{className:(0,c.xF)("flex w-full flex-col items-start gap-4 text-xs",x.MY.label2),children:s})]})})},lp=e=>{let[t,l]=(0,lo.M)(`${e}CommentingRulesExpiration`,void 0),n=(0,s.useCallback)(()=>{l((0,lr.y)().add(7,"d").valueOf())},[l]);return{isExpired:!!(!t||!(0,lr.y)(Number(t)).isValid())||(0,lr.y)(t).isBefore((0,lr.y)()),setToExpire:n}},lx=e=>{let{discussionType:t,className:l}=e,{isExpired:a,setToExpire:i}=lp(t),o=lm(t),[r,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>d(a),[a]),r)?(0,n.jsx)(lv,{title:o.title,onClose:i,className:l,children:o.content}):null},lf=en.nu.Best,lh=e=>{let{topicId:t,orderBy:l=lf,pageNo:n=1,numPerPage:s=10}=e;return U.Wg6.getKey({topicId:t,orderBy:l,pageNo:n,numPerPage:s})},lg=(e,t)=>{let{isDiscuss:l,topicId:n,orderBy:s=lf,pageNo:a=1,numPerPage:i=10}=e,{enabled:o}=t,r=U.Wg6.getKey({topicId:n,pageNo:a,numPerPage:i,orderBy:s});return(0,U.Wg6)(W.nS,{topicId:n,pageNo:a,numPerPage:i,orderBy:s},{enabled:o,select:e=>{let{topicComments:t}=e,{data:n,totalNum:s}=t||{};return n?{total:s||0,comments:n.map(e=>{var t,n,s,a,i,o,d,u,c,m,v,p,x,f;return{id:e.id,pinned:e.pinned||!1,content:(0,eK.oS)(e.post.content),pinnedBy:{username:(null===(t=e.pinnedBy)||void 0===t?void 0:t.username)||""},postId:e.post.id,voteCount:e.post.voteUpCount,voteStatus:tE(e.post.voteStatus||0),status:e.post.status,isHidden:e.post.isHidden||!1,creationDate:e.post.creationDate||0,isDiscussAdmin:(null===(n=e.post.author)||void 0===n?void 0:n.isDiscussAdmin)||!1,isDiscussStaff:(null===(s=e.post.author)||void 0===s?void 0:s.isDiscussStaff)||!1,userAvatar:e.post.anonymous?tO.A:(null===(a=e.post.author)||void 0===a?void 0:a.profile.userAvatar)||"",username:(null===(i=e.post.author)||void 0===i?void 0:i.username)||"",realName:(null===(o=e.post.author)||void 0===o?void 0:o.profile.realName)||"Anonymous User",isAnonymous:e.post.anonymous,isActive:(null===(d=e.post.author)||void 0===d?void 0:d.isActive)||!1,nameColor:(null===(u=e.post.author)||void 0===u?void 0:u.nameColor)||"",activeBadgeIcon:(null===(m=e.post.author)||void 0===m?void 0:null===(c=m.activeBadge)||void 0===c?void 0:c.icon)||"",activeBadgeName:(null===(p=e.post.author)||void 0===p?void 0:null===(v=p.activeBadge)||void 0===v?void 0:v.displayName)||"",queryKey:r,isOwnPost:e.post.isOwnPost||!1,numChildren:e.numChildren,intentionTag:l?null===(x=e.intentionTag)||void 0===x?void 0:x.slug:void 0,ipRegion:"",isOfficialCertification:(null===(f=e.post.author)||void 0===f?void 0:f.profile.certificationLevel)===tL.o.Official}})}:{total:s||0,comments:[]}}})},ly=(e,t)=>{let{topicId:l=0,commentId:n=0,orderBy:s}=e;return(0,U.eOW)(W.nS,{topicId:l,commentId:n,orderBy:s},{...t,select:e=>{if(!(null==e?void 0:e.commentContext))return D.i.error("Comment has been deleted or doesn't exist in this topic."),null;let{pageNo:t,parentId:l}=JSON.parse(e.commentContext);return{pageNo:Number(t),parentCommentId:Number(l)}}})};var lC=l(57599);let lb=e=>{var t,l,p,x,f;let{topicId:h,commentCount:g,commentId:y,layoutType:C,hideComments:b,uniqueKey:j,className:N,scrollToCommentsOnLoad:w,disableComment:S}=e,M=(0,s.useRef)(null),{t:k}=(0,a.Bd)("comments"),{state:I,dispatch:A}=V(),{topicId:F,isModerator:D,highlightedCommentId:Y,parentOfHighlightedCommentId:_,content:B,intentionTag:T,containerDom:R,questionSlug:q,isOwnAnonymousPost:H}=I,L=(0,z.IP)(e=>e.setCommentsTopAnchor);(0,s.useEffect)(()=>A({type:"layoutType",payload:C}),[A,C]);let O=null===(l=(0,i.Xe)())||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.userStatus,E=null===(f=(0,i.Xe)())||void 0===f?void 0:null===(x=f.data)||void 0===x?void 0:null===(p=x.userStatus)||void 0===p?void 0:p.isSignedIn,P=!!(null==O?void 0:O.isAdmin),[K,G]=(0,s.useState)(en.nu.Best),Q=(0,s.useCallback)(e=>{m.L.qdSortCommentClick({qd_version:(0,u.Su)(),qd_question_slug:q??"",qd_sort_type:e,qd_comment_pos:ei(C)}),G(e)},[q,C]),[$,U]=(0,s.useState)(1),W={topicId:h,orderBy:K,pageNo:$,numPerPage:10},X=lh(W),J=C===z.Kc.Description,Z=C===z.Kc.Discuss||J,ee=(0,v.v)({domElement:R,threshold:475});(0,s.useEffect)(()=>A({type:"panelIsSmall",payload:ee}),[A,ee]);let{value:et,onSave:el,onCommentChange:es,isSaving:eo,intentionTag:er,onIntentionTagChange:ed}=e0({queryKey:X,initialContent:Z?B:void 0,initialIntentionTag:Z?T:void 0,saveDraft:Z,setPageNo:U}),eu=!!(h&&!b&&0!==g),{data:ec,isInitialLoading:em}=lg({...W,isDiscuss:Z},{enabled:eu}),{data:ev}=ly({commentId:y,orderBy:K,topicId:h},{enabled:!!(y&&eu)}),ep=(0,s.useRef)(null),ex=(0,s.useRef)(null),ef=(0,lC.V)(e=>e.discussionDom),eh=(0,s.useCallback)(e=>{var t;U(e),null===(t=ex.current)||void 0===t||t.scrollIntoView()},[]);(0,s.useEffect)(()=>{!w||em||C!==z.Kc.Description||y||null==ef||ef.scrollIntoView()},[w,em,ef,C,y]),(0,s.useEffect)(()=>{D!==P&&A({type:"isModerator",payload:P}),Y!==y&&A({type:"highlightedCommentId",payload:y}),_!==y&&A({type:"parentOfHighlightedCommentId",payload:y}),_!==(null==ev?void 0:ev.parentCommentId)&&A({type:"parentOfHighlightedCommentId",payload:null==ev?void 0:ev.parentCommentId})},[h,F,P,D,ev]),(0,s.useEffect)(()=>{ev&&U(ev.pageNo)},[ev]);let eg=(null==ec?void 0:ec.total)??g??0,ey=Math.min(eg-($-1)*10,10),eC=(0,d._)(async()=>E?el().then(e=>{let{ok:t}=e;return t&&m.L.qdSubmitCommentClick({qd_version:(0,u.Su)(),qd_question_slug:q??"",qd_comment_pos:ei(C),qd_comment_type:ea.Comment,qd_comment_pos_topic_id:String(h)}),{ok:t}}):((0,o.K)(),Promise.resolve({ok:!1})));return(0,s.useLayoutEffect)(()=>{A({type:"containerDom",payload:ep.current}),j&&L(j,ex.current)},[A,j,L]),(0,n.jsxs)("div",{className:(0,c.xF)("flex h-full flex-col px-4",{"px-1":J},N),ref:ep,children:[!Z&&(0,n.jsx)(li,{total:eg,sortBy:K,setSortBy:Q}),!S&&(0,n.jsx)("div",{className:(0,c.xF)("mt-3"),children:(0,n.jsx)(tB,{value:et,disabled:eo,onSave:eC,topicId:h,innerRef:M,onChange:es,variation:ti.Full,intentionTag:er,onIntentionTagChange:ed,placeholder:k(H?"typeCommentHereAnon":"typeCommentHere")})}),Z&&(0,n.jsxs)("div",{className:(0,c.xF)("mt-3"),children:[(0,n.jsx)(lx,{discussionType:lc.Discussion,className:"mb-3"}),(0,n.jsx)("div",{className:"pt-3",children:(0,n.jsx)(la,{sortBy:K,setSortBy:Q,className:"left-0"})})]}),C===z.Kc.OfficialSolution&&(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(lx,{discussionType:lc.OfficialSolution})}),(0,n.jsx)("div",{className:"mt-4 flex-1",ref:ex,children:(0,n.jsx)(ll,{comments:null==ec?void 0:ec.comments,commentsCountToLoad:ey,isLoading:em})}),eg>0&&(0,n.jsx)("div",{className:(0,c.xF)("mb-4 mt-7 flex justify-center pb-4"),children:(0,n.jsx)(r.d,{disabled:em||eo,currentPage:$,totalItems:eg,maxPageItems:ee?$<99?6:5:void 0,itemsPerPage:10,onChange:eh,pageItemClassName:"text-sm",chevronClassName:"w-4 h-4",arrowButtonClassName:"px-2"})})]})},lj=e=>{let t={...K,topicId:e.topicId,topicSlug:e.topicSlug,questionSlug:e.questionSlug,layoutType:e.layoutType,isOwnAnonymousPost:e.isOwnAnonymousPost};return(0,n.jsx)(Q,{value:t,children:(0,n.jsx)(lb,{...e})})}},91023:(e,t,l)=>{l.d(t,{IP:()=>i,Kc:()=>a});var n=l(44745),s=l(87134),a=function(e){return e.Discuss="Discuss",e.Solution="Solution",e.OfficialSolution="OfficialSolution",e.Description="Description",e.MarkdownGuide="MarkdownGuide",e.DiscussPost="DiscussPost",e}({});let i=(0,n.vt)((0,s.kg)({commentsTopAnchorMap:{}},(e,t)=>({setCommentsTopAnchor:(t,l)=>e(e=>({...e,commentsTopAnchorMap:{...e.commentsTopAnchorMap,[t]:l}})),scrollToCommentListTop:e=>{var l;null===(l=t().commentsTopAnchorMap[e])||void 0===l||l.scrollIntoView({behavior:"smooth"})}})))},57599:(e,t,l)=>{l.d(t,{V:()=>a});var n=l(44745),s=l(87134);let a=(0,n.vt)((0,s.kg)({containerDom:null,discussionDom:null,openDiscussionAccordion:!1,openTopics:!1,topicsDom:null,openCompanies:!1,companiesDom:null,openHints:!1,hintsDom:null},e=>({setContainerDom:t=>e(e=>({...e,containerDom:t})),setDiscussionDom:t=>e(e=>({...e,discussionDom:t})),setOpenDiscussionAccordion:t=>e(e=>"function"==typeof t?{...e,openDiscussionAccordion:t(e.openDiscussionAccordion)}:{...e,openDiscussionAccordion:t}),setOpenTopics:t=>e(e=>({...e,openTopics:t})),setTopicsDom:t=>e(e=>({...e,topicsDom:t})),setOpenCompanies:t=>e(e=>({...e,openCompanies:t})),setCompaniesDom:t=>e(e=>({...e,companiesDom:t})),setOpenHints:t=>e(e=>({...e,openHints:t})),setHintsDom:t=>e(e=>({...e,hintsDom:t}))})))},16564:(e,t,l)=>{l.d(t,{j:()=>o});var n=l(74848),s=l(96540),a=l(98031);let i=(0,l(14939).T)({highlight:!0,gfm:!0,math:!0,html:!0,mcqs:a.L4,diaporama:a.L4,attrs:!0,embedVideos:a.L4,normalVideo:!0,groupedCode:!0,relAttribute:!0,httpsImagesOnly:!0,premiumOnlyVideo:a.L4,htmlSanitization:!0,preserveLineBreaks:!0,nodebbImageTransformation:a.L4,brokenImageHolder:!0,linkSift:a.Gp,linkTargetBlank:!0,aliPlayerVideo:a.Gp,slides:a.Gp,toc:!0,customComponent:!0}),o=(0,s.memo)(e=>{let{content:t}=e;return t?(0,n.jsx)(i,{content:t}):null})},54983:(e,t,l)=>{l.d(t,{a:()=>i});var n=l(74848),s=l(82479),a=l(36768);let i=e=>{let{className:t,onClick:l,icon:i,iconClassName:o,label:r,labelClassName:d,onIconClick:u,disabled:c}=e;return(0,n.jsxs)("div",{className:(0,s.xF)("flex items-center gap-1",t),onClick:l,children:[void 0!==i&&(0,n.jsx)(i,{onClick:c?void 0:u,className:(0,s.xF)("h-4 w-4",{"pointer-events-none":c},o)}),void 0!==r&&(0,n.jsx)("div",{className:(0,s.xF)(a.MY.label2,"text-xs",d),children:r})]})}},10379:(e,t,l)=>{l.d(t,{n:()=>v,o:()=>m});var n=l(74848),s=l(37458),a=l(27930),i=l(96540),o=l(82479),r=l(70354),d=l(25954),u=l(85478),c=l(36768);let m=e=>{let{onClick:t,className:l,children:a}=e;return(0,n.jsx)(s.W1.Item,{as:"div",onClick:t,className:(0,o.xF)("text-md w-full cursor-pointer select-none rounded px-3 py-[5px]",c.MY.label2,c.MY.label1Hover,c.MY.fill3Hover,l),children:a})},v=e=>{var t;let{children:l,btnClassName:m,iconClassName:v,placement:p="top"}=e,x=null===(t=(0,r.Xe)().data)||void 0===t?void 0:t.userStatus,f=(null==x?void 0:x.isAdmin)?d.k:u.f;return(0,n.jsxs)(s.W1,{as:"div",className:"relative",children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.W1.Button,{className:(0,o.xF)(c.MY.label1Hover,"flex h-6 w-6 cursor-pointer items-center justify-center rounded-md",m),children:(0,n.jsx)(f,{className:(0,o.xF)(c.MY.labelGrey6,c.MY.labelGrey7Hover,"h-5 w-5",v)})})}),(0,n.jsx)(a.e,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(s.W1.Items,{style:{zIndex:30},className:(0,o.xF)(c.MY.bgLayer3,c.MY.divider4,c.H2.card,"absolute right-0 min-w-[200px] rounded-lg p-2 outline-none",{"top-8":"bottom"===p,"bottom-8":"top"===p,"right-unset bottom-8  left-0":"top-left"===p}),children:(0,n.jsx)("div",{children:l})})})]})}},88032:(e,t,l)=>{l.d(t,{h:()=>v});var n=l(74848),s=l(72556),a=l(15314),i=l(64011),o=l(63864),r=l(82479),d=l(22331),u=l(72187),c=l(15440);let m=e=>{let{isAnonymous:t,children:l,className:s,...a}=e;return t?(0,n.jsx)("div",{className:s,children:l}):(0,n.jsx)(o.N,{className:s,...a,children:l})},v=e=>{let{userAvatar:t,username:l,imgClassName:o,dontTriggerParentClickEvent:v,clickable:p=!0}=e,x=(0,n.jsx)(a.e,{src:t,alt:"",className:"h-full w-full rounded-full"}),f=(0,r.xF)("h-8 min-h-[32px] w-8 min-w-[32px]",o),h=["",""].includes(l),g=(0,i.j_)(e=>e.questionSlug),y=(0,s._)(e=>{c.L.qdEnterAuthorProfileClick({qd_version:(0,d.Su)(),qd_question_slug:g,qd_post_article_author:l}),v&&e.stopPropagation()});return p?(0,n.jsx)(m,{isAnonymous:h,className:f,href:u.f0.profile(l),onClick:y,isExternal:!0,children:x}):(0,n.jsx)("div",{className:f,children:x})}},47439:(e,t,l)=>{l.d(t,{U:()=>g});var n=l(74848),s=l(15685),a=l(84038),i=l(3519),o=l(76033),r=l(72556),d=l(63864),u=l(36768),c=l(15440),m=l(82479),v=l(22331),p=l(72187),x=l(64011),f=l(70354);let h=e=>{let{isAnonymous:t,children:l,className:s,...a}=e;return t?(0,n.jsx)("div",{className:s,children:l}):(0,n.jsx)(d.N,{className:s,...a,children:l})},g=e=>{var t,l;let{realName:d,username:g,badgeIcon:y,badgeName:C,isLink:b=!0,badgeClassName:j,userClassName:N,dontTriggerParentClickEvent:w,isOfficialCertification:S,isAnonymous:M}=e,{t:k}=(0,a.Bd)("common"),I=(0,x.j_)(e=>e.isDynamicLayout),A=(0,m.xF)(u.rJ.labelTextSecondary,"text-sm font-medium overflow-hidden max-w-[100px] md:max-w-[200px] text-ellipsis",{"max-w-[200px]":!I}),F=(0,x.j_)(e=>e.questionSlug),D=(0,r._)(e=>{c.L.qdEnterAuthorProfileClick({qd_version:(0,v.Su)(),qd_question_slug:F,qd_post_article_author:g}),w&&e.stopPropagation()}),Y=["",""].includes(g),_=(null===(l=(0,f.Xe)().data)||void 0===l?void 0:null===(t=l.userStatus)||void 0===t?void 0:t.isAdmin)&&M?`${d||g}`:d||g;return(0,n.jsxs)("div",{className:"flex items-center gap-1 truncate",translate:"no",children:[b?(0,n.jsx)(h,{isAnonymous:Y,onClick:D,href:p.f0.profile(g),className:(0,m.xF)(A,"truncate",{[u.FY.labelBlueS]:!Y},N),isExternal:!0,children:_}):(0,n.jsx)("div",{className:(0,m.xF)(A,N),children:_}),S&&(0,n.jsx)(i.m_,{label:k("verified"),placement:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(o.d,{variant:"14px",padding:"none",icon:s.Zsp,className:(0,m.xF)("text-sd-blue-500")})})}),y&&C&&(0,n.jsx)(i.m_,{label:C,placement:"top",children:(0,n.jsx)("div",{className:(0,m.xF)("h-3.5 w-3.5",j),children:(0,n.jsx)("img",{src:y,alt:C,className:"h-full w-full"})})})]})}},20159:(e,t,l)=>{l.d(t,{e:()=>r});var n=l(74848),s=l(82479),a=l(95010),i=l(11690),o=l(36768);let r=e=>{let{timestamp:t,useCalendarIcon:l=!0,createdAtClassName:r,formattedDateClassName:d,iconClassName:u,needDetailTooltip:c}=e;return(0,n.jsxs)("div",{className:(0,s.xF)("flex items-center gap-1.5",r),children:[l&&(0,n.jsx)(i._,{className:(0,s.xF)(o.MY.labelGrey5,"h-4 w-4",u)}),(0,n.jsx)("div",{className:(0,s.xF)(o.MY.label3,"min-w-max text-xs",d),children:(0,n.jsx)(a.X,{datetime:t<1e10?1e3*t:t,needDetailTooltip:c})})]})}},37410:(e,t,l)=>{l.d(t,{K:()=>F});var n=l(74848),s=l(96540),a=l(40961),i=l(73294),o=l(84038),r=l(82479),d=l(27064),u=l(53882),c=l(18007),m=l(85730),v=l(36768),p=l(71176),x=l(35593),f=l(86474),h=l(9640);let g={[f.Icc.Advertising]:x.WJh.Advertising,[f.Icc.Sexual]:x.WJh.Sexual,[f.Icc.Violent]:x.WJh.Violent,[f.Icc.Fake]:x.WJh.Fake,[f.Icc.Illegal]:x.WJh.Illegal,[f.Icc.Other]:x.WJh.Other,[f.Icc.Politics]:x.WJh.Politics,[f.Icc.NonEnglish]:x.WJh.NonEnglish,[f.Icc.Terrorism]:x.WJh.Terrorism,[f.Icc.Abuse]:x.WJh.Abuse,[f.Icc.All]:x.WJh.Other},y=e=>g[e]??x.WJh.Other;f.Icc.Advertising,f.Icc.Sexual,f.Icc.Violent,f.Icc.Terrorism,f.Icc.Politics,f.Icc.Fake,f.Icc.Illegal,f.Icc.Other;let C=()=>{let{mutateAsync:e,isLoading:t}=(0,x.fxN)(h.nS);return{mutateAsync:t=>e(t).then(e=>e.flagPost),isLoading:t}},b=()=>{let{mutateAsync:e,isLoading:t}=(0,x.nX9)(h.nS);return{mutateAsync:t=>{let l=y(t.flagType),n=t.content;return e({articleId:t.articleId??"",reportType:l,reason:n}).then(e=>e.ugcArticleAddReport)},isLoading:t}};var j=l(23918),N=l(51559);let w=e=>{let{value:t,label:l}=e;return(0,n.jsx)(i.z6.Option,{value:t,as:s.Fragment,children:e=>{let{checked:t}=e;return(0,n.jsx)("div",{className:(0,r.xF)("flex w-full cursor-pointer flex-col py-2",v.MY.label2,v.MY.label1Hover),children:(0,n.jsxs)("div",{className:(0,r.xF)("flex items-center justify-between"),children:[(0,n.jsx)("span",{children:l}),t&&(0,n.jsx)(c.i,{className:(0,r.xF)("h-4 w-4",v.MY.labelGrey6)})]})})}})},S=e=>[[j.Ic.Advertising,e("advertising")],[j.Ic.Sexual,e("sexual")],[j.Ic.Violent,e("violent")],[j.Ic.Terrorism,e("terrorism")],[j.Ic.Illegal,e("illegal")],[j.Ic.Abuse,e("abuse")],[j.Ic.NonEnglish,e("nonEnglish")],[j.Ic.Other,e("other")]],M=()=>null,k={headerBorder:(0,r.xF)(v.MY.dividerBorder2,"border-b"),radioGroup:"flex-col",textArea:""},I=e=>e.postId??0,A=e=>!!e,F=e=>{let{visible:t,onCancel:l,articleId:c,postId:x}=e,{t:f}=(0,o.Bd)("solutions",{keyPrefix:"report"}),[h,g]=(0,s.useState)(null),[y,F]=(0,s.useState)(""),{mutateAsync:D,isLoading:Y}=b(),{mutateAsync:_,isLoading:B}=C(),T=null===h||h===j.Ic.Other&&0===y.trim().length,R=S(f);(0,s.useEffect)(()=>{t&&(F(""),g(null))},[t]);let q=(0,s.useCallback)(()=>{let t=h===j.Ic.Other?y:"";(A(x)?_:D)({postId:I(e)??x,flagType:h,content:t??void 0,articleId:c}).then(e=>{if(!(null==e?void 0:e.ok)){N.i.error(f("reportError"),{itemClassName:v.MY.bgLayer3});return}N.i.success(f("reportSuccess"),{itemClassName:v.MY.bgLayer3}),l()})},[h,y,x,_,D,e,c,f,l]);return(0,a.createPortal)((0,n.jsxs)(d.a,{visible:t,onCancel:l,closable:!1,maskClosable:!0,className:(0,r.xF)("w-[480px] p-0 text-base",v.MY.bgLayer2),modalClassName:(0,r.xF)("z-modal-9"),children:[(0,n.jsxs)("div",{className:(0,r.xF)("flex items-center px-6 py-4 text-lg font-medium",v.MY.label1,k.headerBorder),children:[f("reportModalTitle"),(0,n.jsx)("button",{onClick:l,className:(0,r.xF)("ml-auto cursor-pointer rounded transition-all",v.MY.fill3Hover),children:(0,n.jsx)(m.x,{className:(0,r.xF)("h-6 w-6",v.MY.labelGrey6)})})]}),(0,n.jsxs)("div",{className:(0,r.xF)("px-6 py-2 text-xs"),children:[(0,n.jsx)(i.z6,{value:h,onChange:g,className:(0,r.xF)("flex flex-wrap",k.radioGroup),children:R.map(e=>{let[t,l]=e;return(0,n.jsx)(w,{value:t,label:l},t)})}),h===j.Ic.Other&&(0,n.jsx)(p.T,{className:(0,r.xF)("h-[90px] rounded-lg px-3 py-2 text-sm focus:border-transparent",v.MY.fill4,v.MY.placeholderLabel4,v.MY.label1,k.textArea),placeholder:f("contentPlaceholder"),value:y,onChange:F,autoSize:!0})]}),(0,n.jsx)(M,{}),(0,n.jsxs)("div",{className:(0,r.xF)("flex justify-end gap-4 p-4 text-sm"),children:[(0,n.jsx)(u.$,{onClick:l,className:"rounded-lg px-4 py-1.5",children:f("cancel")}),(0,n.jsx)(u.$,{variant:"primary",disabled:T,loading:Y||B,onClick:q,className:"rounded-lg px-4 py-1.5",children:f("confirm")})]})]}),document.querySelector("#modal-root"))}},35625:(e,t,l)=>{l.d(t,{H:()=>r});var n=l(4215),s=l(44745),a=l(87134),i=l(43402);let o={query:"",languageTags:[],topicTags:[],isSelectedMySolutionTag:!1,orderBy:void 0,page:1,perPage:15},r=(0,s.vt)((0,a.eh)((0,a.kg)({...o,tagNamesMap:{}},e=>({updateFilters:t=>e(e=>{let{page:l,...n}=t,s={...e,...n,page:void 0===l?1:l};return(0,i.x)(e,t)?e:s}),setTagNamesMap:t=>e(e=>({...e,tagNamesMap:(0,n.A)(t.map(e=>[e.slug,e.name]))})),resetFilters:()=>e(e=>({...e,...o}))}))))},36766:(e,t,l)=>{l.d(t,{N:()=>i});var n=l(44745),s=l(87134),a=l(43402);let i=(0,n.vt)((0,s.eh)((0,s.kg)({questionSlug:"",topicId:void 0,topicTitleSlug:void 0,commentId:void 0},e=>({setQuestionSlug:t=>e(e=>({...e,questionSlug:t})),update:t=>e(e=>(0,a.x)(e,t)?e:{...e,...t}),reset:()=>e(e=>({...e,topicId:void 0,topicTitleSlug:void 0,commentId:void 0}))}))))},25573:(e,t,l)=>{l.d(t,{c:()=>d,t:()=>u});var n=l(18122),s=l(96540),a=l(71647),i=l(77961),o=l(35625);let r=["query","languageTags","topicTags","orderBy","page","perPage"],d=()=>{let e=(0,a.c)()?(0,i.N)(localStorage.getItem("solutionOrderBy")):void 0,t=(0,o.H)(t=>(0,n.A)({...t,orderBy:t.orderBy||e},r)),l=(0,o.H)(e=>e.page),d=(0,o.H)(e=>e.updateFilters);return{filters:t,page:l,onPageChange:(0,s.useCallback)(e=>d({page:e}),[d])}},u=()=>(0,n.A)(o.H.getState(),r)},24516:(e,t,l)=>{l.d(t,{K:()=>i,l:()=>o});var n=l(35593),s=l(86474),a=l(9640);let i=(e,t)=>{e.invalidateQueries(s.jfv.getKey({slugs:[t]}))},o=e=>(0,n.XO0)(a.nS,{username:e})},78799:(e,t,l)=>{l.d(t,{d:()=>o,s:()=>r});var n=l(35593),s=l(86474),a=l(9640),i=l(76547);let o=(e,t)=>(0,s.Qmq)(a.nS,{userSlug:e},t),r=(e,t)=>(0,n.dk5)(a.nS,{username:e},{...t,select:e=>{if(!e.matchedUser)return null;let{profile:t,username:l,contestBadge:n,githubUrl:s,twitterUrl:a,linkedinUrl:o}=e.matchedUser;return{username:l,githubUrl:s||"",twitterUrl:a||"",linkedinUrl:o||"",contestBadge:{name:(null==n?void 0:n.name)||"",icon:(null==n?void 0:n.icon)||"",expired:!!(null==n?void 0:n.expired),hoverText:(null==n?void 0:n.hoverText)||""},userAvatar:(null==t?void 0:t.userAvatar)||"",ranking:(null==t?void 0:t.ranking)||0,realName:(null==t?void 0:t.realName)||"",aboutMe:(null==t?void 0:t.aboutMe)||"",school:(null==t?void 0:t.school)||"",websites:(null==t?void 0:t.websites)||[],countryName:(null==t?void 0:t.countryName)||"",company:(null==t?void 0:t.company)||"",jobTitle:(null==t?void 0:t.jobTitle)||"",skillTags:(null==t?void 0:t.skillTags)||[],postViewCount:(null==t?void 0:t.postViewCount)||0,postViewCountDiff:(null==t?void 0:t.postViewCountDiff)||0,reputation:(null==t?void 0:t.reputation)||0,reputationDiff:(null==t?void 0:t.reputationDiff)||0,solutionCount:(null==t?void 0:t.solutionCount)||0,solutionCountDiff:(null==t?void 0:t.solutionCountDiff)||0,categoryDiscussCount:(null==t?void 0:t.categoryDiscussCount)||0,categoryDiscussCountDiff:(null==t?void 0:t.categoryDiscussCountDiff)||0,isOfficialCertification:(null==t?void 0:t.certificationLevel)===i.o.Official}}})},5559:(e,t,l)=>{l.d(t,{K:()=>i});var n=l(74848),s=l(72187),a=l(51559);let i=()=>{a.i.warn((0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"Please "}),(0,n.jsx)("a",{href:s.f0.register(),className:"text-sd-blue-400",children:"Register"}),(0,n.jsx)("span",{children:" or "}),(0,n.jsx)("a",{href:s.f0.signIn(),className:"text-sd-blue-400",children:"Sign in"}),(0,n.jsx)("span",{children:"."})]}))}},93031:(e,t,l)=>{l.d(t,{a:()=>N});var n=l(74848),s=l(21308),a=l(78799);l(96540);var i=l(47197),o=l(82479);let r=i.bL,d=i.l9,u=e=>{let{ref:t,className:l,align:s="center",sideOffset:a=8,collisionPadding:r=8,...d}=e;return(0,n.jsx)(i.UC,{ref:t,align:s,sideOffset:a,collisionPadding:r,className:(0,o.xF)("bg-sd-popover text-sd-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-sd-md border-sd-border z-modal border p-4 shadow-md outline-none",l),...d})};u.displayName=i.UC.displayName;let c=e=>{let{defaultOpen:t,open:l,onOpenChange:s,openDelay:a,closeDelay:i,children:o,content:c,...m}=e;return(0,n.jsxs)(r,{defaultOpen:t,open:l,onOpenChange:s,openDelay:a,closeDelay:i,children:[(0,n.jsx)(d,{asChild:!0,children:o}),(0,n.jsx)(u,{...m,children:c})]})};var m=l(9935),v=l(47557),p=l(24516),x=l(15685),f=l(84038),h=l(3519),g=l(76033);let y=e=>{let{realName:t,username:l,badgeIcon:s,badgeName:a,badgeClassName:i,userClassName:r,isOfficialCertification:d}=e,{t:u}=(0,f.Bd)("common");return(0,n.jsxs)("div",{className:"flex items-center gap-1 truncate",translate:"no",children:[(0,n.jsx)("div",{className:(0,o.xF)("text-sd-foreground max-w-[100px] overflow-hidden text-ellipsis text-base font-semibold md:max-w-[200px]",r),children:t||l}),d&&(0,n.jsx)(h.m_,{label:u("verified"),placement:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(g.d,{variant:"14px",padding:"none",icon:x.Zsp,className:(0,o.xF)("text-sd-blue-500")})})}),s&&a&&(0,n.jsx)(h.m_,{label:a,placement:"top",children:(0,n.jsx)("div",{className:(0,o.xF)("h-3.5 w-3.5",i),children:(0,n.jsx)("img",{src:s,alt:a,className:"h-full w-full"})})})]})},C=()=>(0,n.jsx)("div",{className:"flex h-[118px] items-center justify-center",children:(0,n.jsx)(v.R,{})}),b=e=>{let{name:t,value:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs",children:t}),(0,n.jsx)("div",{className:"text-sd-foreground text-base font-semibold",children:l})]})},j=e=>{var t,l,i;let{userSlug:o}=e,{data:r,isInitialLoading:d}=(0,a.s)(o),u=null===(i=(0,p.l)(o))||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:null===(t=l.matchedUser)||void 0===t?void 0:t.activeBadge;return d?(0,n.jsx)(C,{}):r?(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(m.T,{src:r.userAvatar,alt:"",className:"h-[60px] w-[60px] overflow-hidden rounded-md object-cover"}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)(y,{realName:r.realName,username:r.username,badgeIcon:(null==u?void 0:u.icon)||"",badgeName:(null==u?void 0:u.name)||"",reputation:r.reputation,isOfficialCertification:r.isOfficialCertification}),(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs",children:r.username})]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs font-semibold",children:"Rank"}),(0,n.jsx)("div",{className:"text-sd-green-500 text-xs font-semibold",children:(0,s.Ay)(r.ranking)})]})]})]}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(b,{name:"Views",value:(0,s.Ay)(r.postViewCount)}),(0,n.jsx)(b,{name:"Votes",value:(0,s.Ay)(r.reputation)}),(0,n.jsx)(b,{name:"Discuss",value:(0,s.Ay)(r.categoryDiscussCount)}),(0,n.jsx)(b,{name:"Solution",value:(0,s.Ay)(r.solutionCount)})]})]}):null},N=e=>{let{userSlug:t,children:l}=e;return t?(0,n.jsx)(c,{className:"bg-sd-card w-[310px] border-none p-4 shadow-lg",content:(0,n.jsx)(j,{userSlug:t}),openDelay:200,align:"start",children:l}):(0,n.jsx)(n.Fragment,{children:l})}},15314:(e,t,l)=>{l.d(t,{e:()=>r});var n=l(74848),s=l(32485),a=l.n(s);l(96540);var i=l(9935);let o="/_next/static/images/default_avatar-e9984af6de73f121d0e6801af2749ca5.jpg",r=e=>{let{ref:t,src:l="",alt:s="avatar",className:r}=e;return(0,n.jsx)(i.T,{ref:t,src:l||o,alt:s,errPlaceholder:o,className:a()("rounded-1/2 object-cover",r)})}},58576:(e,t,l)=>{l.d(t,{m:()=>p});var n=l(74848),s=l(96540),a=l(37458),i=l(27930),o=l(82479),r=l(18007),d=l(47504),u=l(36768);let c={menuButton:"flex items-center rounded px-3 py-1.5 text-left cursor-pointer focus:outline-none whitespace-nowrap leading-5",menuButtonBg:u.MY.fill3,menuButtonText:u.MY.label2,menuButtonHover:u.MY.fill2Hover,menuButtonActive:"active:bg-fill-3 dark:active:bg-dark-fill-3",menuButtonIcon:`w-4.5 h-4.5 flex items-center ml-3 pointer-events-none transition duration-300 ${u.MY.label3}`,menuButtonDisabled:u.MY.label4,dropdownTransition:{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},menuItems:`max-w-[240px] min-w-[140px] absolute z-dropdown mt-1 rounded-lg p-2 overflow-auto focus:outline-none ${u.H2.commandBar}`,menuItemsBg:u.MY.bgOverlay3,menuItem:"cursor-pointer select-none relative h-8 py-1.5 pl-2 pr-12",menuItemText:u.MY.label1,menuItemActive:`rounded ${u.MY.fill4}`,menuItemHover:u.MY.fill4Hover,menuItemSelectedIconWrapper:"absolute inset-y-0 right-0 flex items-center pr-2 text-blue dark:text-dark-blue",popoverTransition:{enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1"},popoverPanel:"absolute w-max max-w-xs z-dropdown mt-1 p-2.5 rounded-lg focus:outline-none"};var m=l(69874);let v=e=>{let{ref:t,disabled:l,className:s,icon:a,iconClassName:i,isOpen:r,children:d,...u}=e;return(0,n.jsxs)("button",{disabled:l,className:(0,o.xF)(c.menuButton,c.menuButtonBg,l?[c.menuButtonDisabled,"cursor-default"]:[c.menuButtonText,c.menuButtonHover,c.menuButtonActive],s),ref:t,...u,type:"button",children:[d,(0,n.jsx)("div",{className:(0,o.xF)(c.menuButtonIcon,{"rotate-180 transform":r,[c.menuButtonDisabled]:l},i),"aria-hidden":"true",children:a||(0,n.jsx)(m.r,{})})]})},p=e=>{let{btnText:t,btnClassName:l,placeholder:m,icon:p,iconClassName:x,items:f,itemsClassName:h,itemClassName:g,itemSelectedClassName:y,placeholderClassName:C=u.MY.label4,selected:b,setSelected:j,wrapperClassName:N,disabled:w}=e;return(0,n.jsx)(a.W1,{as:"div",className:(0,o.xF)("relative",N),children:e=>{let{open:u}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.IU,{as:v,className:(0,o.xF)(l,{[C]:!t}),isOpen:u,icon:p,iconClassName:x,disabled:w,children:t||m}),!w&&(0,n.jsx)(i.e,{as:s.Fragment,...c.dropdownTransition,children:(0,n.jsx)(a.c,{className:(0,o.xF)(c.menuItems,c.menuItemsBg,h),children:f.map((e,t)=>{let{value:l,text:s}=e;return(0,n.jsx)(a.Dr,{children:e=>{let{active:t}=e;return(0,n.jsxs)("div",{className:(0,o.xF)(c.menuItem,c.menuItemText,g,{[c.menuItemActive]:t,[y??""]:b===l}),onClick:()=>j(b!==l?l:void 0),children:[(0,n.jsx)("div",{className:"flex h-5 items-center",children:(0,n.jsx)(d.c,{children:s})}),b===l?(0,n.jsx)("span",{className:c.menuItemSelectedIconWrapper,children:(0,n.jsx)(r.i,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t)})})})]})}})}},95010:(e,t,l)=>{l.d(t,{X:()=>o});var n=l(74848),s=l(3519),a=l(26394),i=l(94545);let o=e=>{let{datetime:t,className:l,unix:o=!1,displayDetail:r=!1,needDetailTooltip:d=!0,dateFormat:u="MMM DD, YYYY",detailFormat:c="MMM DD, YYYY HH:mm",placement:m="top"}=e,v=(0,a.y)(),p=o?a.y.unix(Number(t)):(0,a.y)(t),x=(0,i.R)(v,p)?v.to(p):p.local().format(u),f=p.local().format(c),h=r?f:x;return d&&!r?(0,n.jsx)(s.m_,{placement:m,label:f,children:(0,n.jsx)("span",{className:l,children:h})}):(0,n.jsx)("span",{className:l,children:h})}},85579:(e,t,l)=>{l.d(t,{d:()=>p});var n=l(74848),s=l(96540),a=l(82479),i=l(36768),o=l(76857),r=l(67738),d=l(85478),u=l(42412);let c={pagination:"flex flex-nowrap items-center space-x-2",itemBase:"flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none",itemDefault:"bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2",itemDisabled:"disabled:opacity-40 disabled:pointer-events-none",itemHover:"hover:bg-fill-2 dark:hover:bg-dark-fill-2",itemActive:`pointer-events-none bg-paper dark:bg-dark-gray-5 text-label-1 dark:text-dark-label-1 ${i.H2.card}`},m=e=>{let{children:t,className:l,activeClassName:s,current:i,page:o,onClickHandler:r,...d}=e;return(0,n.jsx)("button",{className:(0,a.xF)(c.itemBase,{[c.itemDefault]:!i,[c.itemHover]:!i,[c.itemActive]:i,[c.itemDisabled]:d.disabled,[s??""]:i},l),...d,onClick:()=>{r&&r(o)},children:o||t})},v=(e,t,l,n)=>{let s=(l=l<1?1:l)-2,a=n-l,i=t-Math.ceil((l-4)/2)-2,o=l-1;return 1===l?t:l===1/0||n<=l?e+1:l<5?t+o>n?a+e+1:t+e:0===e?1:e+1===l?n:t<s?e<s?e+1:"gap":t>n-s+1?e>1?a+e+1:"gap":1===e||e+1===o?"gap":e+i+1},p=e=>{let{className:t,currentPage:l,totalItems:p,onChange:x,pageItemClassName:f,activePageItemClassName:h,chevronClassName:g,arrowButtonClassName:y,itemsPerPage:C=50,maxPageItems:b=8,disabled:j=!1,isSimple:N=!1}=e,w=Math.ceil(p/C)||0,S=[...Array(b>w?w:b)].map((e,t)=>v(t,l,b,w)),M=l>1,k=l<w,I=(0,s.useCallback)(e=>{null!=e&&x(e)},[x]),A=()=>{M&&I(l-1)},F=()=>{k&&I(l+1)};return(0,s.useEffect)(()=>{l>w&&w?I(w):l||I(1)},[w,I,l]),N?(0,n.jsxs)("nav",{role:"navigation",className:(0,a.xF)(t,c.pagination),children:[(0,n.jsx)(u.$,{"aria-label":"prev",disabled:!M||j,onClick:A,variant:"ghost",className:"h-[30px] p-2",children:(0,n.jsx)(o.g,{className:(0,a.xF)(i.MY.label2,g)})},"prev"),(0,n.jsxs)("div",{className:"text-sd-muted-foreground",children:[(0,n.jsx)("span",{className:"text-sd-foreground",children:l}),"/",w]}),(0,n.jsx)(u.$,{"aria-label":"next",disabled:!k||j,onClick:F,variant:"ghost",className:"h-[30px] p-2",children:(0,n.jsx)(r.V,{className:(0,a.xF)(i.MY.label2,g)})},"next")]}):(0,n.jsxs)("nav",{role:"navigation",className:(0,a.xF)(c.pagination,t),children:[(0,n.jsx)(m,{"aria-label":"prev",disabled:!M||j,onClickHandler:A,className:(0,a.xF)(f,y),children:(0,n.jsx)(o.g,{className:(0,a.xF)(i.MY.label2,g)})},"prev"),S.map((e,t)=>"gap"===e?(0,n.jsx)(m,{"aria-label":"gap",disabled:!0,className:f,children:(0,n.jsx)(d.f,{className:i.MY.label2})},t):(0,n.jsx)(m,{current:e===l,page:e,onClickHandler:I,className:f,activeClassName:h,disabled:j},t)),(0,n.jsx)(m,{"aria-label":"next",disabled:!k||j,onClickHandler:F,className:(0,a.xF)(f,y),children:(0,n.jsx)(r.V,{className:(0,a.xF)(i.MY.label2,g)})},"next")]})}},85298:(e,t,l)=>{l.d(t,{E:()=>i});var n=l(74848);l(96540);var s=l(32485),a=l.n(s);let i=e=>{let{className:t,children:l}=e;return(0,n.jsx)("div",{className:a()("animate-pulse",t),children:l})}},52051:(e,t,l)=>{l.d(t,{R:()=>i});var n=l(74848);l(96540);var s=l(82479),a=l(36768);let i=e=>{let{className:t,style:l}=e;return(0,n.jsx)("div",{className:(0,s.xF)("h-3 rounded-[5px]",a.MY.fill3,t),style:l})}},71176:(e,t,l)=>{l.d(t,{T:()=>o});var n=l(74848),s=l(96540),a=l(82479),i=l(36768);let o=e=>{let{ref:t,...l}=e,{value:o="",autoSize:r=!1,onChange:d,className:u,maxLength:c,showRecord:m,rows:v,wrapperClassName:p,...x}=l,f=(0,s.useCallback)(e=>{null==d||d(e.target.value)},[d]),h=(0,s.useRef)(null),g=(0,s.useCallback)(e=>{h.current=e,"function"==typeof(null==t?void 0:t.current)?t.current(e):(null==t?void 0:t.current)&&(t.current=e)},[]),[y,C]=(0,s.useState)(1),b=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!r)return;let e=b.current;if(e){let t=new ResizeObserver(e=>{let[t]=e;C(t.target.scrollHeight/20|0)});return t.observe(e),()=>{t.disconnect()}}},[r]),(0,s.useEffect)(()=>{let e=b.current;e&&r&&C(e.scrollHeight/20|0)},[o,r]),(0,n.jsxs)("div",{className:(0,a.xF)("relative",p),children:[(0,n.jsx)("div",{className:"h-0 overflow-hidden",children:(0,n.jsx)("textarea",{ref:b,className:"w-full resize-none overflow-hidden px-2 leading-5 outline-none",rows:1,value:o,disabled:!0})}),(0,n.jsx)("textarea",{...x,ref:g,maxLength:c,value:o,onChange:f,rows:r?y:v,className:(0,a.xF)({"overflow-hidden":r},"w-full rounded-lg px-2 py-2.5 leading-5","focus:border-green-s border border-transparent outline-none transition-[border-color]",u)}),c&&c>0&&m&&(0,n.jsxs)("div",{className:(0,a.xF)("absolute bottom-2 right-2 text-xs",i.MY.label3),children:[o.length," / ",c]})]})}},24896:(e,t,l)=>{l.d(t,{f:()=>h});var n=l(74848),s=l(96540),a=l(40961),i=l(84038),o=l(82479),r=l(36768),d=l(27064),u=l(53882),c=l(96257),m=l(57411);let v=e=>{switch(e){case"info":return{icon:c.D,iconClassName:r.MY.labelBlueStandard,confirmBtnCls:(0,o.xF)(r.MY.bgBlueStandard,r.MY.bgBlue3Hover,r.MY.labelWhite)};case"danger":return{icon:m.o,iconClassName:r.MY.labelRedStandard,confirmBtnCls:(0,o.xF)(r.MY.bgRedStandard,r.MY.bgRed3Hover,r.MY.labelWhite)};default:return{}}},p=e=>{let{visible:t,loading:l,variant:s,className:m,modalClassName:p,title:x,titleClassName:f,confirmText:h,confirmClassName:g,icon:y,iconClassName:C,confirmBtn:b,confirmBtnCls:j,onConfirm:N,cancelBtn:w,cancelBtnCls:S,onCancel:M}=e,{t:k}=(0,i.Bd)("common",{keyPrefix:"confirmModal"}),I=v(s),A=y??I.icon??c.D;return(0,a.createPortal)((0,n.jsx)(d.a,{visible:t,onCancel:M,closable:!1,maskClosable:!0,className:m,modalClassName:p,children:(0,n.jsxs)("div",{className:"flex space-x-5",children:[(0,n.jsx)("div",{className:(0,o.xF)("h-10 w-10",I.iconClassName,C),children:(0,n.jsx)(A,{className:"h-full w-full"})}),(0,n.jsxs)("div",{className:"flex w-full flex-col",children:[(0,n.jsx)("div",{className:(0,o.xF)(r.MY.label1,"text-lg font-medium",f),children:x||k("title")}),h&&(0,n.jsx)("div",{className:(0,o.xF)(r.MY.label2,"mt-4 text-sm",g),children:h}),(0,n.jsxs)("div",{className:"mt-4 flex items-center justify-end space-x-4 text-sm font-medium",children:[(0,n.jsx)(u.$,{className:(0,o.xF)("cursor-pointer rounded-lg px-4 py-[5px]",r.MY.label2,r.MY.fill3,r.MY.fill2Hover,S),onClick:M,children:w||k("cancelBtn")}),(0,n.jsx)(u.$,{loading:l,disabled:l,className:(0,o.xF)("cursor-pointer rounded-lg px-4 py-[5px]",r.MY.labelWhite,I.confirmBtnCls,j),onClick:N,children:b||k("confirmBtn")})]})]})]})}),document.querySelector("#modal-root"))},x={visible:!1,title:"",confirmText:"",icon:void 0,iconClassName:"",confirmBtn:"",confirmBtnCls:"",onConfirm:()=>null,cancelBtn:"",cancelBtnCls:"",onCancel:()=>null},f=(e,t)=>{switch(t.type){case"update":return{...e,...t.payload};case"reset":return x;default:throw Error()}},h=e=>{let[t,l]=(0,s.useReducer)(f,{...x,...e}),a=(0,s.useCallback)(e=>l({type:"update",payload:e}),[l]),i=(0,s.useCallback)(()=>l({type:"reset"}),[l]),o=(0,s.useCallback)(()=>l({type:"update",payload:{visible:!0}}),[l]),r=(0,s.useCallback)(()=>l({type:"update",payload:{visible:!1}}),[l]),d=t.onCancel,u=(0,s.useCallback)(()=>{r(),null==d||d()},[r,d]);return{modal:(0,n.jsx)(p,{...t,onCancel:u}),control:(0,s.useMemo)(()=>({update:a,reset:i,show:o,hide:r}),[a,i,o,r]),visible:t.visible,update:a,reset:i,show:o,hide:r}}},18231:(e,t,l)=>{l.d(t,{W:()=>s});var n=l(70354);let s=e=>{var t;let{data:l}=(0,n.Xe)();return e===(null==l?void 0:null===(t=l.userStatus)||void 0===t?void 0:t.username)}},42403:(e,t,l)=>{l.d(t,{G:()=>s});var n=l(70354);let s=()=>{let{data:e,isLoading:t}=(0,n.Xe)({notifyOnChangeProps:["data"]}),l=null==e?void 0:e.userStatus,s=(null==l?void 0:l.isPhoneVerified)??!1,a=(null==l?void 0:l.isVerified)??!1;return{isLoading:t,isSignedIn:(null==l?void 0:l.isSignedIn)??!1,isPhoneVerified:s,isVerified:a,isPrimaryVerified:({isPhoneVerified:s,isVerified:a}).isVerified}}},31261:(e,t,l)=>{l.d(t,{s:()=>d});var n=l(96540),s=l(49130),a=l(13814),i=l(84876);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!0,trailing:!0},s=(0,n.useRef)(e);(0,n.useEffect)(()=>{s.current=e},[e]);let{leading:a,trailing:o}=l;return(0,n.useCallback)(t?(0,i.A)(function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return s.current(...t)},t,{leading:a,trailing:o}):()=>void 0,[t,a,o])};var r=l(70094);let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[l,i]=(0,n.useState)(void 0),[d,u]=(0,n.useState)(void 0),c=(0,n.useCallback)(()=>{if(!e)return;let{width:t,height:l}=e.getBoundingClientRect();i(t),u(l)},[e]),{throttle:m}=t||{},v=o(c,m),p=m?v:c;return(0,r.E)(()=>{if(!e||!(0,a.Bd)())return;p();let t=new s.tb(p);return t.observe(e),()=>{t.unobserve(e)}},[p,e]),{width:l,height:d}}},46830:(e,t,l)=>{l.d(t,{v:()=>s});var n=l(96540);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{domElement:t,threshold:l=475}=e,s=null!=t&&!!t.clientWidth&&(null==t?void 0:t.clientWidth)<l,[a,i]=(0,n.useState)(s);return(0,n.useEffect)(()=>{if(!t)return;let e=new ResizeObserver(()=>i((null==t?void 0:t.clientWidth)<l));return e.observe(t),()=>e.unobserve(t)},[t,l]),a}},94545:(e,t,l)=>{l.d(t,{H:()=>i,R:()=>a});var n=l(98990),s=l(19458);let a=(e,t)=>24>e.diff(t,"h",!0),i=(e,t)=>{let{hiddenFields:l=[],prefix:a}=t||{},i={days:"d",hours:"h",minutes:"m",seconds:"s"},o=["days","hours","minutes","seconds"].filter(e=>!l.includes(e)).map((t,l)=>0!==l?{timeKey:t,value:e[t]()}:{timeKey:t,value:Math.floor(e[`as${(0,n.A)(t)}`]())});return o.slice(o.findIndex(e=>0!==e.value)||0).map(e=>`${e.value} ${(0,s.A)(a,i)[e.timeKey]}`).join(" ")}},77688:(e,t,l)=>{l.d(t,{X:()=>n});let n={"data-gramm":!1,"data-gramm_editor":!1,"data-enable-grammarly":!1}},11320:(e,t,l)=>{l.d(t,{ZD:()=>v,dk:()=>r,oS:()=>o});var n=l(84424),s=l.n(n),a=l(17159),i=l.n(a);let o=e=>s()(e),r=e=>i()(e),d=/[&<>"]/,u=/[&<>"]/g,c=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"]]);function m(e){return c.get(e)||e}function v(e){return d.test(e)?e.replace(u,m):e}},49203:(e,t,l)=>{l.d(t,{A:()=>n});let n="/_next/static/images/anonymous_avatar-0e699fe8591585574e6a9e6e905f91af.svg"}}]);